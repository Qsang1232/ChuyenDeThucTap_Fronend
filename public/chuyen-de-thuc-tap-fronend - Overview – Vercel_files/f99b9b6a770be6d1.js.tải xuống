;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="23facdff-b64b-211a-9a35-c7d4f4b786c6")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4351165,e=>{"use strict";var t=e.i(31889),a=e.i(6695816);let r=(0,a.createContext)(null);e.s(["PerTLDPropagationTimeProvider",0,function(e){let{children:a,perTLDPropagationTimeMap:n}=e;return(0,t.jsx)(r.Provider,{value:n,children:a})},"useTldPropagationTime",0,function(e){let t=(0,a.useContext)(r);return t?t.get(e):(console.warn("usePerTLDPropagationTime must be used within a PerTLDPropagationTimeProvider, returning null"),null)}])},5519011,e=>{e.v({content:"add-domain-in-use-modal-module__vFG4Bq__content",favicon:"add-domain-in-use-modal-module__vFG4Bq__favicon",inset:"add-domain-in-use-modal-module__vFG4Bq__inset",loadingItem:"add-domain-in-use-modal-module__vFG4Bq__loadingItem",noteCenterText:"add-domain-in-use-modal-module__vFG4Bq__noteCenterText",outset:"add-domain-in-use-modal-module__vFG4Bq__outset",subitem:"add-domain-in-use-modal-module__vFG4Bq__subitem"})},8162654,e=>{"use strict";var t=e.i(31889),a=e.i(3306538),r=e.i(2504781),n=e.i(5468328),i=e.i(8161149),s=e.i(3500331),o=e.i(8522580),l=e.i(5255926),d=e.i(6143247),c=e.i(60582);let u=[1,2,3];function m(){return(0,t.jsx)("div",{className:"flex flex-col items-start justify-center self-stretch rounded-md border border-solid border-gray-400 bg-background-100",children:u.map(e=>(0,t.jsx)("div",{className:(0,d.cn)("border-b-400 border-b border-solid w-full"),children:(0,t.jsx)("div",{className:"flex w-full flex-col px-4 ",children:(0,t.jsxs)("div",{className:"flex h-[70px] w-full flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 self-stretch overflow-hidden bg-transparent p-0 [font-family:Geist]",children:[(0,t.jsx)(l.Skeleton,{className:"block rounded-full",height:"16px",width:"16px"}),(0,t.jsx)("div",{className:"flex w-[220px] min-w-0 items-center gap-2 @md-page:w-[359px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,t.jsx)(l.Skeleton,{height:"18px",width:"142px"}),(0,t.jsx)(l.Skeleton,{height:"18px",width:"116px"})]})}),(0,t.jsx)("div",{className:"hidden shrink items-center gap-2 overflow-hidden truncate font-mono text-sm font-normal leading-5 text-gray-900 @md-page:flex",children:(0,t.jsx)(l.Skeleton,{className:"h-[20px]",width:"108px"})})]}),(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-3",children:[(0,t.jsx)(r.Button,{loading:!0,type:"secondary",size:"small",className:"hidden @lg-page:flex",children:"Refresh"}),(0,t.jsx)(r.Button,{disabled:!0,size:"small",type:"secondary",children:"Edit"})]})]})})},e))})}var h=e.i(8674454),f=e.i(4991687),g=e.i(6694387),p=e.i(57106),x=e.i(6239252),j=e.i(6695816),v=e.i(4345845),b=e.i(3162826),k=e.i(8284460),y=e.i(9722978),w=e.i(7553931),N=e.i(1717203),S=e.i(7557283),C=e.i(5927860),I=e.i(6237575),z=e.i(1332276),P=e.i(1991452),D=e.i(6891161),A=e.i(9318197),E=e.i(4004502),R=e.i(8518548);function T(e){let{setRemoveModal:a,removeModal:r,domain:i,onRemoveDomain:s,removing:l,error:d}=e,c=(0,P.useRouter)(),u=(0,j.useCallback)(()=>a(!1),[a]),{can:m}=(0,N.default)(),h=m(S.Action.Update,S.Resource.Project),{data:f}=(0,R.useProjectDomains)(c.query.project,{redirect:i}),g=(f?.length??0)>0,p=(0,j.useCallback)(async()=>{await s({removeRedirects:g})},[g,s]),x=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Modal.Header,{children:(0,t.jsx)(D.Modal.Title,{children:"Remove Domain from Project"})}),(0,t.jsx)(A.Spacer,{}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Removing ",(0,t.jsx)("strong",{children:i})," will disconnect it from your project. This project will no longer be accessible from this domain, including in production."]}),(0,t.jsx)(A.Spacer,{}),g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Note,{type:"warning",children:["This domain has ",f?.length," redirect",f?.length===1?"":"s"," pointing to it:"," ",f?.map(e=>`"${e.name}"`).join(", "),". Removing this domain will also remove the domains that redirect to it."]}),(0,t.jsx)(A.Spacer,{})]}):null,d?(0,t.jsx)(o.Note,{type:"error",children:d}):null]}),v=(f?.length??0)+1,b=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Modal.Action,{onClick:()=>a(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(n.Tooltip,{disableTriggers:h,text:"You don't have permission to manage domains in this project. Ask your team admin to manage domains or grant you the member role or higher.",children:(0,t.jsx)(D.Modal.Action,{"data-testid":(0,E.tid)("project","settings","domains","remove-domain-modal","confirm-button"),disabled:l||!h,loading:l,onClick:p,type:"error",children:g?`Remove ${2===v?"Both":`All ${v}`} Domains`:"Remove"})})]});return(0,t.jsxs)(D.Modal,{active:r,"data-testid":(0,E.tid)("project","settings","domains","remove-domain-modal"),onClickOutside:u,width:"520px",children:[(0,t.jsx)(D.Modal.Body,{children:x}),(0,t.jsx)(D.Modal.Actions,{children:b})]})}var _=e.i(693385),O=e.i(7957424),F=e.i(542164),M=e.i(822157),B=e.i(1516738),$=e.i(8835183);function L(e){let a=(0,j.useRef)(null);return(0,j.useEffect)(()=>{let e=e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){let t=a.current;document.activeElement!==t&&(e.preventDefault(),t?.focus())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,t.jsx)($.SearchInput,{ref:a,clearable:!1,value:e.value,name:"search",error:e.noResultsFound?"We couldn't find any domains matching your search.":void 0,onChange:t=>e.setSearch(t.target.value),placeholder:"Searchâ€¦",width:"100%"})}var W=e.i(3322724),V=e.i(6881349),G=e.i(9668517),H=e.i(6060673),U=e.i(2928617);function q(e){let a=(0,G.useTeamSlug)(),r=(0,w.useParams)(),{data:n}=(0,H.useProject)(r?.project);return n?.link?(0,t.jsx)(Y,{project:n,...e}):(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:(0,t.jsx)(p.ButtonLink,{as:`/${a}/${n?.name}/settings/git`,href:`/${a}/${n?.name}/settings/git`,size:"small",type:"secondary",children:"Connect Git Repository"})})}function Y(e){let{disabled:r,onChange:n,onFocus:i,project:s,value:o,environmentId:l,clearable:d=!1}=e,{data:c}=(0,U.useProjectBranches)(s.id),u=(c||[]).map(e=>e.ref),m=u.filter(e=>e!==s.link.productionBranch);return(0,t.jsxs)(V.Combobox,{className:"flex w-full",clearable:d,disabled:r,onChange:e=>n?.(e??""),placeholder:"All Branches",value:o,children:[(0,t.jsx)(V.Combobox.Input,{"aria-label":"Git Branch",onChange:e=>n?.(e.target.value),onFocus:i}),(0,t.jsxs)(V.Combobox.List,{emptyMessage:"No Branches",children:[(0,t.jsx)(t.Fragment,{children:!!o&&!u.includes(o??"")&&(0,t.jsx)(V.Combobox.Option,{displayValue:!0,value:o??"",children:`Use "${o}"`})}),(0,t.jsx)(t.Fragment,{children:"production"===l&&(0,t.jsxs)(V.Combobox.Option,{value:s.link.productionBranch||"",children:[(0,t.jsx)("p",{className:"text-copy-14",children:s.link.productionBranch}),(0,t.jsx)(A.Spacer,{inline:!0,x:1/4}),(0,t.jsx)(a.Badge,{variant:"blue",children:"Production"})]})}),(0,t.jsx)(t.Fragment,{children:m.map(e=>(0,t.jsx)(V.Combobox.Option,{value:e,children:e},e))})]})]})}var J=e.i(818351),K=e.i(8042625),Q=e.i(4244280),Z=e.i(4937017);e.i(3512434);var X=e.i(9835407),ee=e.i(1873881),et=e.i(1395335);let ea=X.z.object({cns:X.z.array(X.z.string()),expiresAt:X.z.number()}),er=X.z.union([X.z.object({certs:X.z.array(ea)}),X.z.undefined()]),en=X.z.object({error:X.z.object({status:X.z.number().optional(),message:X.z.string(),code:X.z.enum(["public-alias","no-permissions-certs"]).optional()})});var ei=e.i(8785423);let es=X.z.object({providers:X.z.array(X.z.object({role:X.z.string(),id:X.z.string()})),nameserverProviders:X.z.array(X.z.string())}),eo=X.z.object({error:X.z.object({code:X.z.enum(["not_found","invalid_name","internal_server_error"]),message:X.z.string(),name:X.z.string()})});async function el(e,t){if(await new Promise(e=>{setTimeout(e,1)}),(0,et.isPublicAlias)(t))return{isDomainOnCloudflare:!1,hasCloudflareInFront:!1};let a=await (0,ee.safeFetch)(e,{successSchema:es,failureSchema:eo});if(a.isErr())return{isDomainOnCloudflare:!1,hasCloudflareInFront:!1};let r=a.value.nameserverProviders.includes("Cloudflare"),n=a.value.providers.find(e=>"front-proxy"===e.role);return{isDomainOnCloudflare:r,hasCloudflareInFront:n?.id==="Cloudflare"}}let ed=X.z.null(),ec=X.z.object({error:X.z.object({code:X.z.enum(["invalid_name"]),message:X.z.string()})});function eu(e,t){let a=(0,G.useTeamSlug)();return(0,J.useIsomorphicSWR)(e.length>0?`${Q.API_DOMAINS}/${encodeURIComponent(e)}/verify${(0,K.encode)({teamId:a})}`:null,async t=>(0,et.isPublicAlias)(e)?(0,Z.okAsync)(null):(0,ee.safeFetch)(t,{method:"POST",successSchema:ed,failureSchema:ec}),{refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!0,revalidateOnFocus:!0,refreshInterval:15e3,dedupingInterval:15e3,...t})}let em=X.z.discriminatedUnion("result",[X.z.object({result:X.z.literal("success")}),X.z.object({result:X.z.literal("error"),message:X.z.string(),code:X.z.string()})]),eh=X.z.object({error:X.z.object({code:X.z.enum(["incorrect_txt_record","txt_on_another_project","existing_project_domain","txt_on_wrong_domain"]),message:X.z.string(),name:X.z.string().optional()})});var ef=e.i(4030453),eg=e.i(6607601),ep=e.i(9250831),ex=e.i(7909933);let ej=X.z.object({boughtAt:X.z.number().nullable(),verified:X.z.boolean().optional(),createdAt:X.z.number(),cdnEnabled:X.z.boolean(),configVerifiedAt:X.z.number().nullable().optional(),expiresAt:X.z.number().nullable(),id:X.z.string(),intendedNameservers:X.z.array(X.z.string()),movedAt:X.z.number().optional(),movedFromOwnerId:X.z.string().optional(),name:X.z.string(),nameservers:X.z.array(X.z.string()),nsVerifiedAt:X.z.number().nullable(),orderedAt:X.z.number().optional(),renew:X.z.boolean().optional(),serviceType:X.z.enum(["zeit.world","external","na"]),teamId:X.z.string().nullable(),transferredAt:X.z.number().nullable().optional(),txtVerifiedAt:X.z.number().nullable(),verificationRecord:X.z.string(),creator:X.z.object({id:X.z.string(),customerId:X.z.string().nullable().optional(),email:X.z.string(),username:X.z.string(),name:X.z.string().optional()}).optional(),zone:X.z.boolean().optional(),userId:X.z.string().nullable().optional(),registrar:X.z.enum(["new"]).optional()}),ev=X.z.object({domain:ej}),eb=X.z.object({error:X.z.object({code:X.z.string(),message:X.z.string(),name:X.z.string().optional()})});function ek(e,t){var a;let r=(0,G.useTeamSlug)();return(0,ex.default)(e&&r?(a={domainName:e,teamId:r},`${Q.API_DOMAINS}/${encodeURIComponent(a.domainName)}${(0,K.encode)({teamId:a.teamId})}`):null,async t=>e&&(0,et.isPublicAlias)(e)?(0,Z.errAsync)(new ee.ApiError({error:{error:{code:"forbidden",message:`You don't have access to "${e}"`,name:e}}})):(0,ee.safeFetch)(t,{successSchema:ev,failureSchema:eb}),{dedupingInterval:3e4,...t})}var ey=e.i(4237893),ew=e.i(2807882);function eN(e){let{children:a,tabs:r,disabled:n,selected:i,defaultSelected:s=0,onChange:o,borderless:l}=e,[d,c]=(0,j.useState)(s),u=void 0!==i?i:d;return(0,t.jsxs)("div",{className:(0,y.clsx)({[String(ew.default.disabled)]:n,[String(ew.default.borderless)]:l}),"data-geist-fieldset-tabs":"",children:[(0,t.jsx)("div",{className:ew.default.tabsRow,children:(0,t.jsx)(ey.Tabs,{selected:i?r[i]:r[d],setSelected:e=>{if(n)return;let t=r.findIndex(t=>t===e);void 0===i&&c(t),o?.(t)},style:{boxShadow:"none"},tabs:r.map(e=>({title:e,value:e}))})}),j.Children.map(a,(e,t)=>t===u?e:null)]})}var eS=e.i(8517043),eC=e.i(7137884),eI=e.i(9177891),ez=e.i(277234),eP=e.i(7917902),eD=e.i(6264149);function eA(e){let{teamDomain:a,projectDomain:r,refresh:n}=e,i=!!a?.zone,s=(0,G.useTeamSlug)(),{team:l}=(0,eP.useAccount)(),d=(0,j.useCallback)(async()=>{let e=`?teamId=${encodeURIComponent(s??"")}`;await (0,ez.fetchAPI)(`${Q.API_DOMAINS}/${encodeURIComponent(r.name)}${e}`,{method:"PATCH",body:JSON.stringify({zone:!0}),throwOnHTTPError:!0}),n()},[r.name,s,n]);(0,j.useEffect)(()=>{let e=setTimeout(()=>{i||d()},2500);return()=>clearTimeout(e)},[i,d]);let c=l?.billing?.plan==="hobby";return a?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{children:"Update your domain's nameservers to enable Vercel DNS."}),(0,t.jsx)(eI.NSConfiguration,{nameservers:a.intendedNameservers.length>0?a.intendedNameservers:eD.VERCEL_NAMESERVERS})]}):(0,t.jsx)(o.Note,{children:c?"Please move this domain to this team in order to use Vercel nameservers.":(0,t.jsxs)(t.Fragment,{children:["Please"," ",(0,t.jsx)(p.Link,{href:"https://vercel.com/docs/domains/working-with-domains/transfer-your-domain",className:"text-blue-900 underline",children:"move this domain"})," ","to this team in order to use Vercel nameservers. If no one on your team has access to this domain, contact support to prove ownership of it"]})})}function eE(e){let{dnsRecords:a,teamDomain:r,domainConfig:n,projectDomain:i,configMethod:s,domainConnectUrl:o,setConfigMethod:l,verifyTxtError:d}=e;if((0,F.default)(i.name)&&(!n||"zeit.world"!==n.serviceType))return(0,t.jsx)(eA,{teamDomain:r,projectDomain:i,refresh:e.refresh});if(!n?.misconfigured)return(0,t.jsx)("div",{className:"flex flex-col gap-2 border-0",children:(0,t.jsx)(eI.DNSConfiguration,{records:a,domainConnectUrl:o,verifyTxtError:d})});let{conflicts:c}=n,u=c.sort((e,t)=>e.type.localeCompare(t.type)).map(e=>{var t,a;return{...e,name:(t=e.name,(a=i.apexName)===t?"@":t.slice(0,t.length-a.length-1))}}),m=u.length>0,h=1===u.length;return(0,t.jsxs)(eN,{borderless:!0,selected:+("DNS Records"!==s),onChange:e=>{l(0===e?"DNS Records":"Nameservers")},tabs:["DNS Records","Vercel DNS"],children:[(0,t.jsx)(eS.Fieldset,{borderlessTabs:!0,children:(0,t.jsx)(eC.FieldsetContent,{className:"px-1 pb-0 pt-2",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-0",children:[(0,t.jsx)("span",{children:"The DNS records at your provider must match the following records to verify and connect your domain to Vercel."}),m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:["Remove the following conflicting DNS"," ",h?"record":"records"," from your DNS provider:"]}),(0,t.jsx)(eI.DNSConfiguration,{records:u}),(0,t.jsx)("p",{children:"Afterwards, set the following record on your DNS provider to continue:"})]}):null,(0,t.jsx)(eI.DNSConfiguration,{records:a,domainConnectUrl:o,verifyTxtError:d})]})})}),(0,t.jsx)(eS.Fieldset,{borderlessTabs:!0,children:(0,t.jsx)(eC.FieldsetContent,{className:"px-1 pt-2",children:(0,t.jsx)(eA,{teamDomain:r,projectDomain:i,refresh:e.refresh})})})]})}var eR=e.i(7362991);let eT=X.z.object({providers:X.z.array(X.z.object({role:X.z.string(),id:X.z.string()})),nameserverProviders:X.z.array(X.z.string())}),e_=X.z.object({error:X.z.object({code:X.z.enum(["not_found","invalid_name","internal_server_error"]),message:X.z.string(),name:X.z.string()})});function eO(e){let t=(0,eR.parse)(e);return!("error"in t)&&("www"===t.subdomain||t.domain===e)&&"vercel.app"!==t.tld&&t.listed}function eF(e,t){return t===e?"@":e.slice(0,e.length-t.length-1)}var eM=e.i(4394127),eB=e.i(5757634),e$=e.i(3186167),eL=e.i(7432042),eW=e.i(109803),eV=e.i(4351165),eG=e.i(953632),eH=e.i(9977037),eU=e.i(8523664),eq=e.i(5836125),eY=e.i(8905788),eJ=e.i(5338940);function eK(e){return null===e?null:Math.floor((Date.now()-e)/6e4)}function eQ(e){var a,r,n;let i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,o={refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!1,revalidateOnFocus:!1,refreshInterval:s,dedupingInterval:3e4},[l,d]=(0,j.useTransition)(),c=(0,G.useTeamSlug)(),u=(0,eJ.useTeam)(),m=(0,ei.useDomainConfig)(e.name,{strict:!1,projectIdOrName:e.projectId},o),h=(a=e.name,(0,J.useIsomorphicSWR)((0,et.isPublicAlias)(a)?null:`/api/front-domains/check-proxy-status?domain=${a}`,async e=>el(e,a),{dedupingInterval:3e4,...o})),f=function(e,t){let{domain:a,filterDeleted:r=!0}=e,n=(0,G.useTeamSlug)();return(0,J.useIsomorphicSWR)(`${Q.API_ALIASES}/${encodeURIComponent(a)}${(0,K.encode)({filterDeleted:r,teamId:n})}`,async e=>{try{let t=await fetch(e);if(204===t.status)return(0,Z.ok)(null);return(0,Z.ok)(await t.json())}catch(e){return(0,Z.err)(e)}},{dedupingInterval:3e4,...t})}({domain:e.name,filterDeleted:!1},o),g=eu(e.name,o),x=(i=(0,G.useTeamSlug)(),(0,J.useIsomorphicSWR)(`${(0,Q.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e.projectId}/domains/${e.name}/verify${(0,K.encode)({teamId:i})}`,async t=>(0,et.isPublicAlias)(e.name)||!1!==e.verified?(0,Z.ok)({result:"success"}):(0,ee.safeFetch)(t,{successSchema:em,failureSchema:eh,method:"POST"}),{refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!0,revalidateOnFocus:!0,refreshInterval:15e3,dedupingInterval:15e3,...o})),v=function(e,t){let a=(0,G.useTeamSlug)(),{can:r}=(0,N.default)(),n=r(S.Action.List,S.Resource.DomainCertificate);return(0,J.useIsomorphicSWR)(`${Q.API_CERTS}${(0,K.encode)({teamId:a,cn:e})}`,async t=>(0,et.isPublicAlias)(e)?(0,Z.errAsync)(new ee.ApiError({error:{error:{message:"You are not authorized to list certificates",status:403,code:"public-alias"}}})):n?(0,ee.safeFetch)(t,{successSchema:er,failureSchema:en}):(0,Z.errAsync)(new ee.ApiError({error:{error:{message:"You are not authorized to list certificates",status:403,code:"no-permissions-certs"}}})),{shouldRetryOnError:!1,dedupingInterval:3e4,...t})}(e.name,o),b=(0,eM.useCertErrors)(e.name,"dnsName",o),k=(0,H.useProject)(e.projectId,{config:o}),y=(r=e.name,n={shouldRetryOnError:!1,...o},(0,ex.default)(r&&!(0,et.isPublicAlias)(r)?`/api/front-domains/domain-connect/status?domain=${r}`:null,e=>(0,ez.fetchAPI)(e,{throwOnHTTPError:!0}),{keepPreviousData:!0,dedupingInterval:3e4,...n})),w=(0,e$.useHasDomainBeenConfiguredWithDomainConnect)(e.name),C=ek(e.name,o),I=(0,eG.parse)(e.name).publicSuffix??"",z=(0,eV.useTldPropagationTime)(I),P=C.data?.isOk()?C.data.value.domain:null,D=function(e){let{boughtAt:t}=e,[a,r]=(0,j.useState)(eK(t));return((0,j.useEffect)(()=>{if(null===t)return;let e=setInterval(()=>{r(eK(t))},1e4);return()=>clearInterval(e)},[t]),null===t)?null:a}({boughtAt:P?.boughtAt??null})??eK(P?.boughtAt??null),[E,T]=(0,j.useState)("DNS Records"),_=e.name.endsWith(".vercel.app"),O=P?.registrar==="new",F=u.isReady&&u.team?u.team.id:null,M=P?.teamId??null,B=u.isReady&&null!==M&&null!==F&&F===M,$=O&&B&&!_,L=(0,eU.useAtomValue)((0,eq.contactVerificationStateAtom)(new eq.ContactVerificationStateParams({domainName:$?e.apexName:null,scope:c??null}))),W=m.isLoading||h.isLoading||f.isLoading||g.isLoading||x.isLoading||v.isLoading||b.isLoading||C.isLoading||$&&"Initial"===L._tag,V=m.isValidating||h.isValidating||f.isValidating||g.isValidating||x.isValidating||v.isValidating||b.isValidating||C.isValidating,U=l||V,q=(0,j.useCallback)(()=>{d(async()=>{await Promise.all([m.mutate(),h.mutate(),f.mutate(),g.mutate(),x.mutate(),v.mutate(),b.mutate(),C.mutate(),y.mutate()])})},[b,v,m,f,h,g,x,C,y]),Y=function(e,t){eu(e??"");let a=function(e,t){let a=(0,ei.useDomainConfig)(e,{strict:!1,projectIdOrName:t}),r={ipv4:"76.76.21.21",cname:"cname.vercel-dns.com."};if(!a.data?.isOk())return r;let n=a.data.value.recommendedIPv4?.[0].value;n&&n.length>0&&(r.ipv4=n[0]);let i=a.data.value.recommendedCNAME?.[0].value;return i&&(r.cname=i),r}(e,t),{data:r}=(0,R.useProjectDomain)(e?{projectId:t,name:e}:null),n=function(e){let{data:t}=(0,ex.default)(e&&!(0,et.isPublicAlias)(e)?`/api/front-domains/check-proxy-status?domain=${e}`:null,async e=>{let t=await (0,ee.safeFetch)(e,{successSchema:eT,failureSchema:e_});return t.isOk()?{isDomainOnCloudflare:t.value.nameserverProviders.includes("Cloudflare"),hasCloudflareInFront:t.value.providers.find(e=>"front-proxy"===e.role)?.id==="Cloudflare"}:{isDomainOnCloudflare:!1,hasCloudflareInFront:!1}});return t?.isDomainOnCloudflare??!1}(e),i=ek(e),s=(0,ei.useDomainConfig)(e,{strict:!1,projectIdOrName:t});if(!e||!r)return[];let o=r.verification?.at(0),l=r.apexName===e,d=i.data?.isOk()?i.data.value.domain:void 0,c=s.data?.isOk()?s.data.value:void 0,u=d?.intendedNameservers.length?d.intendedNameservers:eD.VERCEL_NAMESERVERS,m=c?.nameservers??[];d?.serviceType==="na"&&d.boughtAt,u.every(e=>m.includes(e));let h=[],f=s.data?.isOk()&&!s.data.value.misconfigured,g=s.data?.isOk()&&["required-change","optional-change"].includes(s.data.value.ipStatus??"");return(!f||g)&&h.push({type:l?"A":"CNAME",name:l?"@":eF(e,r.apexName),value:l?a.ipv4:a.cname,disableProxy:n}),o&&h.push({type:o.type,name:eF(o.domain,r.apexName),value:`${o.value}`,verifyDomain:o.domain}),h}(e.name,e.projectId),X=y.data?.providerId==="cloudflare.com"?(0,e$.getDomainConnectApplyUrl)(e,c??void 0):void 0,ea=x.data?.isErr()?x.data.error:void 0,es=(0,t.jsx)(eE,{dnsRecords:Y,domainConfig:m.data?.isOk()?m.data.value:void 0,teamDomain:C.data?.isOk()?C.data.value.domain:void 0,projectDomain:e,domainConnectUrl:X,refresh:q,configMethod:E,setConfigMethod:T,verifyTxtError:ea?._tag==="ApiError"&&"txt_on_another_project"===ea.error.error.code?ea.error.error.message:void 0});if(W)return{status:"loading"};if($&&eH.Result.isSuccess(L)&&!1===L.value.verified)return{status:"unverified-email",refresh:q,isRefreshing:U,level:L.value.verifyBy>new Date?"warning":"error",ui:(0,t.jsx)(eY.ContactVerificationNotification,{email:L.value.email,verifyBy:L.value.verifyBy,domainName:e.name})};let eo=m.data?.isOk()?m.data.value:null;if(w&&(eo?.misconfigured||!e.verified))return{status:"domain-connect-success",refresh:q,isRefreshing:U,ui:(0,t.jsx)("p",{className:"text-copy-14",children:"Automatic configuration applied correctly and we are monitoring for the DNS changes to propagate."}),level:"spinner"};if(!e.verified)return{status:"verification-needed",refresh:q,isRefreshing:U,ui:es,level:"error"};if(eo?.misconfigured){let e=(0,eL.default)("4h")/6e4;if(null!==D&&D<e&&!eo?.configuredBy){let e=z?.averagePropagationDelayMs?Math.max(Math.round(z.averagePropagationDelayMs/6e4*1.3),5):null;return{status:"pending-nameserver-propagation",refresh:q,isRefreshing:U,ui:(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsxs)("p",{className:"text-copy-14",children:[(()=>{if(!e)return eD.DNS_PROPAGATION_WARNING;let a=D?e-D:e;return a<=0?(0,t.jsx)(t.Fragment,{children:"Your domain is taking longer than expected to propagate. This may be due to a delay in the registry."}):(0,t.jsxs)(t.Fragment,{children:["We're estimating that your domain will be online in"," ",(0,t.jsxs)(eg.InlineCode,{fontSize:"14px",children:[a," minute",1===a?"":"s"]})," ","based on similar propagation times for"," ",(0,t.jsxs)(eg.InlineCode,{fontSize:"14px",children:[".",I]})," domains."]})})()," Once this process is completed, your domain will automatically be assigned and serving traffic."]})}),level:"spinner"}}return{status:"invalid-configuration",refresh:q,isRefreshing:U,ui:es,level:"error"}}let ed=m.data?.isOk()?m.data.value.ipStatus:null,ec=m.data?.isOk()&&!!(m.data.value.recommendedIPv4||m.data.value.recommendedCNAME);if("required-change"===ed&&ec&&!_)return{status:"ip-downgrade",refresh:q,isRefreshing:U,level:"error",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"To avoid downtime, you must change your DNS records to match the following:"}),(0,t.jsx)(A.Spacer,{y:.5}),es]})};if(h.data?.hasCloudflareInFront)return w?{status:"disabling-proxy",refresh:q,isRefreshing:U,ui:(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsxs)("p",{children:["We've"," succesfully disabled the proxy in front of your domain and are monitoring for the changes to propagate."]})}),level:"spinner"}:{status:"proxy-detected",refresh:q,className:"px-0",isRefreshing:U,ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"pt-2 px-7",children:[(0,t.jsx)("div",{children:"Using a proxy in front of Vercel prevents our automated DDOS and bot-mitigation tools from working correctly. It can also degrade performance."}),(0,t.jsx)(A.Spacer,{y:.5}),(0,t.jsx)("div",{className:"flex justify-between flex-row items-center",children:(0,t.jsxs)("div",{children:["To disable the proxy, update your DNS provider."," ",(0,t.jsx)(p.Link,{variant:"highlight",href:"https://vercel.com/kb/guide/can-i-use-a-proxy-on-top-of-my-vercel-deployment",children:"Learn more."})]})})]}),X?(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("div",{className:"ml-16",children:(0,t.jsx)(p.ButtonLink,{href:X,onClick:()=>{(0,ep.track)("click_disable_proxy",{source:"project-domains-page-proxy-warning",domainName:e.name})},size:"small",children:(0,t.jsxs)("div",{className:"flex items-center flex-row gap-1",children:["1-click fix",(0,t.jsx)(eW.External,{})]})})})}):null]}),level:"warning"};let ej=k.data?.targets?.production,ev=k.data?.link?.productionBranch||"the default branch",eb=f.data?.isOk()&&!f.data.value;if(!k.isLoading&&(!ej||eb))return{status:"no-deployment",refresh:q,isRefreshing:U,ui:(0,t.jsxs)("p",{className:"text-copy-14",children:["Your domain is properly configured, but you don't have a production deployment.",(0,t.jsx)("br",{}),"To deploy to production,"," ",(0,t.jsxs)(p.Link,{href:"/docs/git",tab:!0,variant:"highlight",children:["push to ",ev]}),", or run ",(0,t.jsx)(eg.InlineCode,{noWrap:!0,children:"vercel --prod"})," with our"," ",(0,t.jsx)(p.Link,{href:"/cli",tab:!0,variant:"highlight",children:"command-line interface"}),"."]}),level:"warning"};if(m.data?.isOk()&&"zeit.world"===m.data.value.serviceType&&m.data.value.dnssecEnabled)return{status:"dnssec-needs-to-be-disabled",refresh:q,isRefreshing:U,ui:(0,t.jsx)(ef.Error,{children:"Your domain's nameservers are pointing to Vercel, but you must disable DNSSEC with your domain registrar in order for your nameservers to resolve globally."}),level:"error"};let ey=v.data?.isErr()&&"ApiError"===v.data.error._tag&&("public-alias"===v.data.error.error.error.code||"no-permissions-certs"===v.data.error.error.error.code);if(v.data?.isErr()&&!ey)return{status:"certs-load-failed",refresh:q,isRefreshing:U,ui:(0,t.jsx)(ef.Error,{children:"Failed to load certs"}),level:"error"};if(ey)return"optional-change"===ed&&ec&&!_?{status:"ip-upgrade",refresh:q,isRefreshing:U,level:"warning",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"Vercel recommends updating your DNS records to match the following:"}),(0,t.jsx)(A.Spacer,{y:.5}),es]})}:{status:"configured-correctly",refresh:q,isRefreshing:U,ui:null,level:null};let ew=v.data?.isOk()?v.data.value?.certs:void 0,eN=b.data?.isOk()?b.data.value?.errors:void 0;if(!ew?.length){let e=(0,eM.getMostRecentCertErrorInfo)(eN??[]);if(e){let{message:a,isRenewal:r}=e;return{status:r?"certs-renewal-errored":"certs-issue-errored",refresh:q,isRefreshing:U,level:"error",ui:(0,t.jsx)(ef.Error,{children:a})}}return{status:"certs-issuing",refresh:q,isRefreshing:U,ui:(0,t.jsx)("div",{className:"pt-2",children:"We are issuing the certificate for your domain, this should only take a few minutes."}),level:null}}let eS=ew.filter(t=>t.cns.some(t=>(function(e,t){let a=e.toLowerCase(),r=t.toLowerCase();if(a===r)return!0;if(a.startsWith("*.")){let e=a.slice(1);return RegExp(`^[^\\.]+${e.replace(/\./g,"\\.")}$`).test(r)}return!1})(t,e.name)));return 0===eS.filter(e=>e.expiresAt>Date.now()).length&&eS.length>0?{status:"certs-expired",refresh:q,isRefreshing:U,ui:(0,t.jsxs)(ef.Error,{children:["Your SSL cert has expired, please update your"," ",(0,t.jsx)(p.Link,{as:`/${c}/~/domains/${encodeURIComponent(e.name)}`,href:"/dashboard/[teamSlug]/domains/[domain]",tab:!0,variant:"highlight",children:"cert settings"}),"."]}),level:"error"}:"optional-change"===ed&&ec&&!_?{status:"ip-upgrade",refresh:q,isRefreshing:U,level:"warning",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"Vercel recommends updating your DNS records to match the following:"}),(0,t.jsx)(A.Spacer,{y:.5}),es]})}:{status:"configured-correctly",refresh:q,isRefreshing:U,ui:null,level:null}}var eZ=e.i(8735244),eX=e.i(8761240),e0=e.i(9386557);function e1(e){let{domain:a}=e,r=eQ(a);if("loading"===r.status)return(0,t.jsx)(l.Skeleton,{className:"block rounded-full",height:"16px",width:"16px"});if(null===r.level)return(0,t.jsx)(eX.CheckCircleFill,{size:16,color:"blue-700"});switch(r.level){case"warning":return(0,t.jsx)(eX.CheckCircleFill,{size:16,color:"blue-700"});case"error":return(0,t.jsx)(e0.WarningFill,{size:16,color:"red-700"});case"spinner":return(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",style:{color:"var(--ds-gray-900)"},children:(0,t.jsx)(eZ.Spinner,{size:16})})}}function e2(e){let{domain:r}=e,n=eQ(r);switch(n.status){case"proxy-detected":return(0,t.jsx)(a.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"Proxy Detected"})});case"no-deployment":return(0,t.jsx)(a.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"No Deployment"})});case"certs-issuing":return(0,t.jsx)(a.Badge,{icon:(0,t.jsx)(eZ.Spinner,{size:"12px"}),size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Generating SSL Certificate"})});case"certs-load-failed":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Load Cert"})});case"certs-issue-errored":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Generate Cert"})});case"certs-renewal-errored":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Renew Cert"})});case"configured-correctly":return(0,t.jsx)("span",{className:"text-gray-900",children:"Valid Configuration"});case"dnssec-needs-to-be-disabled":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"DNSSEC Needs to be Disabled"})});case"certs-expired":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"SSL Cert Expired"})});case"invalid-configuration":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Invalid Configuration"})});case"verification-needed":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Verification Needed"})});case"ip-downgrade":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"DNS Change Required"})});case"ip-upgrade":return(0,t.jsx)(a.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"DNS Change Recommended"})});case"pending-nameserver-propagation":return(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Pending Nameserver Propagation"})});case"domain-connect-success":return(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Waiting for DNS Propagation"})});case"disabling-proxy":return(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Disabling Proxy"})});case"unverified-email":return(0,t.jsx)(a.Badge,{size:"sm",variant:"warning"===n.level?"amber-subtle":"red-subtle",children:(0,t.jsx)("span",{children:"Unverified email"})});case"loading":return(0,t.jsx)(l.Skeleton,{height:"20px",width:"116px"});default:return null}}var e4=e.i(3930829),e3=e.i(6199768),e8=e.i(6357175),e6=e.i(7722264),e5=e.i(4837983),e9=e.i(3228096),e7=e.i(3869281),te=e.i(455575),tt=e.i(2886520),ta=e.i(1848296),tr=e.i(1146455);function tn(e){let{selfRedirect:a,setRedirect:r,savingRedirect:i,redirect:s,project:o,domain:l,disabled:d,className:c}=e,u=(0,w.useParams)(),m=u?.project,[h,f]=(0,e8.useDebounceState)("",100),{data:g=[]}=function(e){let{limit:t=10,gitBranch:a,production:r,target:n,redirect:i,redirects:s,verified:o,order:l,search:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,G.useTeamSlug)();return(0,J.useIsomorphicSWR)(e?`${(0,Q.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e}/domains${(0,K.encode)({limit:t,gitBranch:a,production:r,target:n,redirects:s,redirect:i,verified:o,order:l,search:d,teamId:c})}`:null,async e=>(await (0,ez.fetchAPI)(e,{throwOnHTTPError:!0})).domains)}(o?.id??m,{limit:100,search:h.length>0?h:void 0,redirects:"false"});return(0,t.jsx)("div",{className:(0,y.default)("flex flex-col @md-page:flex-row @lg-page:flex-row items-stretch justify-start flex-initial",c),children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:a?(0,t.jsx)("div",{className:"w-full",style:{flex:1},children:(0,t.jsx)(n.Tooltip,{style:{minWidth:"100%"},text:"You have redirected another domain to this domain. In turn, you cannot redirect this one.",children:(0,t.jsxs)(V.Combobox,{className:"w-full",children:[(0,t.jsx)(V.Combobox.Input,{"data-testid":(0,E.tid)("redirect-to-field","tooltip","domain-redirect"),defaultValue:"no-redirect-possible",disabled:d,style:{minWidth:"100%"},trimValue:!0}),(0,t.jsx)(V.Combobox.List,{hideOnEmpty:!0,children:(0,t.jsx)(V.Combobox.Option,{value:"no-redirect-possible",children:"No Redirect Possible"})})]})})}):(0,t.jsxs)(V.Combobox,{clearable:!0,disabled:i||d,onChange:e=>{r(e||null)},placeholder:"No Redirect",showMenuButton:g.length>0,value:s??"",children:[(0,t.jsx)(V.Combobox.Input,{"data-testid":(0,E.tid)("redirect-to-field","tooltip","domain-redirect"),onChange:e=>{f(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),r(e.currentTarget.value||null))},trimValue:!0}),(0,t.jsx)(V.Combobox.List,{hideOnEmpty:!0,children:(0,t.jsx)(t.Fragment,{children:g.map(e=>{let{name:a}=e;return(0,t.jsx)(j.default.Fragment,{children:a===l||a.startsWith("*")?null:(0,t.jsx)(V.Combobox.Option,{value:a,children:a})},a)})})})]})})})}var ti=e.i(5323212);function ts(e){let{saving:a,setRedirectStatusCode:r,redirectStatusCode:n,disabled:i}=e;return(0,t.jsxs)(ti.Select,{"data-testid":(0,E.tid)("project","domain-status-code"),disabled:a||i,onChange:e=>r(Number(e.target.value)),value:n||307,width:"100%",children:[(0,t.jsxs)("optgroup",{label:"Temporary",children:[(0,t.jsx)("option",{value:"307",children:"307 Temporary Redirect"}),(0,t.jsx)("option",{value:"302",children:"302 Found"})]}),(0,t.jsxs)("optgroup",{label:"Permanent",children:[(0,t.jsx)("option",{value:"308",children:"308 Permanent Redirect"}),(0,t.jsx)("option",{value:"301",children:"301 Moved Permanently"})]})]})}function to(e){let{domain:a,projectDomainTarget:r,saving:n}=e,[i,s]=(0,j.useState)(r?.redirect?"redirect":"connect-to-environment"),[o,l]=(0,j.useState)(r?.gitBranch?C.EnvTarget.Preview:r?.customEnvironmentId??C.EnvTarget.Production),[c,u]=(0,j.useState)(r?.gitBranch??null),[m,h]=(0,j.useState)(r?.redirect??""),[f,g]=(0,j.useState)(r?.redirectStatusCode??307),p=(0,j.useCallback)(()=>{switch(i){case"connect-to-environment":if(o===C.EnvTarget.Preview&&!c)return(0,Z.err)("You must select a git branch for preview environments");return(0,Z.ok)({customEnvironmentId:o!==C.EnvTarget.Production&&o!==C.EnvTarget.Preview?o:void 0,gitBranch:o===C.EnvTarget.Preview?c:void 0});case"redirect":if(null===m||"No Redirect"===m)return(0,Z.err)("You must select a redirect URL");return(0,Z.ok)({redirect:m,redirectStatusCode:f})}},[o,c,i,f,m]),x=(0,t.jsx)("div",{className:"flex w-full flex-col",children:(0,t.jsxs)(ta.RadioGroup,{onChange:e=>{("connect-to-environment"===e||"redirect"===e)&&s(e)},disabled:n,value:i,children:[(0,t.jsxs)("div",{className:"flex w-full flex-col items-start justify-start gap-2 rounded-t-md border border-solid border-gray-400 p-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)(ta.RadioGroup.Item,{className:(0,d.cn)("text-sm  leading-5","connect-to-environment"===i?"text-gray-1000":"text-gray-900"),value:"connect-to-environment",children:"Connect to an environment"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 pl-6 @md-page:flex-row",children:[(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:(0,t.jsx)(tr.EnvironmentsSelect,{activeEnvironmentId:o,hideDevelopment:!0,disabled:"connect-to-environment"!==i||n,onChange:e=>{l(e||null)}})}),(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:o===C.EnvTarget.Preview&&(0,t.jsx)(q,{disabled:"connect-to-environment"!==i||n,environmentId:o,onChange:e=>{u(e??null)},onFocus:void 0,value:c||""})})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-col items-start justify-start gap-2 rounded-b-md border border-t-0 border-solid border-gray-400 p-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)(ta.RadioGroup.Item,{className:(0,d.cn)("text-sm  leading-5","redirect"===i?"text-gray-1000":"text-gray-900"),value:"redirect",children:"Redirect to Another Domain"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 pl-6 @md-page:flex-row",children:[(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:(0,t.jsx)(ts,{disabled:"redirect"!==i,redirectStatusCode:f,saving:n,setRedirectStatusCode:e=>{let t=Number(e.toString());(301===t||302===t||307===t||308===t)&&g(t)}})}),(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:(0,t.jsx)(tn,{className:"w-full",disabled:"redirect"!==i,domain:a||"",redirect:m,savingRedirect:n,selfRedirect:!1,setRedirect:e=>{h(e)}})})]})]})]})}),v=(0,t.jsx)("div",{className:"flex w-full flex-col",children:(0,t.jsxs)(ta.RadioGroup,{onChange:e=>{("connect-to-environment"===e||"redirect"===e)&&s(e)},disabled:n,value:i,children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-2 rounded-b-md p-2",children:[(0,t.jsx)("div",{className:"flex min-w-[220px] flex-row items-center gap-2",children:(0,t.jsx)(ta.RadioGroup.Item,{className:(0,d.cn)("text-sm  leading-5","connect-to-environment"===i?"text-gray-1000":"text-gray-900"),value:"connect-to-environment",children:"Connect to an environment"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 @md-page:flex-row",children:[(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:(0,t.jsx)(tr.EnvironmentsSelect,{activeEnvironmentId:o,hideDevelopment:!0,disabled:"connect-to-environment"!==i||n,onChange:e=>{l(e||null)}})}),(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:o===C.EnvTarget.Preview&&(0,t.jsx)(q,{disabled:"connect-to-environment"!==i||n,environmentId:o,onChange:e=>{u(e??null)},onFocus:void 0,value:c||""})})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-2 rounded-b-md p-2",children:[(0,t.jsx)("div",{className:"flex min-w-[220px] flex-row items-center gap-2",children:(0,t.jsx)(ta.RadioGroup.Item,{className:(0,d.cn)("text-sm  leading-5","redirect"===i?"text-gray-1000":"text-gray-900"),value:"redirect",children:"Redirect to Another Domain"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 @md-page:flex-row",children:[(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:(0,t.jsx)(ts,{disabled:"redirect"!==i,redirectStatusCode:f,saving:n,setRedirectStatusCode:e=>{let t=Number(e.toString());(301===t||302===t||307===t||308===t)&&g(t)}})}),(0,t.jsx)("div",{className:"w-full @md-page:w-1/2",children:(0,t.jsx)(tn,{className:"w-full",disabled:"redirect"!==i,domain:a||"",redirect:m,savingRedirect:n,selfRedirect:!1,setRedirect:e=>{h(e)}})})]})]})]})});return{ui:"inline"===e.style?v:x,getProjectDomainTarget:p}}function tl(e){return(0,e6.isError)(e)?e.message:"string"==typeof e?e:"An error occurred"}function td(e){return"object"==typeof e&&null!==e}function tc(e){if(!td(e))return!1;let t="projectName"in e&&"string"==typeof e.projectName||"projectId"in e&&"string"==typeof e.projectId,a="code"in e&&"string"==typeof e.code,r=e.code,n=a&&["domain_already_in_use","duplicate-team-registration","duplicate-user-registration"].includes(r);return t&&a&&n}let tu=async e=>{let{project:t,isReady:a,team:r,projectDomain:n,redirect:i,redirectStatusCode:s,gitBranch:o,customEnvironmentId:l}=e;if(!t||!a)return;let d={redirect:i||null,redirectStatusCode:s||null,gitBranch:i?null:o};void 0!==l&&(d.customEnvironmentId=l,d.redirect=null,d.redirectStatusCode=null,"preview"!==l&&(d.gitBranch=null)),await (0,ez.fetchAPI)(`${(0,Q.API_PROJECTS_DOMAINS_VERSION)("v9")}/${t.id}/domains/${n.name}${r?`?teamId=${r.id}`:""}`,{throwOnHTTPError:!0,method:"PATCH",body:JSON.stringify(d)})},tm=["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"],th=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"];class tf{list=[];exclude=[];placeHolder="*";regex=/[^a-zA-Z0-9|$|@]|\^/g;replaceRegex=/\w/g;splitRegex=/\b|_/g;constructor(e={}){Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(tm,[th,e.list||[]]),exclude:e.exclude||[],splitRegex:e.splitRegex||/\b|_/g,placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|$|@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}isProfane(e){return this.list.filter(t=>{let a=RegExp(`\\b${t.replace(/(\W)/g,"\\$1")}\\b`,"gi");return!this.exclude.includes(t.toLowerCase())&&a.test(e)}).length>0}replaceWord(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(e){let t=this.splitRegex.exec(e);return e&&t?e.split(this.splitRegex).map(e=>this.isProfane(e)?this.replaceWord(e):e).join(t[0]):e}addWords(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.list.push(...t),t.map(e=>e.toLowerCase()).forEach(e=>{this.exclude.includes(e)&&this.exclude.splice(this.exclude.indexOf(e),1)})}removeWords(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.exclude.push(...t.map(e=>e.toLowerCase()))}}var tg=e.i(6352514),tp=e.i(4759942);function tx(e){let{domain:a,setDomain:r,redirectApexToWWW:i,setRedirectApexToWWW:s}=e,[o,l]=(0,e8.useDebounceState)(i,250),c=a.endsWith(".ve")?o:eO(a);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{children:(0,t.jsx)(tt.AutocompleteDomainInput,{autoFocus:!0,onChange:e=>{r(e?e.toLowerCase():""),l(!!e&&eO(e))},onSubmit:()=>{e.onSubmit()},value:a,disabled:e.disabled})}),(0,t.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,t.jsx)("div",{className:(0,d.cn)("flex flex-col gap-2",c?"visible":"invisible h-[21px]"),children:(0,t.jsx)("div",{className:"flex select-none flex-row gap-2 ",children:(0,t.jsx)(e7.Checkbox,{checked:i,onChange:e=>{s(e.target.checked)},height:8,width:8,children:(0,t.jsxs)("span",{className:"select-none break-all text-sm text-gray-900",children:["Redirect ",(0,eR.get)(a)," to www.",(0,eR.get)(a)," ",(0,t.jsx)(n.Tooltip,{text:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:["Using a www subdomain allows for faster DNS resolution, improved website performance and more flexible routing.",(0,t.jsxs)(p.Link,{className:"ml-2 flex flex-row items-center text-xs text-blue-900",target:"_blank",rel:"noopener noreferrer",href:"https://vercel.com/docs/domains/working-with-domains#apex-domain",children:[(0,t.jsx)("span",{className:"text-blue-900",children:"Learn more"}),(0,t.jsx)(eW.External,{size:12,className:"ml-1"})]})]}),children:"(Recommended)"})]})})})})})]})}function tj(e){let{onClose:a,project:r,teamSlug:i,onSave:s,initialAddDomainInput:l}=e,[d,c]=(0,j.useState)(l??""),[u,m]=(0,j.useState)(!0),h=!!eO(d)&&u,[f,g]=(0,j.useState)(null),[p,x]=(0,j.useTransition)(),{getProjectDomainTarget:v,ui:b}=to({saving:p,domain:d}),k=(0,te.useToasts)(),{data:y}=(0,H.useProject)(r),w=v(),N=null;0===d.length?N="Please enter a domain":w.isErr()&&(N=w.error);let S=async()=>{if((0,eB.preload)(`/api/front-domains/domain-connect/status?domain=${d}`,e=>(0,ez.fetchAPI)(e,{throwOnHTTPError:!0})).catch(()=>null),w.isErr())return g(w.error),!1;if(d.endsWith(".vercel.app")){let e=new tf;for(let t of d.split(".").flatMap(e=>e.split("-")))if(e.isProfane(t))return tp.analytics.track(tg.AnalyticsEvent.DOMAIN_ADD_PROFANITY_REJECTED,{domain:d,profanity:t}),g("The domain you entered contains inappropriate language. Please choose a different domain."),!1}if((0,F.default)(d)&&(0,et.isPublicAlias)(d))return g("Wildcard subdomains are not supported for .vercel.app domains."),!1;try{let e;if((0,F.default)(d))e=d;else{let t=(0,eR.parse)(d);e="error"in t?null:t.domain}if(!e)return g("The domain you are trying to add is invalid, please enter a valid domain name and try again"),!1;let t=null;if(h){let a=`www.${e}`;try{t=(await (0,_.addProjectDomain)({domain:a,project:{id:r},team:{id:i},customEnvironmentId:w.value.customEnvironmentId,gitBranch:w.value.gitBranch,redirect:w.value.redirect,redirectStatusCode:w.value.redirectStatusCode})).name}catch(e){if(tc(e)&&(e.projectId===y?.id||e.projectName===y?.name))t=a;else throw e}try{await (0,_.addProjectDomain)({domain:e,project:{id:r},team:{id:i},redirect:w.value.redirect??t})}catch(a){if(tc(a)&&(a.projectId===y?.id||a.projectName===y?.name)){let n=a.domain;if(!n||!t)return g(`The domain "${e}" already exists on this project but could not be updated with redirect configuration. Please update it manually from the domains list.`),!1;try{return await tu({project:{id:r},isReady:!0,team:{id:i},projectDomain:n,redirect:t,redirectStatusCode:308}),k.success("Domain configuration updated"),!0}catch(e){return g(tl(e)),!1}}throw a}}else await (0,_.addProjectDomain)({domain:d,project:{id:r},team:{id:i},customEnvironmentId:w.value.customEnvironmentId,gitBranch:w.value.gitBranch,redirect:w.value.redirect,redirectStatusCode:w.value.redirectStatusCode});if(k.success("Domain added to project"),(0,F.default)(d)){let e=`?teamId=${encodeURIComponent(i)}`;try{await (0,ez.fetchAPI)(`${Q.API_DOMAINS}/${encodeURIComponent(d)}${e}`,{method:"PATCH",body:JSON.stringify({zone:!0}),throwOnHTTPError:!0})}catch(t){let e=(0,e6.isError)(t)?t.message:"Failed to update zone";return g(e),!1}}return!0}catch(t){if(tc(t)){if(t.projectId===y?.id||t.projectName===y?.name){let e=t.domain?.name||d;return g(`You are already using the domain "${e}" on this project.`),!1}return e.onDomainTransferRequest({domain:d,projectIdOrNameInUse:t.projectId||t.projectName||"",gitBranch:w.value.gitBranch,customEnvironmentId:w.value.customEnvironmentId??void 0,redirect:w.value.redirect,redirectStatusCode:w.value.redirectStatusCode}),!1}if(function(e){if(!td(e))return!1;let t=e.code;return"code"in e&&"string"==typeof e.code&&"owned-on-other-team"===t}(t))return g("Another team is already using this domain."),!1;return g(tl(t)),!1}};return(0,t.jsxs)(D.Modal,{active:!0,onClickOutside:a,children:[(0,t.jsxs)(D.Modal.Body,{children:[(0,t.jsx)(D.Modal.Title,{children:"Add Domain"}),(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)("div",{className:"pt-6",children:"Add a domain to connect it to a project. After being connected, the domain will be aliased to the most recent deployment in that environment."}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 pb-2",children:[(0,t.jsx)(tx,{disabled:p,domain:d,setDomain:c,onSubmit:()=>{x(async()=>{await S()&&(await s?.(),a())})},redirectApexToWWW:h,setRedirectApexToWWW:m}),b]}),f?(0,t.jsx)(o.Note,{type:"error",fill:!0,children:f}):null]})]}),(0,t.jsxs)(D.Modal.Actions,{children:[(0,t.jsx)(D.Modal.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,t.jsx)(n.Tooltip,{text:N,disableTriggers:!N,children:(0,t.jsx)(D.Modal.Action,{loading:p,disabled:!!N,onClick:()=>{x(async()=>{await S()&&(await s?.(),a())})},children:"Save"})})]})]})}var tv=e.i(7047540),tb=e.i(4585051),tk=e.i(2455417),ty=e.i(6870754),tw=e.i(950120),tN=e.i(1138941),tS=e.i(7898658);async function tC(e){let{project:t,isReady:a,team:r,name:n,newProjectId:i,gitBranch:s,customEnvironmentId:o,redirect:l,redirectStatusCode:d}=e;a&&await (0,ez.fetchAPI)(`${(0,Q.API_PROJECTS_DOMAINS_VERSION)("v9")}/${t.id}/domains/${n}/move${r?`?teamId=${r.id}`:""}`,{throwOnHTTPError:!0,method:"POST",body:JSON.stringify({projectId:i,gitBranch:s,customEnvironmentId:o,redirect:l,redirectStatusCode:d})})}var tI=e.i(5519011);function tz(e){let{project:a,hideSkeleton:r=!1,size:n=32,style:i}=e,s=(0,tN.getProductionDeployment)(a),{data:o}=(0,tS.default)({project:a}),d=(0,tN.useFramework)(a);return(d||s&&o)&&r?(0,t.jsx)(tb.Avatar,{className:(0,y.clsx)({[tI.default.favicon]:!o?.isSquare,"bg-white/75 rounded-full shadow-border shadow-background-100 dark:bg-foreground dark:shadow-foreground":!!(!o&&d)}),size:n,src:o?.src||d?.logo,style:i,title:a?a.name:void 0}):(0,t.jsx)(l.Skeleton,{height:n,rounded:!0,style:{flexShrink:0},width:n})}function tP(e){let{active:a,domain:r,projectIdOrNameInUse:n,onCancel:i,onComplete:s,gitBranch:d,customEnvironmentId:c,redirect:u,redirectStatusCode:m}=e,[h,f]=(0,j.useState)(!1),g=(0,tN.useProjectIdOrName)(),{data:x}=(0,H.useProject)(g),{team:v,isReady:b}=(0,eJ.useTeam)(),{data:k}=(0,H.useProject)(r&&n?n:null),{data:y}=(0,R.useProjectDomain)(k?{projectId:k.id,name:r}:null),w=y?y.redirect??y.name:null,N=a&&!!w&&!!x&&!!k,[S,{domains:C,isLoadingMore:I,loadMore:z,isReachingEnd:E,initialDataLoaded:T}]=(0,R.useProjectDomainsInfinite)(y&&k?k.id:null,w?{redirect:w,limit:20}:{}),_=(0,P.useRouter)(),O=`/${_.query.teamSlug}/${k?.name}/settings/domains`,F=`/${_.query.teamSlug}/${x?.name}/settings/domains`,M=(0,j.useCallback)(()=>{i(),f(!1)},[i]),B=async()=>{x&&r&&n&&y&&k&&w&&(f(!0),await tC({project:k,isReady:b,name:w,team:v,newProjectId:x.id,gitBranch:d,customEnvironmentId:c,redirect:u,redirectStatusCode:m}),s(),f(!1))};return(0,t.jsxs)(D.Modal.Modal,{active:N,onClickOutside:M,children:[(0,t.jsx)(D.Modal.Body,{children:(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 flex flex-col items-stretch justify-start gap-8 flex-initial",children:[(0,t.jsxs)("header",{className:"jsx-aedf4df6a7382869",children:[(0,t.jsx)(D.Modal.Title,{children:"Move Domain"}),(0,t.jsxs)("p",{className:"jsx-aedf4df6a7382869 text-copy-14",children:["This domain is already associated with another project."," ",w&&w===r?(0,t.jsx)(t.Fragment,{children:"Please confirm you'd like to move the following domain and its redirects:"}):(0,t.jsx)(t.Fragment,{children:"Please confirm you'd like to transfer the following domain and the domain it redirects to:"})]})]}),(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 flex flex-col items-stretch justify-start gap-8 flex-initial",children:[w?(0,t.jsx)(o.Note,{className:tI.default.noteCenterText,fill:!0,label:!1,size:"small",type:"lite",variant:"contrast",children:(0,t.jsx)("p",{className:"jsx-aedf4df6a7382869 text-copy-14 text-center",children:(0,t.jsx)(p.Link,{external:!0,href:`https://${w}`,tab:!0,type:"highlight",children:w})})}):(0,t.jsx)(l.Skeleton,{height:32,width:"100%"}),(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 flex flex-row items-stretch justify-evenly flex-initial",children:[(0,t.jsxs)("div",{style:{flex:"0 0 36%"},className:"jsx-aedf4df6a7382869 flex flex-col items-center justify-start gap-2",children:[(0,t.jsx)(p.Link,{href:O,target:"_blank",children:(0,t.jsx)(tz,{hideSkeleton:!!(x&&k),project:k})}),(0,t.jsx)("p",{style:{maxWidth:"100px"},className:"jsx-aedf4df6a7382869 text-[14px] leading-[20px] font-medium text-center line-clamp-3 geist-hide-on-mobile",children:k&&x?(0,t.jsx)(p.Link,{href:O,target:"_blank",title:k.name,variant:"primary",children:k.name}):(0,t.jsx)(l.Skeleton,{height:20,width:100})})]}),(0,t.jsxs)("div",{style:{flex:"0 0 36%"},className:"jsx-aedf4df6a7382869 flex flex-col items-center justify-start gap-2",children:[(0,t.jsx)(p.Link,{href:F,target:"_blank",children:(0,t.jsx)(tz,{hideSkeleton:!!(x&&k),project:x})}),(0,t.jsx)("p",{style:{maxWidth:"100px"},className:"jsx-aedf4df6a7382869 text-[14px] leading-[20px] font-medium text-center line-clamp-3 geist-hide-on-mobile",children:k&&x?(0,t.jsx)(p.Link,{href:F,target:"_blank",title:x.name,variant:"primary",children:x.name}):(0,t.jsx)(l.Skeleton,{height:20,width:100})})]})]})]}),(0,t.jsxs)(D.Modal.Outset,{children:[(0,t.jsx)(tD,{count:C.length+1,loading:!T,title:(0,t.jsxs)("span",{className:"jsx-aedf4df6a7382869",children:[C.length+1," ",0===C.length?"domain":"domains"," will be moved."]}),children:(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869",children:[(0,t.jsx)(tA,{children:(0,t.jsx)(p.Link,{external:!0,href:`https://${w}`,style:{flexGrow:"1"},tab:!0,children:w})},w),C.map(e=>(0,t.jsx)(tA,{children:(0,t.jsx)(p.Link,{external:!0,href:`https://${e.name}`,style:{flexGrow:"1"},tab:!0,children:e.name})},e.name)),!E&&(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 "+(tI.default.inset||""),children:[(0,t.jsx)(ty.LoadMoreButton,{loading:I,onClick:z}),(0,t.jsx)(A.Spacer,{})]})]})}),(0,t.jsx)(A.Spacer,{y:-1})]})]})}),(0,t.jsxs)(D.Modal.Actions,{children:[(0,t.jsx)(D.Modal.Action,{onClick:M,type:"secondary",children:"Cancel"}),(0,t.jsx)(D.Modal.Action,{loading:h,onClick:B,children:h?(0,t.jsx)(tk.LoadingDots,{children:"Moving"}):`Move ${C.length+1}${E?"":"+"} ${C.length+1>1?"domains":"domain"}`})]}),(0,t.jsx)(tv.default,{id:"aedf4df6a7382869",children:"header.jsx-aedf4df6a7382869{max-width:440px;margin:0 auto}header.jsx-aedf4df6a7382869>h2{text-align:center;margin:0}header.jsx-aedf4df6a7382869>p{color:var(--accents-5);margin:10px auto 0}.added.jsx-aedf4df6a7382869{color:#999;flex:none}"})]})}function tD(e){let{title:a,children:r,loading:n,count:i,open:s}=e;return n?(0,t.jsx)("div",{className:tI.default.loadingItem,children:(0,t.jsx)(eZ.Spinner,{size:14})}):0===i?(0,t.jsx)(tw.Details,{title:a}):(0,t.jsx)(tw.Details,{open:s,title:a,children:(0,t.jsx)("div",{className:tI.default.content,children:r})})}function tA(e){let{children:a}=e;return(0,t.jsx)(tw.Item,{className:tI.default.subitem,children:a})}var tE=e.i(2848845),tR=e.i(4138437);function tT(e){let{newDomain:a,oldDomain:r,onCancel:n,onSave:i,teamSlug:s,project:l}=e,[c,u]=(0,j.useTransition)(),[m,h]=(0,j.useState)("redirect-old-to-new"),[f,g]=(0,j.useState)(null),p=(0,j.useCallback)(()=>{n()},[n]),x=(0,j.useCallback)(async()=>{try{await (0,_.addProjectDomain)({domain:a.domainName,project:{id:l},team:{id:s},customEnvironmentId:a.customEnvironmentId,gitBranch:a.gitBranch,redirect:a.redirect,redirectStatusCode:a.redirectStatusCode})}catch(e){g((0,e6.isError)(e)?e.message:"An unknown error occurred");return}try{switch(m){case"redirect-old-to-new":await tu({isReady:!0,project:{id:l},team:{id:s},projectDomain:r,redirect:a.domainName,redirectStatusCode:307});break;case"delete-old":await (0,_.removeProjectDomain)(l,s,r.name,!1)}}catch(e){await (0,_.removeProjectDomain)(l,s,a.domainName,!1).catch(()=>null),g((0,e6.isError)(e)?e.message:"An unknown error occurred");return}i(a)},[m,a,l,s,r,i]);return(0,t.jsxs)(D.Modal,{active:!0,onClickOutside:p,children:[(0,t.jsxs)(D.Modal.Body,{children:[(0,t.jsx)(D.Modal.Title,{children:"Edit domain"}),(0,t.jsx)(A.Spacer,{}),(0,t.jsx)("div",{className:"flex flex-col gap-2 pb-2",children:(0,t.jsxs)("span",{children:["You've edited the domain name from ",(0,t.jsx)("b",{children:r.name})," to"," ",(0,t.jsx)("b",{children:a.domainName}),"."]})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(ta.RadioGroup,{onChange:e=>h(e),value:m,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(tR.Card,{className:(0,d.cn)("border border-solid border-gray-400 p-0 pl-4","redirect-old-to-new"===m&&"border-blue-700"),gap:2,padding:4,secondary:"redirect-old-to-new"===m,children:(0,t.jsx)(ta.RadioGroup.Item,{fullWidth:!0,value:"redirect-old-to-new",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-between flex-initial p-4 pl-2",children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Redirect old domain to new"}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Automatically send visitors from ",r.name," to"," ",a.domainName]})]})})}),(0,t.jsx)(tR.Card,{className:(0,d.cn)("border border-solid p-0 pl-4","delete-old"===m?"border-blue-700":"border-gray-400"),gap:2,padding:4,secondary:"delete-old"===m,children:(0,t.jsx)(ta.RadioGroup.Item,{className:"items-center",fullWidth:!0,value:"delete-old",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-between flex-initial p-4 pl-2",children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Remove old domain"}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Permanently delete ",r.name," and replace it with"," ",a.domainName]})]})})})]})}),f?(0,t.jsx)(o.Note,{type:"error",fill:!0,children:f}):null]})]}),(0,t.jsxs)(D.Modal.Actions,{children:[(0,t.jsx)(D.Modal.Action,{onClick:p,type:"secondary",disabled:c,children:"Cancel"}),(0,t.jsx)(D.Modal.Action,{onClick:()=>{u(x)},loading:c,children:"Save"})]})]})}var t_=e.i(2560270),tO=e.i(4005781);function tF(e){var a,r,n;let i=(0,w.useRouter)(),{domainConnectDomain:s,error:o,errorDescription:l}=(0,e$.useDomainConnectSearchParams)(),{team:d}=(0,eJ.useTeam)(),{trigger:c,isMutating:u}=(a=e.projectId,r=d?.id??"",n=s??"",(0,tO.default)(`/remove-project-domain-${a}-${r}-${n}`,async()=>{await (0,_.removeProjectDomain)(a,r,n)}));if(!s||!d)return null;let m=o||!!l,h=async()=>{await c().catch(()=>{}),e.onCancel(),i.replace(window.location.pathname)},f=l?"user_cancel"===l?"Your domain was not configured because the process was canceled.":"An identical record already exists"===l?"One or more records were not created because an identical record already existed":l.endsWith("perhaps your object identifier is invalid?")?"Your DNS provider had an error while creating the record.":null:null;return(0,t.jsxs)(D.Modal.Modal,{active:m,"data-testid":(0,E.tid)("project","settings","domain-connect-error-modal"),onClickOutside:()=>{i.replace(window.location.pathname)},children:[(0,t.jsxs)(D.Modal.Body,{children:[(0,t.jsx)(D.Modal.Header,{children:(0,t.jsx)(D.Modal.Title,{children:"Configuration Failed"})}),"We failed to automatically configure"," ",(0,t.jsx)("strong",{children:s}),". Please follow the steps to manually configure your domain with your provider.",f?(0,t.jsxs)("div",{className:"pt-4 text-sm text-red-800",children:["Error: ",f]}):null]}),(0,t.jsxs)(D.Modal.Actions,{className:"justify-between",children:[(0,t.jsx)(D.Modal.Action,{loading:u,onClick:h,type:"secondary",children:"Cancel"}),(0,t.jsx)(D.Modal.Action,{onClick:()=>{i.replace(window.location.pathname)},children:"Continue with Manual Configuration"})]})]})}var tM=e.i(992159);function tB(){let[e,t]=(0,I.useQueryState)("show-add-domain-modal",{...z.parseAsBoolean,shallow:!0});return{showAddDomainModal:e??!1,setShowAddDomainModal:t}}function t$(e){let{setShowAddDomainModal:a}=tB(),{can:i,isLoading:s}=(0,N.default)({projectIdOrName:e.projectId}),o=i(S.Action.Update,S.Resource.Project),l=!s&&!o;return(0,t.jsx)(n.Tooltip,{disableTriggers:!l,text:"You don't have permission to add domains to this project. Ask your team admin to add a domain or grant you the member role or higher.",children:(0,t.jsx)(r.Button,{disabled:l,onClick:()=>void a(!0),children:"Add Domain"})})}function tL(){let[e,t]=(0,I.useQueryState)("search",{...z.parseAsString,shallow:!0}),{domainConnectDomain:a,error:r}=(0,e$.useDomainConnectSearchParams)();return{search:e??(r?void 0:a)??void 0,setSearch:e=>t(e??null)}}function tW(){let[e,t]=(0,I.useQueryState)("redirect",{...z.parseAsString,shallow:!0});return{redirectFilter:e,setRedirectFilter:e=>t(e)}}function tV(){let[e,t]=(0,I.useQueryState)("gitBranch",{...z.parseAsString,shallow:!0});return{gitBranchFilter:e,setGitBranchFilter:e=>t(e)}}function tG(){let[e,t]=(0,I.useQueryState)("environment",{...z.parseAsString,shallow:!0});return{environmentFilter:e,setEnvironmentFilter:e=>t(e)}}function tH(e){let a=(0,w.useParams)(),r=a?.project,{data:n}=(0,O.useCustomEnvironments)(r),i=(n?.customEnvironments||[]).filter(e=>"preview"!==e.slug),s=[{id:C.EnvTarget.Production,name:"Production"},...i.map(e=>({id:e.id,name:e.slug}))];return(0,t.jsxs)(V.Combobox,{clearable:!0,disabled:e.disabled,noRawSelectedValue:!0,onChange:t=>e.onChange(t??null),placeholder:"All Environments",value:e.value??"",children:[(0,t.jsx)(V.Combobox.Input,{"aria-label":"Environment",onChange:t=>e.onChange(t.target.value||null)}),(0,t.jsx)(V.Combobox.List,{emptyMessage:"No Environments",children:s.map(e=>(0,t.jsx)(V.Combobox.Option,{value:e.id,children:e.name},e.id))})]})}function tU(e){let{search:t}=tL(),{redirectFilter:a}=tW(),{gitBranchFilter:r}=tV(),{environmentFilter:n}=tG(),[{mutate:i},{domains:s,loadMore:o,isLoadingMore:l,isReachingEnd:d,isLoading:c}]=function(e){let{limit:t=20,gitBranch:a,production:r,redirect:n,redirects:i,search:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,l=(0,G.useTeamSlug)(),d=(0,e4.useIsomorphicSWRInfinite)((o,d)=>{let c=`${(0,Q.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e}/domains`,u={limit:t+1,gitBranch:a,production:r,redirect:n,redirects:i,teamId:l,search:s};if(!o)return`${c}${(0,K.encode)(u)}`;let m=(d?.domains.length||0)>t?d?.domains[t-1].createdAt:null;return m?`${c}${(0,K.encode)({...u,until:m})}`:""},async e=>""===e?{domains:[],pagination:{count:0,next:null,prev:null}}:(0,ez.fetchAPI)(e,{throwOnHTTPError:!0}),o),c=d.data?.flatMap(e=>e.domains.slice(0,t))??[],u=d.size>(d.data?.length??0),m=d.data?.[d.data.length-1];return[d,{domains:c,loadMore:()=>d.setSize(e=>e+1),isLoadingMore:u,isReachingEnd:m?m.domains.length<=t:void 0,isLoading:d.isLoading}]}(e,{limit:tX,search:t,redirect:a??void 0,gitBranch:r??void 0,production:n===C.EnvTarget.Production||n!==C.EnvTarget.Preview&&void 0});return{domains:n&&n!==C.EnvTarget.Production&&n!==C.EnvTarget.Preview?s.filter(e=>e.customEnvironmentId===n):s,revalidateDomains:i,loadMore:o,isLoadingMore:l,isReachingEnd:d,isLoading:c}}function tq(e){let{domain:r,project:n}=e,{data:i}=(0,O.useCustomEnvironments)(n,{revalidateIfStale:!1});if(r.redirect)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.CornerDownRight,{size:16}),(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:r.redirectStatusCode??307}),(0,t.jsx)("span",{className:"truncate",children:r.redirect})]});if(r.customEnvironmentId){let e=i?.customEnvironments.find(e=>e.id===r.customEnvironmentId);return(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(B.EnvironmentIcon,{id:r.customEnvironmentId}),e?.slug]})}return r.gitBranch?(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(v.GitBranch,{}),(0,t.jsx)("span",{className:"truncate",children:r.gitBranch})]}):(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(B.EnvironmentIcon,{id:C.EnvTarget.Production}),"Production"]})}function tY(e){let{domain:a,project:i,editingDomain:s,setEditingDomain:o,onOpenAccordion:l}=e,{can:d}=(0,N.default)({projectIdOrName:i}),c=eQ(a);if(s)return null;let u=!d(S.Action.Update,S.Resource.Project);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Button,{loading:"loading"===c.status||c.isRefreshing,type:"secondary",size:"small",className:"hidden @lg-page:flex",onClick:()=>{"loading"!==c.status&&c.refresh()},children:"Refresh"}),(0,t.jsx)(n.Tooltip,{disableTriggers:!u,text:"You don't have permission to edit domains from this project. Ask your team admin to edit a domain or grant you the member role or higher.",children:(0,t.jsx)(r.Button,{disabled:u,onClick:()=>{o(!0),l(a.name)},size:"small",type:"secondary",children:"Edit"})})]})}function tJ(e){let{domain:a,search:r,textOnly:n}=e,{status:i}=eQ(a),[s,o]=(0,j.useState)(!1),l=e=>{if(!r)return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline max-w-full",children:e});let a=function(e,t){let a=e.toLowerCase(),r=t.toLowerCase();if(!a)return null;let n=r.indexOf(a);if(-1!==n)return[n,n+a.length];let i=null,s=0,o=0;for(let e=0;e<r.length;e++)for(let t=Math.min(a.length,r.length-e);t>=2;t--){let n=r.substring(e,e+t);if(a.includes(n)||n.includes(a)){let r=1/(e+1)*t*(t/a.length);r>o&&(i=[e,e+t],s=t,o=r)}}if(i&&s>=2)return i;let l=-1,d=0,c=null,u=0;for(let e=0;e<r.length;e++){let t=r[e];a.includes(t)?(-1===l&&(l=e),d++):(d>u&&(c=[l,l+d],u=d),l=-1,d=0)}return(d>u&&(c=[l,l+d]),c&&c[1]-c[0]>=2)?c:null}(r,e);if(!a)return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",children:e});let[n,i]=a,s=e.substring(n,i);return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",children:(0,t.jsx)(e5.HighlightText,{as:"span",search:s,text:e})})};return"loading"===i||n?l(a.name):(0,F.default)(a.name)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Link,{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline max-w-full",onClick:()=>o(!0),children:l(a.name)}),s?(0,t.jsx)(M.default,{active:s,onCancel:()=>o(!1),url:a.name.replace("*.","")}):null]}):(0,t.jsx)(p.Link,{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline max-w-full",href:`https://${a.name}`,rel:"noreferrer noopener",target:"_blank",children:l(a.name)})}function tK(e){let{domain:a,ui:n,onSave:i,onRemove:l,onCancel:d,projectDomainTarget:c,teamSlug:u,project:m}=e,[h,f]=(0,j.useState)(a.name),[g,p]=(0,j.useState)(null),x=null;0===h.length?x="Domain name is required":c.isErr()&&(x=c.error);let[v,b]=(0,j.useState)(null),k=(0,j.useCallback)(async e=>{e.domainName=e.domainName.toLowerCase();try{e.domainName!==a.name?b({newDomain:e,oldDomain:a}):(await tu({project:{id:m},team:{id:u},projectDomain:a,isReady:!0,customEnvironmentId:e.customEnvironmentId,gitBranch:e.gitBranch,redirect:e.redirect,redirectStatusCode:e.redirectStatusCode}),i(e))}catch(e){p((0,e6.isError)(e)?e.message:"We encountered an error while saving this domain. If the problem persists, please contact support.")}},[a,i,m,u]);return(0,t.jsxs)("div",{className:"pb-6 pt-2",children:[v?(0,t.jsx)(tT,{newDomain:v.newDomain,oldDomain:v.oldDomain,onCancel:d,onSave:e=>{i(e)},teamSlug:u,project:m}):null,(0,t.jsx)(s.Input,{"aria-labelledby":"domain-label",value:h,label:"Domain",onChange:e=>{f(e.target.value)}}),(0,t.jsx)("div",{className:"pt-4",children:n}),g?(0,t.jsx)(o.Note,{type:"error",children:g}):null,(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-2 pt-4",children:[(0,t.jsx)(r.Button,{onClick:l,type:"error",children:"Remove"}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(r.Button,{type:"secondary",onClick:d,children:"Cancel"}),(0,t.jsx)(r.Button,{disabled:null!==x,onClick:()=>{c.isErr()||k({domainName:h,redirect:c.value.redirect??null,redirectStatusCode:c.value.redirectStatusCode??null,gitBranch:c.value.gitBranch??null,customEnvironmentId:c.value.customEnvironmentId||void 0})},children:"Save"})]})]})]})}function tQ(e){let{status:a,editingDomain:r,domain:n,project:i,revalidateDomains:s,setEditingDomain:o,getProjectDomainTarget:l,ui:c,teamSlug:u,setRemoveModal:m,onCloseAccordion:h}=e;if(r)return(0,t.jsxs)("div",{className:"p-2 @md-page:px-7",children:[(0,t.jsx)(tK,{domain:n,project:i,onSave:async()=>{await s(),o(!1),h(n.name)},projectDomainTarget:l(),onCancel:()=>{h(n.name),o(!1)},ui:c,teamSlug:u,onRemove:()=>{m(!0)}}),e.teamDomain?.zone&&"loading"!==a.status&&(null===a.level||"warning"===a.level)?(0,t.jsx)("div",{className:"pb-2",children:(0,t.jsx)("p",{className:"text-copy-14",children:(0,t.jsxs)(p.Link,{href:e.teamDomain?.teamId?`/${u}/~/domains/${n.apexName}`:`/dashboard/domains/${n.apexName}`,variant:"highlight",className:"text-xs",children:["View DNS Records & More for ",n.apexName," â†’"]})})}):null]});if("loading"===a.status)return null;if(null===a.level){let e=new Date(Date.now()-864e5),a=new Date(n.createdAt),r=(0,et.isPublicAlias)(n.name);return a>e&&!r?(0,t.jsx)("div",{className:"p-2 px-7",children:(0,t.jsx)(tE.DnsPropagationNote,{children:"It might take some time for the DNS records to propagate globally."})}):null}return(0,t.jsxs)("div",{className:(0,d.cn)("px-7 pb-4 pt-0",a.className),children:[" ",a.ui," "]})}function tZ(e){let{domain:a,project:r,teamSlug:n,search:i,onOpenAccordion:s,onCloseAccordion:o,revalidateDomains:l}=e,[c,u]=(0,j.useState)(!1),[m,h]=(0,j.useState)(!1),[f,g]=(0,j.useState)(void 0),[p,x]=(0,j.useTransition)(),v=(0,W.useIsMobile)(),b=ek(a.name);b.data?.isOk()&&b.data.value.domain.teamId;let{getProjectDomainTarget:w,ui:N}=to({domain:a.name,projectDomainTarget:a,saving:!1,style:v?"cards":"inline"}),S=(0,j.useCallback)(async e=>{let{removeRedirects:t=!1}=e;try{await (0,_.removeProjectDomain)(r,n,a.name,t),await l(),u(!1),h(!1)}catch(e){g((0,e6.isError)(e)?e.message:"We encountered an error while removing this domain. If the problem persists, please contact support.")}},[r,n,a.name,l]),C=eQ(a),I="loading"===C.status||null===C.level||m;return(0,t.jsxs)("div",{className:(0,d.cn)("border-b-400 border-b border-solid",e.className),children:[(0,t.jsxs)(k.Item,{value:a.name,children:[(0,t.jsx)("div",{className:"flex w-full flex-col px-4 ",children:(0,t.jsxs)("div",{className:"flex h-[70px] w-full flex-row items-center justify-between",children:[(0,t.jsxs)(k.Trigger,{className:(0,y.clsx)("flex select-text items-center gap-3 self-stretch overflow-hidden bg-transparent p-0 [font-family:Geist]",{"cursor-pointer":!I,"cursor-default":I}),disabled:I,children:[(0,t.jsx)(e1,{domain:a}),(0,t.jsx)("div",{className:"flex w-[220px] min-w-0 items-center gap-2 @md-page:w-[359px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-start justify-end gap-2 max-w-full",children:[(0,t.jsx)(tJ,{domain:a,search:i,textOnly:!I}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e2,{domain:a}),m||I?null:(0,t.jsxs)("div",{className:"flex items-center gap-0 text-xs text-gray-alpha-1000",children:["Learn more",(0,t.jsx)(t_.ChevronDown,{className:(0,y.clsx)("ease-[ease] transition-transform duration-200","[[data-state=open]_&]:rotate-180"),size:12,color:"gray-900"})]})]})]})}),(0,t.jsx)("div",{className:"hidden shrink items-center gap-2 overflow-hidden truncate font-mono text-sm font-normal leading-5 text-gray-900 @md-page:flex",children:(0,t.jsx)(tq,{domain:a,project:r})})]}),(0,t.jsx)("div",{className:"flex shrink-0 items-center gap-3",children:(0,t.jsx)(tY,{domain:a,project:r,editingDomain:m,setEditingDomain:h,onOpenAccordion:s})})]})}),(0,t.jsx)(k.Content,{className:"overflow-hidden will-change-[height] @md-page:px-4 [[data-state=open]_&]:animate-content-open",children:(0,t.jsx)(tQ,{status:C,editingDomain:m,domain:a,teamDomain:b.data?.isOk()?b.data.value.domain:null,project:r,revalidateDomains:l,setEditingDomain:h,getProjectDomainTarget:w,ui:N,teamSlug:n,setRemoveModal:u,onCloseAccordion:o},a.name)})]}),c?(0,t.jsx)(T,{domain:a.name,onRemoveDomain:e=>{x(async()=>{await S(e)})},removeModal:c,removing:p,setRemoveModal:u,error:f}):null]})}let tX=90;function t0(e){let{isLoadingMore:a,isReachingEnd:n,loadMore:i}=tU(e.project);return(0,t.jsx)("div",{className:"flex w-full items-center justify-center",children:void 0!==n&&!n&&(0,t.jsx)(r.Button,{type:"tertiary",className:"w-full",loading:a,onClick:()=>void i(),children:"Load more"})})}function t1(e){let{domains:a,loadMore:n,isLoadingMore:s,isReachingEnd:o,isLoading:l,revalidateDomains:d}=tU(e.project),{search:c}=tL(),[u,h]=(0,j.useState)([]),f=(0,j.useCallback)(e=>{h(e)},[]),g=(0,j.useCallback)(e=>{h(t=>t.includes(e)?t:[...t,e])},[]),p=(0,j.useCallback)(e=>{h(t=>t.filter(t=>t!==e))},[]);return l?(0,t.jsx)(m,{}):a.length?(0,t.jsx)(k.Root,{type:"multiple",value:u,onValueChange:f,children:(0,t.jsx)("div",{className:"flex flex-col  items-start justify-center self-stretch rounded-md border border-solid border-gray-400 bg-background-100",children:(0,t.jsx)(e3.Virtuoso,{style:{width:"100%"},data:a,endReached:()=>{s||o||n()},useWindowScroll:!0,components:{Footer:()=>s?(0,t.jsx)(t0,{project:e.project}):null},itemContent:(r,n)=>(0,t.jsx)(tZ,{domain:n,className:r===a.length-1?"border-b-0":"",project:e.project,teamSlug:e.teamSlug,search:c,onOpenAccordion:g,onCloseAccordion:p,revalidateDomains:d},n.name)})})}):(0,t.jsx)(i.EmptyState.Root,{paddingY:96,descriptionClassName:"max-w-none",titleClassName:"max-w-none",title:"No Results Found",description:"Your search did not return any results.",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 @sm-page:flex-row",children:[(0,t.jsx)(r.Button,{type:"secondary",onClick:e.onClearFilters,children:"Clear Filters"}),(0,t.jsx)(t$,{projectId:e.project})]})})}e.s(["NewProjectDomainsPage",0,function(){let e=(0,w.useParams)(),a=e?.teamSlug,r=e?.project,{search:n,setSearch:s}=tL(),{redirectFilter:o,setRedirectFilter:l}=tW(),{gitBranchFilter:d,setGitBranchFilter:u}=tV(),{environmentFilter:m,setEnvironmentFilter:v}=tG(),{domains:b,isLoading:k,revalidateDomains:y}=tU(r),N=(0,e8.useDebouncedCallback)(e=>{s(e)},200),{domain:S,setDomain:P}=function(){let[e,t]=(0,I.useQueryState)("domain",{...z.parseAsString,shallow:!0});return{domain:e,setDomain:t}}(),{showAddDomainModal:D,setShowAddDomainModal:A}=tB(),[E,R]=(0,j.useState)(null),T=!n&&!o&&!d&&!m&&!k&&0===b.length,_=n??S??null,[O,F]=(0,j.useState)(n??""),M=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.ButtonLink,{className:"hidden @md-page:flex",href:`/domains?q=${n?.length?n:""}&teamSlug=${a}`,type:"secondary",children:"Buy Domain"}),(0,t.jsx)(t$,{projectId:r})]});return(0,t.jsxs)("div",{className:c.IS_DASH?"space-y-6":"space-y-4",children:[!c.IS_DASH&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-heading-24",children:(0,t.jsx)(x.SearchContextHighlighter,{children:"Domains"})}),(0,t.jsx)("span",{className:"hidden @md-page:block",children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Domains can be assigned to git branches, custom environments, and production."})})]}),T?null:(0,t.jsx)("div",{className:"flex items-center gap-2",children:M})]}),(0,t.jsx)("span",{className:"block @md-page:hidden",children:"These are your domains assigned to branches & production deployments."})]}),T?(0,t.jsx)(i.EmptyState.Root,{paddingY:28,icon:(0,t.jsx)(i.EmptyState.Icon,{icon:(0,t.jsx)(e9.Globe,{size:32})}),descriptionClassName:"max-w-none",titleClassName:"max-w-none",title:"No domains have been added yet",description:"Add or purchase a domain to get started",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 @sm-page:flex-row",children:[(0,t.jsx)(p.ButtonLink,{href:`/domains?q=${n?.length?n:""}&teamSlug=${a}`,type:"secondary",children:"Buy Domain"}),(0,t.jsx)(t$,{projectId:r})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col-reverse @md-page:flex-row items-stretch @md-page:items-center gap-x-3 gap-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3 grow",children:[(0,t.jsx)(L,{value:O,setSearch:e=>{N(e),F(e??"")}}),(0,t.jsxs)(f.MenuContainer,{position:"bottom-end",closeOnSelect:!1,children:[(0,t.jsx)(g.MenuButton,{type:"secondary","aria-label":"Filter domains",shape:"square",svgOnly:!0,children:(0,t.jsx)(tM.Filter,{})}),(0,t.jsx)(h.Menu,{width:300,children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-label-12 text-gray-900",children:"Environment"}),(0,t.jsx)(tH,{value:m,onChange:e=>{v(e)},disabled:!1})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-label-12 text-gray-900",children:"Git Branch"}),(0,t.jsx)(q,{disabled:!1,environmentId:C.EnvTarget.Preview,clearable:!0,onChange:e=>{u(e??null)},onFocus:void 0,value:d||""})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-label-12 text-gray-900",children:"Redirect To"}),(0,t.jsx)(tn,{selfRedirect:!1,setRedirect:e=>{l("function"==typeof e?e(o):e)},savingRedirect:!1,redirect:o,domain:"",disabled:!1,className:"w-full"})]})]})})]})]}),c.IS_DASH&&(0,t.jsx)("div",{className:"flex flex-row items-center gap-3 *:flex-1 @md-page:*:flex-none",children:M})]}),(0,t.jsx)(t1,{project:r,teamSlug:a,onClearFilters:()=>{s(void 0),l(null),u(null),v(null),F("")}})]}),D?(0,t.jsx)(tj,{onClose:()=>{A(null),P(null)},onSave:async()=>{await Promise.all([s(void 0),P(null)]),F(""),await y(),await A(null)},initialAddDomainInput:_,project:r,onDomainTransferRequest:e=>{A(null),R(e)},teamSlug:a}):null,E?(0,t.jsx)(tP,{domain:E.domain,onCancel:()=>R(null),active:!0,onComplete:()=>{R(null),y()},projectIdOrNameInUse:E.projectIdOrNameInUse,gitBranch:E.gitBranch,customEnvironmentId:E.customEnvironmentId,redirect:E.redirect,redirectStatusCode:E.redirectStatusCode}):null,(0,t.jsx)(tF,{projectId:r,onCancel:()=>{y()}})]})}],8162654)}]);

//# debugId=23facdff-b64b-211a-9a35-c7d4f4b786c6
//# sourceMappingURL=ff55ec235f6a9543.js.map