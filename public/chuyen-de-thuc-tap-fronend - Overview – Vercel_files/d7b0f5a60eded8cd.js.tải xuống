;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="020ccbae-50db-c357-ea74-bf2eb7df0003")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4496450,e=>{"use strict";function t(e){return!e||"legacy"===e}e.s(["isLegacyPlanIteration",0,t,"isOnUnbundledPricingPlan",0,function(e){return!t(e?.billing?.planIteration)},"usesMiuPricing",0,function(e){return e?.plan==="enterprise"&&e?.planIteration==="unbundled"}])},1000921,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>');e.s(["ArrowCircleRight",0,t])},8587921,7873387,e=>{"use strict";var t=e.i(6695816),r=e.i(7909933),n=e.i(3924999),i=e.i(8042625),a=e.i(277234),s=e.i(4244280),o=e.i(9668517),l=e.i(5338940),c=e.i(1717203),d=e.i(7557283);let u=e=>(r,n,i)=>{let a=(0,t.useRef)(void 0),s=e(r,n,i);(0,t.useEffect)(()=>{void 0!==s.data&&(a.current=s.data)},[s.data]);let o=(0,t.useCallback)(()=>{a.current=void 0},[]);return{...s,data:void 0===s.data?a.current:s.data,isLagging:void 0===s.data&&void 0!==a.current,resetLaggy:o}};e.s(["default",0,u],7873387),e.s(["MEMBERS_LIMIT",0,20,"default",0,function(){let{sort:e="date_desc",limit:t=20,filterByUserIds:n,until:o,role:u,includeEntitlements:m,includePermissionRequests:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:h,team:p}=(0,l.useTeam)(),{isLoading:x,can:v}=(0,c.default)(),C=!x&&v(d.Action.List,d.Resource.TeamFellowMembership);return(0,r.default)(()=>h&&p&&C?`${s.API_TEAMS_MEMBERS_V3}/${p.id}/members${(0,i.encode)({sort:e,until:o,limit:t,role:u,filterByUserIds:n,includeEntitlements:m,includePermissionRequests:g})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),f)},"useMembersForTeam",0,function(e){let{limit:t=20,until:n,role:o,sort:l="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,r.default)(()=>e?`${s.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,i.encode)({until:n,limit:t,role:o,sort:l})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),c)},"useMembersInfinite",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:g,role:f,eligibleMembersForProjectId:h,sort:p="date_desc",filterByUserIds:x,includeEntitlements:v,mfaStateFilter:C,includePermissionRequests:E}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],b=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:y,team:T}=(0,l.useTeam)(),{isLoading:A,can:S}=(0,c.default)(),_=!A&&S(d.Action.List,d.Resource.TeamFellowMembership),I=(0,o.useTeamSlug)(),P=g||20,R=(0,n.default)((e,t)=>{if(!y||!T||!_)return null;if(0===e)return`${s.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,i.encode)({sort:p,limit:P,search:m,role:f,eligibleMembersForProjectId:h,filterByUserIds:x,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==C?C:void 0,includePermissionRequests:E})}`;let r=t?.pagination.nextPageCursor;return r?`${s.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,i.encode)({sort:p,limit:P,nextPageCursor:r,search:m,role:f,eligibleMembersForProjectId:h,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==C?C:void 0,includePermissionRequests:E})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:j?[u]:[]});(0,t.useEffect)(()=>{j&&R.resetLaggy()},[I,j]);let M=(0,t.useMemo)(()=>R.data?.flatMap(e=>e.members.slice(0,P))||[],[R.data,P]),L=(0,t.useMemo)(()=>R.data?.flatMap(e=>e.permissionRequests||[])||[],[R.data]),N=!!R.data,w=N&&0===M.length,O=!!(N&&R.data&&R.size>R.data.length),$=!!(N&&R.data&&!R.data[R.data.length-1]?.pagination?.nextPageCursor);return(0,r.default)(()=>{if(!b||!R.data||$||!y||!T)return null;let e=R.data[R.data.length-1].pagination.nextPageCursor;return`${s.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,i.encode)({sort:p,limit:P,nextPageCursor:e,search:m,role:f,eligibleMembersForProjectId:h,includeEntitlements:v,filterByMfaState:"all"!==C?C:void 0,includePermissionRequests:E})}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0})),[R,{members:M,permissionRequests:L.filter(e=>null!=e),initialDataLoaded:N,isEmpty:w,loadMore:()=>R.setSize(R.size+1),isLoadingMore:O,isReachingEnd:$,isLagging:R.isLagging}]},"useSuggestedMembersInfinite",0,function(){let{limit:e=25,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{can:s,isLoading:u}=(0,c.default)(),m=!u&&s(d.Action.Create,d.Resource.TeamFellowMembership),{isReady:g,team:f}=(0,l.useTeam)(),h=(0,o.useTeamSlug)(),p=(0,n.default)((t,r)=>{if(!g||!f||!m)return null;if(!t)return`/api/teams/${h}/members/suggested${(0,i.encode)({limit:e})}`;let n=r?.members,a=n?.length===e?n[n.length-1].email:null;return a?`/api/teams/${h}/members/suggested${(0,i.encode)({limit:e,from:a})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r),x=(0,t.useMemo)(()=>p.data?.flatMap(t=>t.members.slice(0,e))||[],[p.data,e]),v=!!p.data,C=v&&0===x.length,E=!!(v&&p.data&&p.size>p.data.length),j=!!(v&&p.data&&p.data[p.data.length-1]?.members.length<e);return[p,{members:x,initialDataLoaded:v,isEmpty:C,loadMore:()=>p.setSize(p.size+1),isLoadingMore:E,isReachingEnd:j}]}],8587921)},4723202,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),n=e.i(2504781),i=e.i(5255926),a=e.i(455575),s=e.i(5468328),o=e.i(277234),l=e.i(5338940),c=e.i(8587921),d=e.i(5140444),u=e.i(8248823),m=e.i(57106);async function g(e,t){await (0,o.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}e.s(["RequestRoleButton",0,function(e){let{teamRole:o,variant:f="card"}=e,{team:h,isLoading:p}=(0,l.useTeam)(),{hasRequestedRole:x,mutate:v,isLoading:C}=function(e){let{user:t,isLoading:r}=(0,d.useUser)(),{data:n,mutate:i,isLoading:a}=(0,c.default)({includePermissionRequests:!0}),s=n?.permissionRequests;return{hasRequestedRole:s?.some(r=>r.uid===t?.uid&&r.requestedTeamRole.includes(e))??!1,mutate:i,isLoading:r||a}}(o),[E,j]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1);if(h?.membership?.role!=="VIEWER_FOR_PLUS")return null;let T=x||b;return(0,t.jsx)(i.Skeleton,{show:C||p,children:(0,t.jsx)(s.Tooltip,{disableTriggers:!T,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(m.Link,{href:`/${h?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(n.Button,{disabled:T,loading:E,className:"card"===f?"text-label-14 font-medium":void 0,onClick:async()=>{if(h?.id){j(!0);try{await g(h.id,o),v(),y(!0),a.toasts.success("Request for the Member role has been sent")}catch(e){a.toasts.error((0,u.errorToString)(e,"Failed to send request"))}finally{j(!1)}}},size:"card"===f?"small":void 0,type:"card"===f?"tertiary":void 0,children:T?"Access Requested":"Request Access"})})})}])},8556491,e=>{"use strict";var t=e.i(31889),r=e.i(4723202),n=e.i(57106),i=e.i(1235157),a=e.i(6352514),s=e.i(4759942);e.s(["AdditionalPermissionsRequiredModal",0,function(e){let{role:o,team:l,actionLabel:c,dataTestId:d}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 @md-page:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":d,children:(0,t.jsxs)("div",{className:"shadow-lg @md-page:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:o?(0,i.getRoleName)(o):"Viewer"})," user on the ",(0,t.jsx)("strong",{children:l?.name})," team, you do not have permission to ",c,"."]}),(0,t.jsxs)("div",{className:"text-center break-words pt-2 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(n.Link,{external:!0,href:"/docs/rbac/access-roles",onClick:()=>{s.analytics.track(a.AnalyticsEvent.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]}),"VIEWER_FOR_PLUS"===o?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(r.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}])},1068837,e=>{"use strict";var t=e.i(31889),r=e.i(1717203),n=e.i(8556491);e.s(["AdditionalPermissionsRequiredModalClient",0,function(e){let{actionLabel:i,permissionChecks:a}=e,{can:s,isLoading:o,accessInfo:l}=(0,r.default)(),c=a.every(e=>{let[t,r]=e;return s(t,r)});return o||c?null:(0,t.jsx)(n.AdditionalPermissionsRequiredModal,{role:l?.role,team:l?.team??void 0,actionLabel:i})}])},2843591,e=>{"use strict";var t=e.i(7909933),r=e.i(6695816),n=e.i(3924999),i=e.i(8042625),a=e.i(277234),s=e.i(4244280),o=e.i(5338940);e.i(6887680);var l=e.i(6810699);e.s(["mapEdgeConfigToStoreType",0,function(e){let{edgeConfig:t,project:r}=e;return{...t,type:"edge-config",projectsMetadata:r?[{projectId:r.id,name:r.name,framework:r.framework,id:"",environments:[],environmentVariables:[],envVarPrefix:null}]:[],name:t.slug,status:"available",totalConnectedProjects:+!!r}},"useEdgeConfig",0,function(e,r){let{isReady:n,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&n?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)},"useEdgeConfigBackup",0,function(e,r,n){let{isReady:l,team:c}=(0,o.useTeam)();return(0,t.default)(()=>e&&r&&"current"!==r&&l?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups/${encodeURIComponent(r)}${(0,i.encode)({teamId:c?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),n)},"useEdgeConfigBackupsInfinite",0,function(e,t,r){let{isReady:l,team:c}=(0,o.useTeam)();return(0,n.default)((t,n)=>{if(!e||!l||n&&!n.pagination.hasNext)return null;let a={teamId:c?.id,metadata:r?.metadata?"true":void 0,limit:r?.limit||25,next:n?.pagination.next};0===t&&(a.limit+=1);let o=`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups`;return`${o}${(0,i.encode)(a)}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateFirstPage:!1,revalidateOnFocus:!1,...t})},"useEdgeConfigItems",0,function(e,r){let{isReady:n,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&n?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/items${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)},"useEdgeConfigSchema",0,function(e,r){let{isReady:n,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&n?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/schema${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)},"useEdgeConfigTokens",0,function(e,r){let{isReady:n,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&n?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/tokens${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)},"useEdgeConfigs",0,function(){let e=(0,l.useResourceList)({protocolType:"storage"});return{data:(0,r.useMemo)(()=>e.data?.stores.filter(e=>"edge-config"===e.type),[e.data?.stores])}}])},5919007,e=>{"use strict";e.s(["EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH",0,52,"getMaxEdgeConfigs",0,function(e){if("number"==typeof e.resourceConfig?.edgeConfigs)return e.resourceConfig.edgeConfigs;switch(e.billing?.plan){case"enterprise":return 10;case"pro":return"trialing"===e.billing.status?1:3;default:return 1}},"getSizeLimitInBytes",0,function(e){if("number"==typeof e.resourceConfig?.edgeConfigSize)return 1e3*e.resourceConfig.edgeConfigSize;switch(e.billing?.plan){case"enterprise":return 512e3;case"pro":return 64e3;default:return 8e3}}])},4348614,e=>{e.v({expanderWrapper:"store-advanced-options-expander-module__QIqk3G__expanderWrapper",expanderWrapperExpanded:"store-advanced-options-expander-module__QIqk3G__expanderWrapperExpanded"})},1261558,e=>{"use strict";var t=e.i(31889),r=e.i(9722978);e.i(8703064);var n=e.i(7507521),i=e.i(4348614);e.s(["StoreAdvancedOptionsExpander",0,function(e){let{children:a,isExpandedDefault:s}=e;return(0,t.jsx)(n.Expander,{className:(0,r.clsx)(i.default.expanderWrapper),expandedClassName:i.default.expanderWrapperExpanded,isExpandedDefault:s,title:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial px-3 py-2",children:[(0,t.jsx)(n.ExpanderTrigger,{}),(0,t.jsx)("p",{className:"text-[13px] leading-[18px] font-medium text-gray-900",children:"Advanced Options"})]}),children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial px-3 py-2",children:a})})}])},8206804,e=>{"use strict";var t=e.i(31889);e.s(["default",0,function(e){let{margin:r=50,className:n}=e;return(0,t.jsx)("hr",{className:n,style:{border:"0",borderTop:"1px solid var(--accents-2)",margin:"number"==typeof r?`${r}px 0`:`${r} 0`}})}])},9512272,e=>{"use strict";var t=e.i(8042625),r=e.i(277234),n=e.i(4244280),i=e.i(5927860);function a(e){return e.startsWith("VERCEL_")&&!e.startsWith("VERCEL_APP_")}function s(e){return e.map(e=>{let t,r=e.type;return void 0===r&&(r=a(e.name)?i.EnvType.System:i.EnvType.Encrypted),e.target&&(t=Array.isArray(e.target)?e.target:[e.target]),{type:r,key:e.name,value:r===i.EnvType.System?e.name:e.value,target:t??[i.EnvTarget.Production,i.EnvTarget.Preview,i.EnvTarget.Development],gitBranch:e.gitBranch,comment:e.comment,customEnvironmentIds:e.customEnvironmentIds}})}async function o(e,i,a){let o=s(i);return(0,r.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v10")}/${e}/env${(0,t.encode)({teamId:a})}`,{method:"POST",body:JSON.stringify(o),throwOnHTTPError:!0})}async function l(e,i,a){await (0,r.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v4")}/${e}/env/${i.key}${(0,t.encode)({teamId:a,target:i.target})}`,{method:"DELETE",throwOnHTTPError:!0})}e.s(["addEncryptedEnvs",0,s,"addEnvs",0,o,"isSystemEnv",0,a,"legacyRemoveEnv",0,l])},4429570,e=>{"use strict";var t=e.i(31889),r=e.i(6891161),n=e.i(455575),i=e.i(4030453),a=e.i(6695816),s=e.i(8042625),o=e.i(277234),l=e.i(4244280),c=e.i(5927860),d=e.i(7917902),u=e.i(4422059),m=e.i(4004502),g=e.i(5919007),f=e.i(9512272);e.i(7037808);var h=e.i(8824424);e.i(8564753);var p=e.i(9584471),x=e.i(3500331),v=e.i(8206804),C=e.i(2014455),E=e.i(1261558);function j(e){let{advancedOptions:r,tokenLabelPlaceholder:n,onAdvancedOptionsChange:i,isLoading:a}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(C.ResourceEnvironmentSelector,{environments:r.environments,error:r.error?.environments,onChange:e=>i({...r,environments:e,error:{...r.error,environments:void 0}}),resourceTitle:"store"}),(0,t.jsx)(E.StoreAdvancedOptionsExpander,{isExpandedDefault:!!r.error,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)(x.Input,{"aria-label":"Environment Variable",disabled:a,error:r.error?.envVarName,label:"Environment Variable",onChange:e=>i({...r,envVarName:e.currentTarget.value,error:{...r.error,envVarName:void 0}}),placeholder:"EDGE_CONFIG",value:r.envVarName,width:"100%"})}),(0,t.jsx)(v.default,{margin:0}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)(x.Input,{"aria-label":"Token label",disabled:a,label:"Token label",maxLength:g.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH,onChange:e=>i({...r,tokenName:e.currentTarget.value}),placeholder:n,value:r.tokenName,width:"100%"})})]})})]})}function b(e){let{backOrCancelLabel:h,edgeConfig:x,title:v,subtitle:C,ProjectSelector:E,onClickOutside:b,onConnectionCreated:y,onBack:T,project:A}=e,{mutateByProtocol:S}=(0,p.useMutateResourceCache)(),[_,I]=(0,a.useState)({envVarName:"",tokenName:"",environments:{[c.EnvTarget.Development]:!0,[c.EnvTarget.Preview]:!0,[c.EnvTarget.Production]:!0,...A?.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}}),[P,R]=(0,a.useState)(!1),[M,L]=(0,a.useState)(null),{team:N}=(0,d.useAccount)(),w=(0,u.usePrevious)(A);(0,a.useEffect)(()=>{null!==_.error&&(!A||w&&A.id!==w.id)&&I({..._,error:null}),A&&(null===w||w&&A.id!==w.id)&&I({..._,environments:{[c.EnvTarget.Development]:!0,[c.EnvTarget.Preview]:!0,[c.EnvTarget.Production]:!0,...A.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}})},[_,w,A]);let O=(0,a.useMemo)(()=>{if(!A)return"";let e=A.name.slice(0,g.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH-6);return`${e.replace(/-*$/g,"")}-token`},[A]),$=_.tokenName||O,k=_.envVarName||"EDGE_CONFIG",B=(0,a.useCallback)(async e=>{if(e.preventDefault(),!x||P||!A)return;let t=[c.EnvTarget.Production,c.EnvTarget.Preview,c.EnvTarget.Development,...A.customEnvironments?.map(e=>e.slug)||[]].filter(e=>_.environments[e]);try{if(L(null),R(!0),I({..._,error:null}),0===t.length){I({..._,error:{environments:"Select at least one Environment for your Environment Variable"}}),R(!1);return}if(A.env&&A.env.some(e=>e.key===k&&("string"==typeof e.target?t.includes(e.target):e.target.some(e=>t.includes(e))))){I({..._,error:{envVarName:1===t.length?`This project already has an environment variable called ${k} in the chosen environment.`:`This project already has an environment variable called ${k} in one of the chosen environments.`}}),R(!1);return}let e=await (0,o.fetchAPI)(`${l.API_EDGE_CONFIG}/${x.id}/token${(0,s.encode)({teamId:N?.id})}`,{method:"POST",throwOnHTTPError:!0,body:{label:$}});await (0,f.addEnvs)(A.id,[{name:k,value:`https://edge-config.vercel.com/${x.id}?token=${e.token}`,type:c.EnvType.Encrypted,target:t.filter(e=>(0,c.isSystemEnvTarget)(e)),customEnvironmentIds:t.filter(e=>!(0,c.isSystemEnvTarget)(e)).map(e=>{let t=A.customEnvironments?.find(t=>t.slug===e);return t?.id}).filter(e=>void 0!==e)}],N?.id),await y(),b(),n.toasts.success({text:`Connected Project ${A.name} to Edge Config ${x.slug}`,key:x.slug}),await S("storage")}catch(e){if(e instanceof Error)L(e);else throw e}finally{R(!1)}},[x,P,A,_,N?.id,$,k,y,b,S]);return(0,t.jsxs)("form",{onSubmit:e=>void B(e),children:[(0,t.jsx)(r.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(r.Modal.Title,{center:!0,children:v}),C?(0,t.jsx)(r.Modal.Subtitle,{children:C}):null]}),(0,t.jsx)(r.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[E,(0,t.jsx)(j,{advancedOptions:_,isLoading:P,onAdvancedOptionsChange:I,tokenLabelPlaceholder:A?O:""}),M?(0,t.jsx)(i.Error,{children:M.message}):null]})})]})}),(0,t.jsxs)(r.Modal.Actions,{children:[(0,t.jsx)(r.Modal.Action,{onClick:T,type:"secondary",children:h}),(0,t.jsx)(r.Modal.Action,{buttonType:"submit","data-testid":(0,m.tid)("connect-edge-config-modal","connect-button"),disabled:!A||""===k.trim()||""===$.trim(),loading:P,children:"Connect"})]})]})}e.s(["ConnectEdgeConfigModal",0,function(e){let{active:n,edgeConfig:i,onClickOutside:s,onConnectionCreated:o,onAnimationDone:l}=e,[c,u]=(0,a.useState)(null),{team:m,user:g}=(0,d.useAccount)(),f=m?m.slug:g?.username;return(0,t.jsx)(r.Modal.Modal,{active:n,allowOverflow:!0,onAnimationDone:l,onClickOutside:s,width:540,children:(0,t.jsx)(b,{ProjectSelector:(0,t.jsx)(h.ResourceProjectSelector,{account:f,allowSelectConnectedProjects:!0,includedInConnectedProjects:e=>e?.env?.some(e=>e.edgeConfigId===i?.id)??!1,onProjectSelected:e=>{u(e)},resourceTitle:"store",selectedProject:c}),backOrCancelLabel:"Cancel",edgeConfig:i,onBack:s,onClickOutside:s,onConnectionCreated:o,project:c,title:"Connect Project"})})},"CreateEdgeConfigConnectionModalStep",0,b],4429570)},5377189,e=>{"use strict";var t=e.i(5757634),r=e.i(1717203),n=e.i(7557283);e.s(["useStorePermissions",0,function(e){let{storeType:i,teamSlug:a}=e,{fallback:s}=(0,t.useSWRConfig)(),{can:o,isLoading:l}=(0,r.default)(),c=a?s[i?`store:preload-data:${a}`:`store:list-preload-data:${a}`]:null;return{permissions:c?.permissions??function(e){let{storeType:t,can:r,isLoading:i}=e,a=function(e){switch(e){case"blob":return n.Resource.Blob;case"edge-config":return n.Resource.EdgeConfig;case"integration":return n.Resource.IntegrationResource;default:return null}}(t),s=function(e){switch(e){case"blob":return n.Resource.BlobStoreTokenSet;case"integration":return n.Resource.IntegrationStoreTokenSet;default:return null}}(t);return{list:r(n.Action.List,n.Resource.EdgeConfig)||r(n.Action.List,n.Resource.Blob),createAnyStore:r(n.Action.Create,n.Resource.EdgeConfig)||r(n.Action.Create,n.Resource.Blob),read:!!a&&r(n.Action.List,a),create:!!a&&r(n.Action.Create,a),remove:!!a&&r(n.Action.Delete,a),update:!!a&&r(n.Action.Update,a),updateSecrets:!!s&&r(n.Action.Update,s),readSecrets:!!s&&r(n.Action.Read,s),isLoading:i}}({storeType:i,can:o,isLoading:l})}}],5377189)},8564753,e=>{"use strict";e.i(9584471),e.s([])},1758334,e=>{"use strict";var t=e.i(6695816);e.i(6887680);var r=e.i(6810699),n=e.i(3798983);function i(e){return"edge-config"===e?64:32}e.s(["MAX_STORE_NAME_LENGTH",0,32,"getStoreNameLengthByType",0,i,"useStoreName",0,e=>{let{storeType:a,storeId:s,...o}=e,l=(0,t.useMemo)(()=>{if("projectName"in o&&o.projectName){let e=n.storeDefaultNameSuffix[a];return[o.projectName.replaceAll("_","-").slice(0,i(a)-e.length),e].join("")}return"storeName"in o?o.storeName??"":""},[o,a]),[c,d]=(0,t.useState)(),[u,m]=(0,t.useState)(),{isNameTaken:g}=(0,r.useResourceList)({protocolType:"storage"});return{storeNameError:c,name:u??l,setName:(0,t.useCallback)(e=>{let t=e.trim(),r=i(a),n="edge-config"===a?1:5;d(void 0),m(t),t.length<n?d(`The name must be at least ${n} characters.`):t.length>r?d(`The name must be at most ${r} characters.`):/^[a-zA-Z0-9_-\s]*$/.test(t)?g({name:t,storeType:a,storeId:s})&&d("This name is already in use by another store"):d("The name can only contain letters, numbers, and the following characters: _ - ")},[g,a,s]),touched:!!u&&u!==l}}])},7674801,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)(`<g clip-path="url(#clip0_872_3147)">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.57879 0 7.99729C0 11.5361 2.29 14.5251 5.47 15.5847C5.87 15.6547 6.02 15.4148 6.02 15.2049C6.02 15.0149 6.01 14.3851 6.01 13.7154C4 14.0852 3.48 13.2255 3.32 12.7757C3.23 12.5458 2.84 11.836 2.5 11.6461C2.22 11.4961 1.82 11.1262 2.49 11.1162C3.12 11.1062 3.57 11.696 3.72 11.936C4.44 13.1455 5.59 12.8057 6.05 12.5957C6.12 12.0759 6.33 11.726 6.56 11.5261C4.78 11.3262 2.92 10.6364 2.92 7.57743C2.92 6.70773 3.23 5.98797 3.74 5.42816C3.66 5.22823 3.38 4.40851 3.82 3.30888C3.82 3.30888 4.49 3.09895 6.02 4.1286C6.66 3.94866 7.34 3.85869 8.02 3.85869C8.7 3.85869 9.38 3.94866 10.02 4.1286C11.55 3.08895 12.22 3.30888 12.22 3.30888C12.66 4.40851 12.38 5.22823 12.3 5.42816C12.81 5.98797 13.12 6.69773 13.12 7.57743C13.12 10.6464 11.25 11.3262 9.47 11.5261C9.76 11.776 10.01 12.2558 10.01 13.0056C10.01 14.0752 10 14.9349 10 15.2049C10 15.4148 10.15 15.6647 10.55 15.5847C12.1381 15.0488 13.5182 14.0284 14.4958 12.6673C15.4735 11.3062 15.9996 9.67293 16 7.99729C16 3.57879 12.42 0 8 0Z" fill="currentColor"/>
  </g>
  <defs>
  <clipPath id="clip0_872_3147">
  <rect width="16" height="16" fill="white"/>
  </clipPath>
  </defs>`);e.s(["LogoGithub",0,t])},3025777,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),n=e.i(7674801),i=e.i(76079);let a=e=>{let{username:r,size:a=30,showIcon:s=!0,iconSize:o=14,iconBackground:l=!0,icon:c=(0,t.jsx)(n.LogoGithub,{className:"text-[#000000]",height:o,width:o}),lazy:d=!1,...u}=e;r||(r="404");let m=r&&`https://avatars.githubusercontent.com/${r.replace("[bot]","")}?s=${2*a}`;return(0,t.jsx)(i.AvatarWithIcon,{gitType:"github",icon:s?c:null,iconBackground:l,lazy:d,size:a,src:m,...u})};a.displayName="GitHubAvatar";let s=(0,r.memo)(a);e.s(["GitHubAvatar",0,s])},3896588,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),n=e.i(76079);let i=e=>{let{url:r,size:i=30,showIcon:a=!0,iconSize:s=14,iconBackground:o=!0,lazy:l=!1,...c}=e;return r&&(c=Object.assign(c,{src:r})),(0,t.jsx)(n.AvatarWithIcon,{gitType:"gitlab",icon:a?(0,t.jsxs)("svg",{"aria-label":"gitlab",height:s,style:{color:"white"},viewBox:"0 0 24 22",width:s,children:[(0,t.jsx)("path",{d:"M1.279 8.29L.044 12.294c-.117.367 0 .78.325 1.014l11.323 8.23-.009-.012-.03-.039L1.279 8.29zM22.992 13.308a.905.905 0 00.325-1.014L22.085 8.29 11.693 21.52l11.299-8.212z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M1.279 8.29l10.374 13.197.03.039.01-.006L22.085 8.29H1.28z",fill:"currentColor",opacity:"0.4"}),(0,t.jsx)("path",{d:"M15.982 8.29l-4.299 13.236-.004.011.014-.017L22.085 8.29h-6.103zM7.376 8.29H1.279l10.374 13.197L7.376 8.29z",fill:"currentColor",opacity:"0.6"}),(0,t.jsx)("path",{d:"M18.582.308l-2.6 7.982h6.103L19.48.308c-.133-.41-.764-.41-.897 0zM1.279 8.29L3.88.308c.133-.41.764-.41.897 0l2.6 7.982H1.279z",fill:"currentColor",opacity:"0.4"})]}):null,iconBackground:o,lazy:l,size:i,...c})};i.displayName="GitLabAvatar";let a=(0,r.memo)(i);e.s(["GitLabAvatar",0,a])},6683690,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),n=e.i(76079);let i=(0,r.memo)(e=>{let{size:r=30,showIcon:i=!0,iconSize:a=14,iconBackground:s=!0,lazy:o=!1,...l}=e;return(0,t.jsx)(n.AvatarWithIcon,{gitType:"bitbucket",icon:i?(0,t.jsxs)("svg",{height:a,viewBox:"-2 -2 65 59",width:a,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"bitbucket-:r3:",x1:"104.953%",x2:"46.569%",y1:"21.921%",y2:"75.234%",children:[(0,t.jsx)("stop",{offset:"7%",stopColor:"currentColor",stopOpacity:".4"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"currentColor"})]})}),(0,t.jsx)("path",{d:"M59.696 18.86h-18.77l-3.15 18.39h-13L9.426 55.47a2.71 2.71 0 001.75.66h40.74a2 2 0 002-1.68l5.78-35.59z",fill:"url(#bitbucket-:r3:)",fillRule:"nonzero",transform:"translate(-.026 .82)"}),(0,t.jsx)("path",{d:"M2 .82a2 2 0 00-2 2.32l8.49 51.54a2.7 2.7 0 00.91 1.61 2.71 2.71 0 001.75.66l15.76-18.88H24.7l-3.47-18.39h38.44l2.7-16.53a2 2 0 00-2-2.32L2 .82z",fill:"currentColor",fillRule:"nonzero"})]}):null,iconBackground:s,lazy:o,size:r,...l})});e.s(["BitbucketAvatar",0,i])},85019,e=>{"use strict";var t=e.i(7712782);e.s(["AGE_JUST_NOW_THRESHOLD",0,0,"AGE_SUFFIX",0,"","age",0,function(e){let{includeSeconds:r,includeSuffix:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,t.ago)(e,{suffix:n?void 0:"",justNowThreshold:0,includeSeconds:r})}])},7218483,e=>{"use strict";var t=e.i(6695816),r=e.i(85019),n=e.i(7712782);function i(e){let{long:r,suffix:i=n.AGO_SUFFIX_DEFAULT,justNowThreshold:a=n.AGO_JUST_NOW_THRESHOLD_DEFAULT,justNowLabel:s=n.AGO_JUST_NOW_LABEL_DEFAULT,includeSeconds:o,formatYearsWeeksMonths:l,alwaysRelative:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[d,u]=(0,t.useReducer)(Date.now,null,Date.now),m=(0,t.useMemo)(()=>{if(!e)return null;let t=Math.max(d-e,0);return!o&&t>6e4?6e4:t<a?Math.max(a-t,1e3):1e3},[d,e,a,o]);return((0,t.useEffect)(()=>{if(m){let e=setInterval(u,m);return()=>clearInterval(e)}},[m]),e)?(0,n.ago)(d-e,{long:r,suffix:i,justNowLabel:s,justNowThreshold:a,includeSeconds:o,formatYearsWeeksMonths:l,alwaysRelative:c}):""}e.s(["useAge",0,function(e){let{includeSeconds:t,justNowThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e,{suffix:r.AGE_SUFFIX,justNowThreshold:n||r.AGE_JUST_NOW_THRESHOLD,includeSeconds:t})},"useAgo",0,i,"useDaysLeft",0,function(e){if(!e)return"";let t=Math.max(Math.floor((e-Date.now())/864e5),0);return t>1?`${t} ${n.DAYS_LEFT_SUFFIX_DEFAULT}`:"1 day left"}])},4345845,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 1.75V1H3.25V1.75V9.09451C1.95608 9.42754 1 10.6021 1 12C1 13.6569 2.34315 15 4 15C5.42051 15 6.61042 14.0127 6.921 12.6869C8.37102 12.4872 9.7262 11.8197 10.773 10.773C11.8197 9.7262 12.4872 8.37102 12.6869 6.921C14.0127 6.61042 15 5.42051 15 4C15 2.34315 13.6569 1 12 1C10.3431 1 9 2.34315 9 4C9 5.37069 9.91924 6.52667 11.1749 6.8851C10.9929 7.94904 10.4857 8.9389 9.71231 9.71231C8.9389 10.4857 7.94904 10.9929 6.8851 11.1749C6.59439 10.1565 5.77903 9.35937 4.75 9.09451V1.75ZM13.5 4C13.5 4.82843 12.8284 5.5 12 5.5C11.1716 5.5 10.5 4.82843 10.5 4C10.5 3.17157 11.1716 2.5 12 2.5C12.8284 2.5 13.5 3.17157 13.5 4ZM4 13.5C4.82843 13.5 5.5 12.8284 5.5 12C5.5 11.1716 4.82843 10.5 4 10.5C3.17157 10.5 2.5 11.1716 2.5 12C2.5 12.8284 3.17157 13.5 4 13.5Z" fill="currentColor"/>');e.s(["GitBranch",0,t])},5463680,6769352,e=>{"use strict";e.i(6356390),e.i(15312);var t=e.i(7897830);e.i(39509);var r=e.i(31889),n=e.i(2504781),i=e.i(5468328);e.i(3182268);var a=e.i(7849855);e.i(6887680);var s=e.i(6810699),o=e.i(1414602),l=e.i(5074599);function c(){return(0,r.jsx)("div",{style:{height:40}})}e.s(["CreateResourceButton",0,function(e){let{onSuccess:d,protocolType:u,label:m,hideIfHasNoStores:g=!0,buttonType:f="default"}=e,{projectSlug:h}=(0,a.useProjectAndTeamSlug)(),{data:p}=(0,s.useResourceList)({projectSlug:h,protocolType:u}),{openBrowseProducts:x}=(0,t.useResourceModals)({onSuccess:d}),{permissions:v,isLoading:C}=(0,o.useResourcePermissions)();if(C)return(0,r.jsx)(c,{});let E=!!(p&&p.stores.length>0);return g&&!E?(0,r.jsx)(c,{}):(0,r.jsx)(i.Tooltip,{disableTriggers:v.create,text:(0,l.missingPermissionLabel)("create",u),children:(0,r.jsx)(n.Button,{disabled:!v.create,onClick:()=>x("browse-new"),type:f,typeName:"button",children:m??(0,l.createResourceButtonLabel)(u)})})}],6769352),e.i(3800789),e.s([],5463680)},7037808,e=>{"use strict";e.i(2014455),e.i(8824424),e.i(7137779),e.i(5098510),e.i(2483721),e.s([])},2886798,e=>{"use strict";e.i(9691190),e.i(1055938),e.i(680627),e.i(3183079),e.i(7512194),e.i(3788585),e.s([])},3322174,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),n=e.i(6060673);e.i(7037808);var i=e.i(7137779);e.i(5463680);var a=e.i(39509);e.i(3182268);var s=e.i(7849855);e.i(2886798);var o=e.i(3183079),l=e.i(4429570),c=e.i(3703009),d=e.i(2782729);e.s(["ConnectStoreSwitch",0,function(e){let{store:u}=e,{projectSlug:m}=(0,s.useProjectSlug)(),g=(0,n.useProject)(m),{onBack:f,onClose:h,state:p,onResourceUpdated:x}=(0,o.useResourceModalsContext)(),{type:v}=u,C=(0,r.useCallback)(()=>{x({resource:u,isConnected:!0})},[u,x]);if(p.type!==a.ResourceModalsActionTypes.CreateEnvs)return null;switch(v){case"edge-config":return(0,t.jsx)(l.CreateEdgeConfigConnectionModalStep,{backOrCancelLabel:p.backOrCancelLabel,edgeConfig:{id:u.id,slug:u.name},onBack:f,onClickOutside:h,onConnectionCreated:C,project:g.data,subtitle:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1.5 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Connect to"}),(0,t.jsx)(c.StoreIconOrAvatar,{icon:(0,d.getStoreIcon)(u),size:"small",type:u.type,useColor:!0}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:u.name})]}),title:`Configure ${g.data?.name??""}`});case"blob":case"integration":return(0,t.jsx)(i.CreateResourceConnectionModalStep,{backOrCancelLabel:p.backOrCancelLabel,onBack:f,onClickOutside:h,onConnectionCreated:C,project:g.data,resourceId:u.id,store:u,subtitle:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1.5 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Connect to"}),(0,t.jsx)(c.StoreIconOrAvatar,{icon:(0,d.getStoreIcon)(u),size:"small",type:u.type,useColor:!0}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:u.name})]}),title:`Configure ${g.data?.name??""}`});default:return null}},"ConnectStoreSwitchWithoutProject",0,function(e){let{active:r,store:n,key:a}=e,{onClose:s,onAnimationDone:c,onResourceUpdated:d}=(0,o.useResourceModalsContext)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.ConnectEdgeConfigModal,{active:"edge-config"===n.type&&r,edgeConfig:n,onAnimationDone:c,onClickOutside:s,onConnectionCreated:s},a),(0,t.jsx)(i.CreateResourceConnectionModal,{active:"edge-config"!==n.type&&r,onAnimationDone:c,onClickOutside:s,onConnectionCreated:()=>d({resource:n,isConnected:!0}),resourceId:n.id,store:n},a)]})}])},4174946,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),n=e.i(5155984),i=e.i(57106),a=e.i(1000921),s=e.i(2652226),o=e.i(3798983),l=e.i(5551580);e.i(2886798);var c=e.i(7512194),d=e.i(2782729),u=e.i(8922739),m=e.i(1068837),g=e.i(7557283),f=e.i(60582);let h=(0,r.createContext)(null);function p(e){let{teamSlug:r,projectSlug:n,children:l,buttons:c}=e,u=(0,d.hasProjectSlug)(n);return(0,t.jsx)(s.default,{buttons:c,title:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)("h1",{className:"text-[32px] leading-[40px] tracking-[-0.79px] font-medium",children:"Storage"})}),u?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Read and write directly to databases and stores connected to this project."," ",(0,t.jsx)(i.Link,{href:r?`/${r}/~/stores`:"/dashboard/stores",type:"highlight",children:(0,t.jsxs)("span",{className:"flex flex-row items-center justify-start gap-1 flex-initial",style:{display:"inline-flex"},children:[(0,t.jsx)("span",{children:"View All Databases"}),(0,t.jsx)(a.ArrowCircleRight,{})]})})]}):(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Read and write directly to databases and stores from your projects."," ",(0,t.jsx)(i.Link,{external:!0,href:o.docs.createDatabase,type:"highlight",children:"Learn more"})]})]}),children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(m.AdditionalPermissionsRequiredModalClient,{actionLabel:"view Storage",permissionChecks:[[g.Action.Read,g.Resource.EdgeConfig],[g.Action.Read,g.Resource.Blob]]}),l]})})}e.s(["StoreListLayout",0,function(e){let{teamSlug:i,project:a,children:s,createDatabaseButton:o}=e;return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(p,{buttons:null,projectSlug:a,teamSlug:i,children:(0,t.jsx)(l.ResourceListPlaceholder,{protocolType:"storage"})}),children:(0,t.jsx)(n.CompatRouterAllowed,{children:(0,t.jsx)(c.ResourceModalsProviderBase,{Modal:(0,t.jsx)(u.CreateStoreModal,{}),protocolType:"storage",children:(0,t.jsx)(h.Provider,{value:f.IS_DASH?o:null,children:(0,t.jsx)(p,{buttons:o,projectSlug:a,teamSlug:i,children:s})})})})})},"useStoreActionButtons",0,function(){return(0,r.useContext)(h)}],4174946)},4553963,e=>{"use strict";var t=e.i(31889),r=e.i(2504781),n=e.i(6864621);e.s(["CreateDatabaseModalTrigger",0,function(e){let{setShowCreateDatabaseModal:i}=(0,n.useCreateDatabaseModal)();return(0,t.jsx)(r.Button,{onClick:()=>i(!0),...e})}])}]);

//# debugId=020ccbae-50db-c357-ea74-bf2eb7df0003
//# sourceMappingURL=4fa9457b496b7e10.js.map