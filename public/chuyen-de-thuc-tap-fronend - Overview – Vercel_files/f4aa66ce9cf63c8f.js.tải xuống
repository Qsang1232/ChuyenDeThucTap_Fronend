;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3df3e49e-06ed-c7a8-e8b3-a7b39245360f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4535059,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)(`<g stroke="currentColor" stroke-width="1.5" fill="none">
    <path d="M4.75 0.75H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V4.75" stroke-linecap="square"/>
    <path d="M11.25 15.25H13.25C14.3546 15.25 15.25 14.3546 15.25 13.25V11.25" stroke-linecap="square"/>
    <path d="M11.25 0.75H13.25C14.3546 0.75 15.25 1.64543 15.25 2.75V4.75" stroke-linecap="square"/>
    <path d="M4.75 15.25H2.75C1.64543 15.25 0.75 14.3546 0.75 13.25V11.25" stroke-linecap="square"/>
    <path d="M4.5 5H9.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M7.5 8L12.5 8" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M4.5 11H9.5" stroke-linecap="round" stroke-linejoin="round"/>
  </g>`);e.s(["Traces",0,t])},4062761,e=>{"use strict";var t=e.i(6695816),r={};e.s(["default",0,function(e){for(var i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];var a=[],o=[],l=function(e){var i=(0,t.createContext)(r);a.push(i),o.push(function(){return(0,t.useContext)(i)})};return s.length?s.forEach(function(e){return l(e.name)}):l(e.name),[function(r){for(var i=r.children,n=e(function(e,t){if(null==e)return{};var r,i,s={},n=Object.keys(e);for(i=0;i<n.length;i++)t.indexOf(r=n[i])>=0||(s[r]=e[r]);return s}(r,["children"])),o=i,l=0;l<a.length;l+=1){var c=a[l],d=s[l]||function(e){return e};o=(0,t.createElement)(c.Provider,{value:d(n)},o)}return o}].concat(o)}])},4418317,e=>{"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise(e=>{requestAnimationFrame(()=>{e(window.open(...t))})})}class r{id;url;width;height;callbacks;prerenderHtml;popup;interval;constructor({id:e,url:t,width:r=800,height:i=600,callbacks:s={},prerenderHtml:n}){this.id=e,this.url=t,this.width=r,this.height=i,this.callbacks=s,this.prerenderHtml=n}async open(){var e,r;let i;if(this.popup&&!this.popup.closed)return void await t("",this.id).then(e=>e?.focus());let s="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0,n=(e=this.width,r=this.height,{width:e,height:r,top:(i=window.top)?i.outerHeight/2+i.screenY-r/2:0,left:i?i.outerWidth/2+i.screenX-e/2:0});this.popup=await t(this.url,this.id,Object.entries(n).map(e=>{let[t,r]=e;return`${t}=${r}`}).join(",")),this.popup&&this.prerenderHtml&&!s&&(this.popup.document.write(this.prerenderHtml),this.popup.location.href=this.url),!this.popup||this.popup.closed||void 0===this.popup.closed?(this.callbacks.onBlocked?.(),this.cancelPolling(),this.popup=null):(this.callbacks.onOpen?.(this.popup),this.poll())}close(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cancelPolling(),this.popup&&!this.popup.closed&&(this.popup.close(),e||this.callbacks.onClose?.())}poll(){this.interval=setInterval(()=>{try{if(!this.popup||this.popup.closed){this.cancelPolling(),this.callbacks.onAbort?.();return}this.callbacks.onPoll?.(this.popup)}catch(e){}},1e3)}cancelPolling(){this.interval&&(clearInterval(this.interval),this.interval=null)}}e.s(["default",()=>r],4418317)},9861498,e=>{e.v({button:"custom-module__vVV9Vq__button"})},7668531,e=>{"use strict";var t=e.i(31889),r=e.i(9722978),i=e.i(9861498),s=e.i(7602961);e.s(["CustomButtonLink",0,e=>{let{normal:n,active:a,hover:o,className:l,...c}=e;return(0,t.jsx)(s.ButtonLink,{...c,className:(0,r.clsx)(i.default.button,l),"data-custom-button":"",style:{"--button-custom-fg":`${n?.foreground||""}`,"--button-custom-bg":`${n?.background||""}`,"--button-custom-border":`${n?.border||""}`,"--button-custom-fg-active":`${a?.foreground||""}`,"--button-custom-bg-active":`${a?.background||""}`,"--button-custom-border-active":`${a?.border||""}`,"--button-custom-fg-hover":`${o?.foreground||""}`,"--button-custom-bg-hover":`${o?.background||""}`,"--button-custom-border-hover":`${o?.border||""}`},children:c.children})}])},6855136,e=>{e.v({avatar:"group-module__Dj5yHG__avatar",group:"group-module__Dj5yHG__group",note:"group-module__Dj5yHG__note",noteText:"group-module__Dj5yHG__noteText"})},7609806,e=>{"use strict";var t=e.i(31889),r=e.i(9722978),i=e.i(6695816),s=e.i(1344973),n=e.i(4585051),a=e.i(6855136),o=e.i(3025777),l=e.i(3896588),c=e.i(6683690);let d=(0,i.memo)(e=>{let{member:r,size:i,showIcon:s,iconBackground:a,lazy:d=!1}=e;return"teamId"in r?(0,t.jsx)(n.Avatar,{lazy:d,size:i,teamId:r.teamId,title:r.teamName},r.teamId):r.githubUser?(0,t.jsx)("span",{title:r.name,children:(0,t.jsx)(o.GitHubAvatar,{iconBackground:a,lazy:d,showIcon:s,size:i,username:r.username})},r.username):r.gitlabUser?(0,t.jsx)("span",{title:r.name,children:(0,t.jsx)(l.GitLabAvatar,{iconBackground:a,lazy:d,showIcon:s,size:i,url:r.url})},r.username):r.bitbucketUser?(0,t.jsx)("span",{title:r.name,children:(0,t.jsx)(c.BitbucketAvatar,{iconBackground:a,lazy:d,showIcon:s,size:i,url:r.url})},r.username):r.username?(0,t.jsx)(n.Avatar,{size:i,username:r.username},r.username):r.url?(0,t.jsx)(n.Avatar,{size:i,url:r.url},r.url):(0,t.jsx)(n.Avatar,{size:i,uid:r.uid},r.uid)});d.displayName="GroupAvatar";let u=e=>{let{members:i,limit:n=3,extra:o=0,size:l=24,showIcon:c=!1,iconBackground:u=!0,ariaHidden:p,lazy:m=!1}=e;0===n&&(n=i.length),n-=1;let g=i.slice(0,n),h=i.slice(n),f=h.length+o,x=f>9?"9+":`+${f}`,v=`${f} more avatars in this group`;return(0,t.jsxs)("div",{"aria-hidden":p,className:a.default.group,children:[g.map(e=>(0,t.jsx)("span",{className:a.default.avatar,children:"component"in e?e.component:(0,t.jsx)(d,{member:e,size:l,showIcon:c,iconBackground:u,lazy:m})},"teamId"in e?e.teamId:e.uid||e.username||e.url)),h.length||o>0?(0,t.jsxs)("span",{"aria-label":v,className:(0,r.clsx)(a.default.note,{[a.default.avatar||""]:h.length}),title:v,children:[h.length?"component"in h[0]?h[0].component:(0,t.jsx)(d,{member:h[0],size:l,showIcon:c,iconBackground:u,lazy:m}):null,f>1?(0,t.jsx)(s.Text,{as:"span",className:(0,r.clsx)(a.default.noteText,"dark-theme"),color:"gray-1000",size:10,weight:600,children:x}):null]}):null]})};u.displayName="AvatarGroup";let p=(0,i.memo)(u);e.s(["AvatarGroup",0,p])},4819890,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill="#666" fill-rule="evenodd" d="M14.5 8a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0ZM16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM6 11l5.5-3L6 5v6Z" clip-rule="evenodd" style="fill:currentColor;"/>');e.s(["PlayCircle",0,t])},2470467,e=>{e.v({description:"description-module__J9KQsG__description",ellipsis:"description-module__J9KQsG__ellipsis",icon:"description-module__J9KQsG__icon",right:"description-module__J9KQsG__right"})},4245131,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),i=e.i(9722978),s=e.i(2988836),n=e.i(5468328),a=e.i(2470467);let o=(0,r.memo)(function(e){let{title:r,content:o,tooltip:l,right:c,className:d,ellipsis:u,"data-testid":p,tooltipProps:m}=e;return(0,t.jsxs)("dl",{className:(0,i.clsx)(a.default.description,{[String(a.default.right)]:c,[String(a.default.ellipsis)]:u},d),"data-testid":p,"data-version":"v1",children:[(0,t.jsxs)("dt",{"data-geist-description-title":"",children:[r,l?(0,t.jsx)("span",{className:a.default.icon,children:(0,t.jsx)(n.Tooltip,{text:l,...m,children:(0,t.jsx)(s.InformationFillSmall,{size:14})})}):null]}),(0,t.jsx)("dd",{"data-geist-description-content":"",children:o})]})});e.s(["Description",0,o])},9125947,e=>{"use strict";e.s(["default",0,function(e){return new Promise(t=>{setTimeout(t,e)})}])},4363398,e=>{"use strict";let t=["read-write:log-drain","read-write:otel-endpoint"],r=["read-write:log-drain"];e.s(["useIntegrationControl",0,function(e){let{account:i,integration:s,configuration:n}=e,a=i&&"slug"in i?i:void 0;if(!a)return null;let o=a.billing?.plan??"hobby",l=!!r.some(e=>(n??s)?.scopes.includes(e)),{available:c,unavailable:d}=function(e){let{scopes:t,billingPlan:r,isTrial:i}=e,s=[],n=[];return t?.forEach(e=>{let t="hobby"===r;switch(e){case"read-write:otel-endpoint":t?n.push(e):s.push(e);break;case"read-write:log-drain":t||"pro"===r&&i?n.push(e):s.push(e);break;default:s.push(e)}}),{available:s,unavailable:n}}({scopes:n?.scopes??s?.scopes,billingPlan:o,isTrial:a.billing?.status==="trialing"}),u=0===d.length;return{hasPaidAPIScope:l,availableScopes:c,unavailableScopes:d,canInstallIntegration:u,paidScopes:r,proScopes:t}}])},4006546,e=>{"use strict";var t=e.i(31889),r=e.i(5468328);function i(e){let{entities:r}=e;return 1===r.length?(0,t.jsx)("p",{className:"text-copy-14",children:r[0]},r[0]):(0,t.jsx)(t.Fragment,{children:r.map((e,i)=>(0,t.jsx)("p",{className:"text-copy-14",children:i===r.length-1?`and ${e}`:e},e))})}e.s(["WebhookEventList",0,function(e){if(!e.integration.webhook)return null;let s=function(e){if(!e.webhook)return[];let t=[];return e.webhook.events.some(e=>e.startsWith("deployment.")||e.startsWith("deployment-")&&!e.startsWith("deployment-check"))&&t.push("Deployments"),e.webhook.events.some(e=>e.startsWith("deployment-check")||e.startsWith("deployment.check-"))&&t.push("Deployment Checks"),e.webhook.events.some(e=>e.startsWith("project"))&&t.push("Projects"),e.webhook.events.some(e=>e.startsWith("domains"))&&t.push("Domains"),t}(e.integration);return 0===s.length?null:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Additionally, it also gets notified through"," ",(0,t.jsx)(r.Tooltip,{text:(0,t.jsxs)("p",{className:"text-copy-14",children:["It will receive updates for:"," ",(0,t.jsx)(i,{entities:s})]}),children:(0,t.jsx)("p",{className:"text-copy-14 text-blue-900",children:"webhook events"})}),"."]})})}])},4065455,3186231,e=>{"use strict";var t=e.i(31889),r=e.i(4585051),i=e.i(6891161),s=e.i(4030453),n=e.i(8522580),a=e.i(6695816),o=e.i(7553931),l=e.i(6352514),c=e.i(4759942),d=e.i(6838069),u=e.i(7722264),p=e.i(8042625),m=e.i(277234),g=e.i(4244280),h=e.i(4418317),f=e.i(9125947);function x(e){let{integration:t,source:r,onSuccess:i,onError:s}=e,n=(0,o.useRouter)(),d=(0,o.useSearchParams)(),x=(0,a.useRef)(null),v=async e=>{let n,a,{account:o,projects:v,additionalQueryParameters:j={}}=e;if(x.current)return void x.current.open();let y=`${window.location.origin}/integrations/${t.slug}/loading`,b="datastax-astra-db"===t.slug||t.slug?.includes("aws"),N=!1,S=null,w=!1,I=o&&"slug"in o?o:void 0,k=o&&"username"in o?o:void 0,C=d?.get("state"),_=async e=>{let{configuration:s,team:n}=e;return c.analytics.track(l.AnalyticsEvent.INTEGRATION_POPUP_INSTALL_FINISHED,{source:r,target:I?"team":"personal-account",integration:{id:t.id,slug:t.slug}}),c.analytics.track(l.AnalyticsEvent.INTEGRATIONS_INSTALL_MODAL_SUCCESS,{source:r}),c.analytics.track(l.AnalyticsEvent.INTEGRATION_INSTALLED,{integration_id:t.id,integration_slug:t.slug,source:r,target:I?"team":"personal-account"}),c.analytics.track(l.AnalyticsEvent.INTEGRATION_INSTALL_SUCCEEDED,{source:r,target:I?"team":"personal-account",integration:{id:t.id,slug:t.slug}}),i({configuration:s,team:n})},T=async e=>{let{id:t,team:r}=e;(await (0,m.fetchAPI)(`${g.API_INTEGRATION_CONTROLLER}/configuration/${t}${(0,p.encode)({teamId:r?.id})}`)).completedAt||await (0,m.fetchAPI)(`${g.API_INTEGRATION_CONTROLLER}/configuration/${t}${(0,p.encode)({teamId:r?.id})}`,{method:"DELETE"})};x.current=new h.default({id:`install-integration:${t.slug}:${Math.random().toString(36).slice(2)}`,url:y,callbacks:{onOpen:()=>{s?.({message:void 0})},onBlocked:()=>{x.current=null,s?.({message:"The installation could not be started."}),c.analytics.track(l.AnalyticsEvent.INTEGRATION_POPUP_INSTALL_BLOCKED,{source:r,target:I?"team":"personal-account"})},onPoll:async e=>{if(N||e.location.href!==y){if(S&&!S.completedAt)try{let e=await (0,m.fetchAPI)(`${g.API_INTEGRATION_CONTROLLER}/configuration/${S.id}${(0,p.encode)({teamId:I?.id})}`,{method:"GET"});e.completedAt&&(S=e)}catch(e){s?.((0,u.isError)(e)?e:{message:"Something went wrong."}),x.current?.close();return}}else{N=!0,c.analytics.track(l.AnalyticsEvent.INTEGRATION_POPUP_INSTALL_STARTED,{source:r,target:I?"team":"personal-account",integration:{id:t.id,slug:t.slug}});try{let e=await (0,m.fetchAPI)(`${g.API_INTEGRATION_CONTROLLER}/integration/${t.slug}/configuration${(0,p.encode)({teamId:I?.id})}`);"error"in e||(S=e);let i=await (0,m.fetchAPI)(S?`${g.API_INTEGRATION_CONTROLLER}/integration/${t.slug}/configuration/${S.id}${(0,p.encode)({teamId:I?.id})}`:`${g.API_INTEGRATION_CONTROLLER}/integration/${t.slug}/configuration${(0,p.encode)({teamId:I?.id})}`,{method:"POST",body:JSON.stringify({projects:v,source:r,scopes:t.scopes})});S||(w=!0,S=i.configuration),a=i.authorizationCode}catch(e){s?.((0,u.isError)(e)?e:{message:"Something went wrong."}),x.current?.close();return}n=`${window.location.origin}/${I?.slug||k?.username}/~/integrations/${S.id}/installed${b?"?autoclose=true":""}`,e.location.href=`${t.redirectUri}${(0,p.encode)({state:C,code:a,teamId:I?.id,configurationId:S.id,source:S.source,...j,next:n})}`}try{let t=!1;t=b?!!(N&&S?.completedAt):!!(N&&S&&e.location.origin+e.location.pathname===n),S&&t&&(x.current?.cancelPolling(),await (0,f.default)(2e3),await _({configuration:S,team:I}),x.current?.close())}catch(e){if(e instanceof DOMException&&"SecurityError"===e.name)return;throw e}},onClose:()=>{x.current=null},onAbort:async()=>{!b&&(x.current=null,s?.({message:"The installation was canceled."}),c.analytics.track(l.AnalyticsEvent.INTEGRATION_INSTALL_CANCELED,{source:r,target:I?"team":"personal-account",integration:{id:t.id,slug:t.slug}}),w&&S&&await T({id:S.id,team:I}))}}}),x.current.open()},j=async e=>{let i,{account:a,projects:o}=e,d=a&&"slug"in a?a:void 0;try{i=await (0,m.fetchAPI)(`${g.API_INTEGRATION_CONTROLLER}/integration/${t.slug}/configuration${(0,p.encode)({teamId:d?.id})}`,{method:"POST",body:JSON.stringify({projects:o,source:r,scopes:t.scopes})})}catch(e){s?.((0,u.isError)(e)?e:{message:"Something went wrong."});return}c.analytics.track(l.AnalyticsEvent.INTEGRATION_INSTALL_SUCCEEDED,{source:r,target:d?"team":"personal-account",integration:{id:t.id,slug:t.slug}});let{configuration:h}=i;n.push(`${window.location.origin}/dashboard/${d?`${d.slug}/`:""}integrations/${h.id}`)};return{open:e=>t.redirectUri?v(e):j(e),close:()=>{console.log("close called"),x.current?.close()}}}e.s(["useInstallIntegrationPopup",0,x],3186231);var v=e.i(4363398),j=e.i(4006546),y=e.i(2512825),b=e.i(5561425);function N(){return(0,t.jsx)(n.Note,{type:"warning",children:(0,t.jsx)("p",{className:"text-copy-14",children:"This integration is a community-developed integration. Please review integrator's documentation and End-User License Agreement (EULA) prior to proceeding."})})}e.s(["InstallExternalIntegrationModal",0,function(e){let{integration:n,account:u,teamSlugOrPublic:p,onAnimationDone:m,onSuccessfulInstall:g,view:h="modal",isOwnedByVercel:f,onBack:S,backButtonLabel:w}=e,I="marketplace",[k,C]=(0,a.useState)(!!n),[_,T]=(0,a.useState)(),D=u??_,[E,P]=(0,a.useState)(),A=(0,o.useRouter)(),[$,L]=(0,a.useState)(),[M,R]=(0,a.useState)(!1),{open:z,close:O}=x({integration:n,source:I,onSuccess:e=>{let{configuration:t}=e;g?g(t):A.push((0,d.getInstallationDetailsLink)({teamSlug:p.teamSlug??D?.slug??"",configurationId:t.id,integrationSlug:t.slug,isMarketplace:!1})),R(!1)},onError:e=>{let{message:t}=e;L(t),void 0!==t&&R(!1)}});(0,a.useEffect)(()=>{M&&L(void 0)},[M]);let F=(0,v.useIntegrationControl)({account:D??void 0,integration:n}),{reset:q,projectSelectionProps:U,installButtonProps:B}=(0,y.useProjectSelectionStep)({integrationControl:F,configuration:E,onSuccess:e=>{let{projects:t}=e;(async()=>{await z({account:D??null,projects:t.length?t.map(e=>e.id):void 0,additionalQueryParameters:{}}),R(!0)})()},account:D??void 0});(0,a.useEffect)(()=>{k&&c.analytics.track(l.AnalyticsEvent.INTEGRATION_INSTALL_MODAL_OPENED,{source:I,integration:{id:n.id,slug:n.slug}})},[k,I,n]);let H=()=>{L(void 0),R(!1),O(),C(!1),S?.()};if("embedded-modal"===h)return k?V():null;return(0,t.jsx)(i.Modal.Modal,{active:k,allowOverflow:!0,onAnimationDone:()=>{q(),m()},onClickOutside:()=>{M&&c.analytics.track(l.AnalyticsEvent.INTEGRATION_INSTALL_MODAL_CANCELED,{source:I,integration:{id:n.id,slug:n.slug}}),H()},width:"480px",children:V()});function V(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Modal.Title,{className:"flex items-center gap-2 py-5 px-6 border-0 border-b border-gray-200",children:[(0,t.jsx)(r.Avatar,{hash:n.icon,size:36})," Connect"," ",n.name," Account"]}),(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[n.approvedAt?null:(0,t.jsx)(N,{}),p.teamSlug?null:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Select a Vercel team to install the integration to:"}),(0,t.jsx)(b.TeamSelect,{account:_,integrationId:n.id,onChange:(e,t)=>{t.isLoading||(T(e),P(t.isInstalled?t.configuration:void 0),D!==e&&q())},type:"external"})]}),(0,t.jsx)(y.ProjectSelectionStep,{...U}),f?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.IntegrationScopeList,{integrationControl:F,scopes:n.scopes}),(0,t.jsx)(j.WebhookEventList,{integration:n})]}),(0,t.jsx)("span",{className:"text-gray-900",children:"Configure and link your Vercel projects on the next step."}),$?(0,t.jsx)(s.Error,{error:$}):null]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:H,type:"secondary",children:w??(S?"Back":"Cancel")}),(0,t.jsx)(y.InstallButton,{...B,children:M?"Resume":"Connect Account"})]})]})}}],4065455)},2098824,e=>{"use strict";var t=e.i(31889);e.s(["FormTitleDescription",0,function(e){let{title:r,description:i,as:s,htmlFor:n}=e;return(0,t.jsxs)(t.Fragment,{children:["label"===s?(0,t.jsx)("label",{htmlFor:n,className:"text-[14px] leading-[20px] font-medium text-inherit",children:r}):(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-inherit",children:r}),(0,t.jsx)("p",{className:"text-[14px] font-light leading-[20px] mt-1.5",children:i})]})}])},1087959,e=>{"use strict";var t=e.i(31889),r=e.i(6226725),i=e.i(2504781),s=e.i(5255926),n=e.i(4004502),a=e.i(6048771);e.s(["ProjectSelectItem",0,function(e){let{project:s,onRemove:o,disabled:l}=e;return(0,t.jsxs)("div",{className:"py-3 px-2 flex flex-row justify-between border border-gray-200 border-t-0 first:border-t first:rounded-t-[6px] last:rounded-b-[6px]","data-testid":(0,n.tid)("project-selected","item"),children:[(0,t.jsxs)("div",{className:"flex flex-col @lg-page:flex-row items-start @lg-page:items-center justify-start gap-2 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)(a.ProjectLogo,{deploymentId:s.latestDeployments?.[s.latestDeployments.length-1]?.id,framework:s.framework,project:s,size:20}),(0,t.jsx)("p",{className:"font-medium text-sm text-gray-1000",children:s.name})]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:s.targets?.production?.alias?.[0]})]}),o&&!l?(0,t.jsx)(i.Button,{className:"p-0 [&>span]:p-0 flex items-center justify-center","aria-label":"Remove project",shape:"circle",size:"tiny",type:"tertiary",style:{width:20,height:20},svgOnly:!0,typeName:"button",onClick:()=>o(s.id),children:(0,t.jsx)(r.CrossCircle,{size:16})}):null]},s.id)},"ProjectSelectItemSkeleton",0,function(){return(0,t.jsxs)("div",{className:"py-3 px-2 flex flex-row justify-between border border-gray-200 border-t-0 first:border-t first:rounded-t-[6px] last:rounded-b-[6px]",children:[(0,t.jsxs)("div",{className:"flex flex-col @lg-page:flex-row items-start @lg-page:items-center justify-start gap-2 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)(s.Skeleton,{width:20,height:20,boxHeight:20,rounded:!0}),(0,t.jsx)(s.Skeleton,{width:180,height:14})]}),(0,t.jsx)(s.Skeleton,{width:120,height:12})]}),(0,t.jsx)(s.Skeleton,{width:20,height:20,rounded:!0})]})}])},2565125,e=>{"use strict";var t,r=e.i(31889),i=e.i(1848296),s=e.i(3917098),n=e.i(2098824),a=e.i(1087959),o=e.i(6401841),l=((t={}).ALL="all",t.SOME="some",t);function c(e){let{count:t=2}=e;return 0===t?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"",children:Array.from({length:t}).map((e,t)=>(0,r.jsx)(a.ProjectSelectItemSkeleton,{},t))})})}function d(e){let{error:t}=e;return t?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.Stop,{size:14,color:"red-700"}),(0,r.jsx)("p",{className:"text-copy-14 text-red-900",children:t})]}):null}e.s(["ProjectSelector",0,function(e){let{error:t,projects:o,projectType:l,onProjectTypeUpdated:u,onProjectsUpdated:p,title:m,description:g,disabled:h,isLoading:f,loadingCount:x,comboboxListContainer:v,disableAllProjects:j,allProjectsComponent:y}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,r.jsx)("div",{children:(0,r.jsx)(n.FormTitleDescription,{description:g,title:m})}),(0,r.jsx)(i.RadioGroup,{disabled:h,onChange:e=>u(e),value:l,children:(0,r.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-6 flex-initial",children:[(0,r.jsx)(i.RadioGroup.Item,{value:"all",disabled:j,children:y||"All Projects"}),(0,r.jsx)(i.RadioGroup.Item,{value:"some",children:"Specific Projects"})]})})]}),"some"===l&&(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,r.jsx)(s.ProjectSelect,{errored:!!t,disabled:h,onSelect:e=>{p([...o,e])},selected:o,verifyIntegrationsPermissions:!1,comboboxListContainer:v}),f?(0,r.jsx)(c,{count:x}):o.length?(0,r.jsx)("div",{children:o.map(e=>(0,r.jsx)(a.ProjectSelectItem,{disabled:h,onRemove:e=>p(o.filter(t=>t.id!==e)),project:e},e.id))}):null]}),(0,r.jsx)(d,{error:t})]})},"ProjectTypes",()=>l])},8711152,e=>{"use strict";var t=e.i(6695816);e.s(["getConfigurationStatusByIntegrationId",0,function(e,t){if(!e)return{isLoading:!0};let r=e.find(e=>e.integrationId===t);return r?{isInstalled:!0,configuration:r,isLoading:!1}:{isInstalled:!1,isLoading:!1}},"getConfigurationStatusByTeamId",0,function(e,t){if(!e||!t)return{isLoading:!0};let r=e.get(t);return r?{isInstalled:!0,configuration:r,isLoading:!1}:{isInstalled:!1,isLoading:!1}},"useConfigurationStatus",0,function(e){let{initialConfigurationStatus:r}=e,[i,s]=(0,t.useState)(r);return(i.isLoading||!i.isInstalled)&&r!==i&&s(r),{configurationStatus:i,onConfigurationInstalled:(e,t)=>s({isInstalled:!0,configuration:e,billingPlan:t,isLoading:!1})}}])},9623675,4217693,4714999,7811023,7012263,7527320,e=>{"use strict";var t=e.i(31889),r=e.i(6835270),i=e.i(6891161);function s(e){return"modal"===(0,r.useInstallMarketplaceProductDisplayMode)()?(0,t.jsx)(i.Modal.Actions,{children:e.children}):(0,t.jsx)("footer",{className:"bg-background-200 sticky bottom-0 flex shrink-0 justify-between gap-4 border-t border-[var(--ds-gray-alpha-400)] py-4",children:e.children})}function n(e){return"modal"===(0,r.useInstallMarketplaceProductDisplayMode)()?(0,t.jsx)(i.Modal.Body,{children:e.children}):(0,t.jsx)("footer",{children:e.children})}e.s(["CheckoutActions",0,s],4217693),e.s(["CheckoutBody",0,n],4714999);var a=e.i(9722978);function o(e){let i,s=(0,r.useInstallMarketplaceProductDisplayMode)();i="inline"===s?"bg-transparent":"default"!==e.variant?"bg-[var(--geist-background)]":"bg-background-200";let n="py-[var(--geist-gap)] px-[var(--modal-padding)]";return"modal"===s&&("no-padding"===e.variant?n="p-0":"no-padding-no-bottom"===e.variant&&(n="mb-0 p-0")),(0,t.jsx)("div",{className:(0,a.clsx)(`
          mx-[calc(-1*var(--modal-padding))]
          mb-[calc(-1*var(--modal-padding))]
          border-x-0
          border-y
          border-solid
          border-[var(--accents-2)]
          last:border-b-0
         `,n,i),children:e.children})}function l(e){return"modal"===(0,r.useInstallMarketplaceProductDisplayMode)()?(0,t.jsx)(i.Modal.Subtitle,{children:e.children}):(0,t.jsx)("div",{className:"text-copy-16",children:e.children})}function c(e){return"modal"===(0,r.useInstallMarketplaceProductDisplayMode)()?(0,t.jsx)(i.Modal.Title,{center:e.center,children:e.children}):(0,t.jsx)("h3",{className:"text-copy-24 text-left",children:e.children})}e.s(["CheckoutContent",0,o],7811023),e.s(["CheckoutSubtitle",0,l],7012263),e.s(["CheckoutTitle",0,c],7527320);var d=e.i(5074599),u=e.i(9544652),p=e.i(5338940),m=e.i(4585051),g=e.i(6143247),h=e.i(6695816);function f(e){let{configuration:r}=e;return(0,t.jsx)(h.Suspense,{fallback:(0,t.jsx)(v,{}),children:(0,t.jsx)(x,{configuration:r})})}function x(e){let{configuration:i}=e,s=(0,r.useInstallMarketplaceProductDisplayMode)(),{team:n}=(0,p.useTeam)();return n?(0,t.jsxs)("div",{className:(0,g.cn)("flex items-center gap-1 ",{"justify-center":"modal"===s}),children:[(0,t.jsx)("p",{className:"text-copy-14 text-[var(--ds-gray-900)]",children:"Installing into"}),(0,t.jsx)(m.Avatar,{teamId:n.id,size:16,hash:n.avatar}),(0,t.jsx)("p",{className:"text-copy-14 font-medium",children:n.name}),i?.externalId?(0,t.jsxs)("p",{className:"text-copy-14 font-medium",children:["(",i?.externalId,")"]}):null]}):(0,t.jsx)(v,{})}function v(){let e=(0,r.useInstallMarketplaceProductDisplayMode)();return(0,t.jsx)("div",{className:(0,g.cn)("flex items-center gap-1 ",{"justify-center":"modal"===e}),children:(0,t.jsx)("p",{className:"text-copy-14 text-[var(--ds-gray-900)]",children:"Installing into ..."})})}e.s(["ResourceModalWrapper",0,function(e){let{cancelLabel:r,children:a,integration:p,hideCancel:m,SecondaryButton:g,onBack:h,SuccessAction:x,product:v,from:j,checkoutContentVariant:y,configuration:b}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(f,{configuration:b}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(c,{center:!0,children:(0,d.resourceModalTitle)({product:v,integration:p,from:j})}),(0,t.jsx)(l,{children:(0,d.resourceModalSubtitle)({product:v,integration:p,from:j})})]})]}),(0,t.jsx)(o,{variant:y,children:a})]})}),(0,t.jsxs)(s,{children:[g||!m&&(0,t.jsx)(u.DisabledContext.Provider,{value:!1,children:(0,t.jsx)(i.Modal.Action,{onClick:h,type:"secondary",children:r})})||(0,t.jsx)("div",{}),x]})]})}],9623675)},5746918,e=>{"use strict";var t=e.i(7909933),r=e.i(277234),i=e.i(4244280);e.s(["useLastInstalledUserConfigurationsByIntegration",0,function(e,s){return(0,t.default)(`${i.API_INTEGRATION_CONTROLLER}/integration/${encodeURIComponent(e)}/installed?source=${s}`,async e=>{let t=await (0,r.fetchAPI)(e),i=new Map;return t.forEach(e=>{e.installationType!==s&&(e.installationType||"external"!==s)||i.set(e.ownerId,e)}),i})}])},7093637,e=>{"use strict";e.i(9623675),e.s([])},5561425,e=>{"use strict";var t=e.i(31889),r=e.i(4585051),i=e.i(3306538),s=e.i(6881349),n=e.i(6891161),a=e.i(6695816),o=e.i(5338940),l=e.i(5746918);e.i(7093637);var c=e.i(9623675),d=e.i(8711152),u=e.i(3758860);function p(e){let{account:n,integrationId:c,onChange:u,type:p,excludeTeamId:m}=e,{teams:g}=(0,o.useTeam)(),{data:h}=(0,l.useLastInstalledUserConfigurationsByIntegration)(c,p),f=(0,a.useMemo)(()=>g?g.filter(e=>!m||e.id!==m).map(e=>{let t=!!h&&!!h.get(e.id);return{...e,hasConfiguration:t}}).sort((e,t)=>e.hasConfiguration&&!t.hasConfiguration?1:!e.hasConfiguration&&t.hasConfiguration?-1:0):[],[g,h,m]),x=(0,a.useMemo)(()=>n?`${n.name} (${n.slug})`:void 0,[n]);return(0,t.jsxs)(s.Combobox,{noInputPrefix:!0,noTextSelection:!0,onChange:e=>{let t=f.find(t=>t.id===e);e&&t&&u(t,(0,d.getConfigurationStatusByTeamId)(h,t.id))},placeholder:"Select a team",value:x,children:[(0,t.jsx)(s.Combobox.Input,{}),(0,t.jsx)(s.Combobox.List,{children:f.map(e=>{var n;return(0,t.jsx)(s.Combobox.Option,{label:(n=e,`${n.name} ${n.slug}`),value:e.id,children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1.5 flex-initial",children:[(0,t.jsx)(r.Avatar,{hash:e.avatar,size:20}),(0,t.jsx)("p",{className:"text-copy-14 line-clamp-1",style:{wordBreak:"break-all"},children:`${e.name} (${e.slug})`}),e.hasConfiguration?(0,t.jsx)(i.Badge,{children:"Installed"}):null]})},e.id)})})]})}e.s(["MarketplaceTeamSelectModalStep",0,function(e){let{integration:r,onBack:i,onTeamSelected:s,product:o}=e,[l,d]=(0,a.useState)(null),[m,g]=(0,a.useState)();return(0,t.jsx)(c.ResourceModalWrapper,{SuccessAction:(0,t.jsx)(n.Modal.Action,{disabled:!l,onClick:()=>s(l,m),children:"Continue"}),cancelLabel:"Cancel",checkoutContentVariant:"default",from:"team-selection",integration:r,onBack:()=>{let e=new URL(window.location.href);e.searchParams.delete("teamSlug"),window.history.pushState(null,"",e.toString()),i()},product:o?(0,u.getProductWithSupportedProtocols)(o):{name:"",supportedProtocols:(0,u.getSupportedProtocols)(r.products[0]),slug:r.products[0].slug,id:r.products[0].id},children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Select a Vercel team to install the integration to:"}),(0,t.jsx)(p,{account:l??void 0,integrationId:r.id,onChange:(e,t)=>{d(e),g(t);let r=new URL(window.location.href);r.searchParams.set("teamSlug",e.slug),window.history.pushState(null,"",r.toString())},type:"marketplace"})]})})},"TeamSelect",0,p])},4367648,e=>{e.v({checkbox:"choicebox-group-module__kLcSnq__checkbox",checked:"choicebox-group-module__kLcSnq__checked",choicebox:"choicebox-group-module__kLcSnq__choicebox","choicebox-group":"choicebox-group-module__kLcSnq__choicebox-group",content:"choicebox-group-module__kLcSnq__content",description:"choicebox-group-module__kLcSnq__description",disabled:"choicebox-group-module__kLcSnq__disabled",icon:"choicebox-group-module__kLcSnq__icon",input:"choicebox-group-module__kLcSnq__input",option:"choicebox-group-module__kLcSnq__option",radio:"choicebox-group-module__kLcSnq__radio",title:"choicebox-group-module__kLcSnq__title"})},9957872,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),i=e.i(9722978),s=e.i(9508212),n=e.i(9544652),a=e.i(692265),o=e.i(3671642),l=e.i(9992076),c=e.i(3869281),d=e.i(4367648);let u=(0,r.createContext)({disabled:!1,name:"",required:!1,selectedValue:"",setSelected:()=>{},type:"radio"});function p(e){let r,{children:l,className:c,direction:p="column",disabled:m,gap:g=3,label:h,name:f,onChange:x,required:v,showLabel:j,type:y,value:b}=e,N=(0,n.useDisabled)()||m,S=(0,a.useId)("choicebox-"),w=(0,a.useId)("choicebox-name-");return r={name:f??w,disabled:N,required:v??!1,type:y,setSelected:x,selectedValue:b},(0,t.jsx)(u.Provider,{value:r,children:(0,t.jsxs)("div",{"aria-label":j?void 0:h,"aria-labelledby":j?S:void 0,"aria-multiselectable":"checkbox"===y,"aria-required":v??!1,className:(0,i.clsx)(d.default["choicebox-group"],c),role:"radio"===y?"radiogroup":"group",children:[j?(0,t.jsx)(o.Label,{bypassCasing:!0,id:S,value:h}):null,(0,t.jsx)(s.Stack,{as:"ul",direction:p,gap:g,justify:"stretch",children:l})]})})}u.displayName="ChoiceboxContext",p.Item=function(e){let{children:n,className:a,contentClassName:o,description:p=null,disabled:m,title:g,value:h,"data-testid":f,optionClassName:x,titleDescriptionClassName:v,...j}=e,{type:y,selectedValue:b,setSelected:N,disabled:S,name:w}=(0,r.useContext)(u),I="radio"===y?b===h:b.includes(h),k=S||m,C=(0,r.useCallback)(e=>{"radio"===y?N(h):!e.target.checked&&b.includes(h)?N(b.filter(e=>e!==h)):e.target.checked&&N([...b,h])},[b,N,y,h]);return(0,t.jsxs)(s.Stack,{"aria-selected":I,as:"label",className:(0,i.clsx)(d.default.choicebox,k&&d.default.disabled,I&&d.default.checked,a),"data-testid":f,flex:1,children:[(0,t.jsxs)(s.Stack,{align:"center",className:(0,i.clsx)(d.default.option,x),direction:"row",gap:6,justify:"space-between",children:[(0,t.jsxs)(s.Stack,{as:"span",gap:1,className:v,children:[(0,t.jsx)("span",{className:d.default.title,children:g}),(0,t.jsx)("span",{className:d.default.description,children:p})]}),"radio"===y?(0,t.jsx)(l.Radio,{checked:I,className:d.default.radio,disabled:k,iconClassName:d.default.icon,inputClassName:d.default.input,name:w,onChange:C,value:h,...j}):(0,t.jsx)(c.Checkbox,{checked:I,className:d.default.checkbox,disabled:k,iconClassName:d.default.icon,name:w,onChange:C,value:h,...j})]}),I?(0,t.jsx)("span",{className:(0,i.clsx)(d.default.content,o),children:n}):null]})},e.s(["ChoiceboxGroup",0,p])},923772,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.75 2.75C6.75 2.05964 7.30964 1.5 8 1.5C8.69036 1.5 9.25 2.05964 9.25 2.75V3H6.75V2.75ZM5.25 3V2.75C5.25 1.23122 6.48122 0 8 0C9.51878 0 10.75 1.23122 10.75 2.75V3H12.9201H14.25H15V4.5H14.25H13.8846L13.1776 13.6917C13.0774 14.9942 11.9913 16 10.6849 16H5.31508C4.00874 16 2.92263 14.9942 2.82244 13.6917L2.11538 4.5H1.75H1V3H1.75H3.07988H5.25ZM4.31802 13.5767L3.61982 4.5H12.3802L11.682 13.5767C11.6419 14.0977 11.2075 14.5 10.6849 14.5H5.31508C4.79254 14.5 4.3581 14.0977 4.31802 13.5767Z" fill="currentColor"/>');e.s(["Trash",0,t])},5297527,e=>{"use strict";let t=["storage","ai","experimentation","observability","video","workflow","authentication","checks","messaging"],r=[...t,"logDrain","traceDrain","other"];e.s(["INTEGRATION_PROTOCOL_TYPES",0,r,"PRIMARY_INTEGRATION_PROTOCOL_TYPES",0,t,"integrationAdapterTags",0,["postgres","mysql","redis","kv","blob","edge-config","vector","libsql","sqlite"],"paidIntegrationScopes",0,["read-write:otel-endpoint","read-write:log-drain"]])},6838069,e=>{"use strict";var t=e.i(8042625),r=e.i(5297527);let i="/integrations",s="/marketplace",n="my-installations";function a(e){return`/${e}/~${i}`}function o(e){return!!("isPublic"in e&&e.isPublic)}function l(e){if(e.primaryProtocol)return e.primaryProtocol;if(e.supportedProtocols?.length===1)return e.supportedProtocols[0];if(e.supportedProtocols&&e.supportedProtocols.length>1){let t=e.supportedProtocols.filter(e=>r.PRIMARY_INTEGRATION_PROTOCOL_TYPES.includes(e));if(1===t.length)return t[0]}}function c(e){return e?e.startsWith("/")?e.slice(1):e:""}e.s(["MARKETPLACE_DOC_PAGE",0,"/docs","MY_INSTALLATIONS_ANCHOR",0,n,"formatMarketplaceBillingTotal",0,function(e){let t="number"==typeof e?Math.round(100*e)/100:e;return t?`$${t}`:""},"formatMarketplacePeriod",0,function(e,t){let r=new Date(e),i=new Date(t),s=r.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),n=i.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return`${s} - ${n}`},"getBrowseMarketplaceLink",0,function(e){let{category:r,search:i,expanded:n,teamSlugOrPublic:l,isPreview:c}=e,d=(0,t.encode)({category:r,search:i,expanded:n,isPreview:c});if(o(l))return`${s}${d}`;let u=[a(l.teamSlug),"marketplace"].join("/");return`${u}${d}`},"getInstallationDetailsLink",0,function(e){let{teamSlug:t,integrationSlug:r,configurationId:i,path:s}=e;return[a(t),r,i,s].filter(e=>!!e).join("/")},"getIntegrationDetailsLink",0,function(e){let{integrationSlug:r,isContentful:i,isConsole:l,teamSlugOrPublic:c,installationHash:d,isFromV0:u}=e,p=(0,t.encode)({console:l,v0:u||null});if(o(c))return`${s}/${r}${p}`;let m=[a(c.teamSlug),r,i?"custom":null].filter(e=>!!e).join("/");return`${m}${p}${d?`#${n}`:""}`},"getIntegrationInstallationLink",0,function(e,t,r,i){var s;return`/${e}/~/integrations/${t}/${r}${(s=i)?s.startsWith("/")?s:`/${s}`:""}`},"getMarketplaceInstallationsLink",0,function(e){let{teamSlug:r,search:i,category:s}=e,n=(0,t.encode)({category:s,search:i});return`${a(r)}${n}`},"getPermissionsLink",0,function(e){let{teamSlug:t,configurationId:r}=e;return`/dashboard/${t}/integrations/${r}/permissions`},"getProjectResourceDashboardLink",0,function(e,t){let{teamSlug:r,projectSlug:s,protocolType:n,path:a}=t;return[`/${r}/${s}${i}`,e.product.integration.slug,e.product.integrationConfigurationId,"resources",n||l(e.product)||"other",e.id,c(a)].filter(e=>!!e).join("/")},"getResourceDashboardLink",0,function(e,t){let{teamSlug:r,protocolType:i,path:s}=t;return[a(r),e.product.integration.slug,e.product.integrationConfigurationId,"resources",i||l(e.product)||"other",e.id,c(s)].filter(e=>!!e).join("/")},"isPublicMarketplacePage",0,o])},2295180,e=>{"use strict";var t=e.i(6695816);function r(e,t){let[r,i]=t;return Math.min(i,Math.max(r,e))}var i=e.i(4178896),s=e.i(6053993),n=e.i(6690779),a=e.i(9450593),o=e.i(6781954),l=e.i(3485824),c=e.i(9280211),d=e.i(6773559),u=e.i(31889),p=["PageUp","PageDown"],m=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],g={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},h="Slider",[f,x,v]=(0,d.createCollection)(h),[j,y]=(0,n.createContextScope)(h,[v]),[b,N]=j(h),S=t.forwardRef((e,s)=>{let{name:n,min:o=0,max:l=100,step:c=1,orientation:d="horizontal",disabled:g=!1,minStepsBetweenThumbs:h=0,defaultValue:x=[o],value:v,onValueChange:j=()=>{},onValueCommit:y=()=>{},inverted:N=!1,form:S,...w}=e,I=t.useRef(new Set),_=t.useRef(0),T="horizontal"===d,[D=[],E]=(0,a.useControllableState)({prop:v,defaultProp:x,onChange:e=>{let t=[...I.current];t[_.current]?.focus(),j(e)}}),P=t.useRef(D);function A(e,t){let i,{commit:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1},n=(String(c).split(".")[1]||"").length,a=r(Math.round((Math.round((e-o)/c)*c+o)*(i=Math.pow(10,n)))/i,[o,l]);E(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=[...e];return i[r]=t,i.sort((e,t)=>e-t)}(e,a,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,r)=>e[r+1]-t))>=t;return!0}(r,h*c))return e;{_.current=r.indexOf(a);let t=String(r)!==String(e);return t&&s&&y(r),t?r:e}})}return(0,u.jsx)(b,{scope:e.__scopeSlider,name:n,disabled:g,min:o,max:l,valueIndexToChangeRef:_,thumbs:I.current,values:D,orientation:d,form:S,children:(0,u.jsx)(f.Provider,{scope:e.__scopeSlider,children:(0,u.jsx)(f.Slot,{scope:e.__scopeSlider,children:(0,u.jsx)(T?k:C,{"aria-disabled":g,"data-disabled":g?"":void 0,...w,ref:s,onPointerDown:(0,i.composeEventHandlers)(w.onPointerDown,()=>{g||(P.current=D)}),min:o,max:l,inverted:N,onSlideStart:g?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let r=e.map(e=>Math.abs(e-t)),i=Math.min(...r);return r.indexOf(i)}(D,e);A(e,t)},onSlideMove:g?void 0:function(e){A(e,_.current)},onSlideEnd:g?void 0:function(){let e=P.current[_.current];D[_.current]!==e&&y(D)},onHomeKeyDown:()=>!g&&A(o,0,{commit:!0}),onEndKeyDown:()=>!g&&A(l,D.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:r}=e;if(!g){let e=p.includes(t.key)||t.shiftKey&&m.includes(t.key),i=_.current;A(D[i]+c*(e?10:1)*r,i,{commit:!0})}}})})})})});S.displayName=h;var[w,I]=j(h,{startEdge:"left",endEdge:"right",size:"width",direction:1}),k=t.forwardRef((e,r)=>{let{min:i,max:n,dir:a,inverted:l,onSlideStart:c,onSlideMove:d,onSlideEnd:p,onStepKeyDown:m,...h}=e,[f,x]=t.useState(null),v=(0,s.useComposedRefs)(r,e=>x(e)),j=t.useRef(void 0),y=(0,o.useDirection)(a),b="ltr"===y,N=b&&!l||!b&&l;function S(e){let t=j.current||f.getBoundingClientRect(),r=z([0,t.width],N?[i,n]:[n,i]);return j.current=t,r(e-t.left)}return(0,u.jsx)(w,{scope:e.__scopeSlider,startEdge:N?"left":"right",endEdge:N?"right":"left",direction:N?1:-1,size:"width",children:(0,u.jsx)(_,{dir:y,"data-orientation":"horizontal",...h,ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=S(e.clientX);c?.(t)},onSlideMove:e=>{let t=S(e.clientX);d?.(t)},onSlideEnd:()=>{j.current=void 0,p?.()},onStepKeyDown:e=>{let t=g[N?"from-left":"from-right"].includes(e.key);m?.({event:e,direction:t?-1:1})}})})}),C=t.forwardRef((e,r)=>{let{min:i,max:n,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...p}=e,m=t.useRef(null),h=(0,s.useComposedRefs)(r,m),f=t.useRef(void 0),x=!a;function v(e){let t=f.current||m.current.getBoundingClientRect(),r=z([0,t.height],x?[n,i]:[i,n]);return f.current=t,r(e-t.top)}return(0,u.jsx)(w,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:(0,u.jsx)(_,{"data-orientation":"vertical",...p,ref:h,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=v(e.clientY);o?.(t)},onSlideMove:e=>{let t=v(e.clientY);l?.(t)},onSlideEnd:()=>{f.current=void 0,c?.()},onStepKeyDown:e=>{let t=g[x?"from-bottom":"from-top"].includes(e.key);d?.({event:e,direction:t?-1:1})}})})}),_=t.forwardRef((e,t)=>{let{__scopeSlider:r,onSlideStart:s,onSlideMove:n,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:d,...g}=e,f=N(h,r);return(0,u.jsx)(c.Primitive.span,{...g,ref:t,onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(o(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):p.concat(m).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:(0,i.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),f.thumbs.has(t)?t.focus():s(e)}),onPointerMove:(0,i.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&n(e)}),onPointerUp:(0,i.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))})})}),T="SliderTrack",D=t.forwardRef((e,t)=>{let{__scopeSlider:r,...i}=e,s=N(T,r);return(0,u.jsx)(c.Primitive.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...i,ref:t})});D.displayName=T;var E="SliderRange",P=t.forwardRef((e,r)=>{let{__scopeSlider:i,...n}=e,a=N(E,i),o=I(E,i),l=t.useRef(null),d=(0,s.useComposedRefs)(r,l),p=a.values.length,m=a.values.map(e=>R(e,a.min,a.max)),g=p>1?Math.min(...m):0,h=100-Math.max(...m);return(0,u.jsx)(c.Primitive.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:d,style:{...e.style,[o.startEdge]:g+"%",[o.endEdge]:h+"%"}})});P.displayName=E;var A="SliderThumb",$=t.forwardRef((e,r)=>{let i=x(e.__scopeSlider),[n,a]=t.useState(null),o=(0,s.useComposedRefs)(r,e=>a(e)),l=t.useMemo(()=>n?i().findIndex(e=>e.ref.current===n):-1,[i,n]);return(0,u.jsx)(L,{...e,ref:o,index:l})}),L=t.forwardRef((e,r)=>{var n,a,o,d,p;let m,g,{__scopeSlider:h,index:x,name:v,...j}=e,y=N(A,h),b=I(A,h),[S,w]=t.useState(null),k=(0,s.useComposedRefs)(r,e=>w(e)),C=!S||y.form||!!S.closest("form"),_=(0,l.useSize)(S),T=y.values[x],D=void 0===T?0:R(T,y.min,y.max),E=(n=x,(a=y.values.length)>2?`Value ${n+1} of ${a}`:2===a?["Minimum","Maximum"][n]:void 0),P=_?.[b.size],$=P?(o=P,d=D,p=b.direction,g=z([0,50],[0,m=o/2]),(m-g(d)*p)*p):0;return t.useEffect(()=>{if(S)return y.thumbs.add(S),()=>{y.thumbs.delete(S)}},[S,y.thumbs]),(0,u.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[b.startEdge]:`calc(${D}% + ${$}px)`},children:[(0,u.jsx)(f.ItemSlot,{scope:e.__scopeSlider,children:(0,u.jsx)(c.Primitive.span,{role:"slider","aria-label":e["aria-label"]||E,"aria-valuemin":y.min,"aria-valuenow":T,"aria-valuemax":y.max,"aria-orientation":y.orientation,"data-orientation":y.orientation,"data-disabled":y.disabled?"":void 0,tabIndex:y.disabled?void 0:0,...j,ref:k,style:void 0===T?{display:"none"}:e.style,onFocus:(0,i.composeEventHandlers)(e.onFocus,()=>{y.valueIndexToChangeRef.current=x})})}),C&&(0,u.jsx)(M,{name:v??(y.name?y.name+(y.values.length>1?"[]":""):void 0),form:y.form,value:T},x)]})});$.displayName=A;var M=e=>{let r,{value:i,...s}=e,n=t.useRef(null),a=(r=t.useRef({value:i,previous:i}),t.useMemo(()=>(r.current.value!==i&&(r.current.previous=r.current.value,r.current.value=i),r.current.previous),[i]));return t.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(a!==i&&t){let r=new Event("input",{bubbles:!0});t.call(e,i),e.dispatchEvent(r)}},[a,i]),(0,u.jsx)("input",{style:{display:"none"},...s,ref:n,defaultValue:i})};function R(e,t,i){return r(100/(i-t)*(e-t),[0,100])}function z(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let i=(t[1]-t[0])/(e[1]-e[0]);return t[0]+i*(r-e[0])}}e.s(["Range",0,P,"Root",0,S,"Thumb",0,$,"Track",0,D],2295180)},8017289,e=>{e.v({fullWidth:"slider-module__v9lqeq__fullWidth",outerWrapper:"slider-module__v9lqeq__outerWrapper",range:"slider-module__v9lqeq__range",root:"slider-module__v9lqeq__root",sliderWrapper:"slider-module__v9lqeq__sliderWrapper",thumb:"slider-module__v9lqeq__thumb",thumbFocused:"slider-module__v9lqeq__thumbFocused",track:"slider-module__v9lqeq__track"})},7048904,e=>{"use strict";var t=e.i(31889),r=e.i(2295180),i=e.i(9722978),s=e.i(6695816),n=e.i(3500331),a=e.i(3671642),o=e.i(2630955),l=e.i(9544652),c=e.i(8017289);let d="production"!==o.VERCEL_ENV;e.s(["Slider",0,function(e){let{value:o,onValueChange:u,min:p=0,max:m=100,step:g=1,showStartInput:h,showEndInput:f,label:x,disabled:v,onValueCommit:j,bypassCasing:y,fullWidth:b}=e,N=(0,l.useDisabled)()||v,S=(0,s.useRef)(null),w=(0,s.useId)(),[I,k]=(0,s.useState)(!1),[C,_]=(0,s.useState)(!1);return!function(e){let[t,r]=(0,s.useState)(!1),[i,n]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{let t=e.current;for(;t?.parentNode;){if("FORM"===t.parentNode.nodeName){r(!0);break}t=t.parentNode}n(!0)},[e]),d&&!t&&i)throw Error("Slider must be wrapped in a form element")}(S),(0,t.jsxs)("div",{className:c.default.outerWrapper,ref:S,children:[x?(0,t.jsx)(a.Label,{bypassCasing:y,id:w,value:x}):null,(0,t.jsxs)("div",{className:c.default.sliderWrapper,children:[h?(0,t.jsx)(n.Input,{"aria-label":"Starting range value",disabled:N,id:w,onChange:e=>{let t=[Number(e.target.value)];o[1]&&t.push(o[1]),u(t)},size:"small",value:String(o[0])}):null,(0,t.jsxs)(r.Root,{className:(0,i.clsx)(c.default.root,{[String(c.default.fullWidth)]:b}),disabled:N,max:m,min:p,onValueChange:u,onValueCommit:j,step:g,value:o,children:[(0,t.jsx)(r.Track,{className:c.default.track,children:(0,t.jsx)(r.Range,{className:c.default.range})}),(0,t.jsx)(r.Thumb,{className:(0,i.clsx)(c.default.thumb,{[String(c.default.thumbFocused)]:I}),onMouseDown:()=>k(!0),onMouseUp:()=>k(!1)}),o.length>1?(0,t.jsx)(r.Thumb,{className:(0,i.clsx)(c.default.thumb,{[String(c.default.thumbFocused)]:C}),onMouseDown:()=>_(!0),onMouseUp:()=>_(!1)}):null]}),f?(0,t.jsx)(n.Input,{"aria-label":"Ending range value",disabled:N,id:h?void 0:w,onChange:e=>{let t=[Number(e.target.value)];o[0]&&t.unshift(o[0]),u(t)},size:"small",typeName:"number",value:String(o[1])}):null]})]})}])},3584802,e=>{"use strict";var t;let r=(t=e=>`/${e.params.teamSlug}/~/integrations/checkout/${e.params.integrationSlug}`,e=>{let r=Object.entries(e.searchParams||{}).reduce((e,t)=>{let[r,i]=t;return null!=i&&(e[r]=i),e},{}),i=t(e),s=i.startsWith("/")?i.substring(1):i;if(Object.entries(r).length>0){let e=new URLSearchParams(r).toString();return`/${s}?${e}`}return`/${s}`});e.s(["getIntegrationCheckoutUrl",0,function(e){return r({...e,searchParams:{...e.searchParams,nonce:Date.now().toString(36)}})}],3584802)},397094,e=>{"use strict";e.s(["buildOnMouseDown",0,function(e){return t=>{new URL(String(e.href),window.location.href).origin!==window.location.origin||0!==t.button||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||(t.preventDefault(),e.router.push(String(e.href)))}}])},2521731,e=>{"use strict";var t=e.i(2704354);function r(e){let t=e.toLowerCase().replace("-","").replace(" ","");return!(t.length<2)&&["kv","keyvalue"].some(e=>e.startsWith(t)||t.startsWith(e))}function i(e){let t=e.toLowerCase().replace(/\s/g,"");return["postgres","postgresql","postgress","postgressql"].some(e=>e.startsWith(t)||t.startsWith(e))}e.s(["integrationMatchesSearch",0,function(e,t){if(!t.trim())return!0;let s=t.toLowerCase().trim(),n=e.products?.some(e=>{let n=e.name.toLowerCase().includes(s),a=e.tags?.some(e=>e===`tag_${s}`),o=r(t)&&(e.tags?.includes("redis")||e.tags?.includes("kv")),l=i(t)&&e.tags?.some(e=>e.toLowerCase().startsWith("postgres"));return n||a||o||l}),a=e.name.toLowerCase().includes(s);return n||a},"integrationPubliclyVisible",0,function(e){return(0,t.isMarketplaceIntegration)(e)?e.products.some(e=>"published"===e.reviewStatus):!0===e.public&&void 0!==e.approvedAt},"integrationSupportsLogDrains",0,function(e){return"scopes"in e&&e.scopes.includes("read-write:log-drain")},"searchMatchesKV",0,r,"searchMatchesLogDrains",0,function(e){let t=e.toLowerCase().replace("-","").replace(" ","");return!!("logdrain".startsWith(t)||"logdrains".startsWith(t)||"logs".startsWith(t))},"searchMatchesPostgres",0,i])},7594446,e=>{"use strict";var t=e.i(1717203),r=e.i(7557283);e.s(["useIntegrationPermissions",0,function(){let{can:e,isLoading:i}=(0,t.default)(),s=e(r.Action.Read,r.Resource.IntegrationConfigurationProjects);return{canReadProjects:s,canUpdateIntegrationConfiguration:e(r.Action.Update,r.Resource.IntegrationConfiguration),canCreateIntegrationConfiguration:e(r.Action.Create,r.Resource.IntegrationConfiguration),isLoading:i}}])},2454893,e=>{e.v({cardLink:"marketplace-integration-card-module__GWffEq__cardLink",descriptionWrapper:"marketplace-integration-card-module__GWffEq__descriptionWrapper",icon:"marketplace-integration-card-module__GWffEq__icon",integrationCard:"marketplace-integration-card-module__GWffEq__integrationCard"})},1282571,e=>{"use strict";var t=e.i(31889),r=e.i(9722978),i=e.i(9739627),s=e.i(4585051),n=e.i(5255926),a=e.i(2504781),o=e.i(57106),l=e.i(2704354),c=e.i(2454893),d=e.i(7553931),u=e.i(397094);function p(e){let{icon:r,name:n,size:a=36}=e;return(0,l.isContentfulIcon)(r)?(0,t.jsx)("div",{className:c.default.icon,children:(0,t.jsx)(i.Image,{alt:n,height:a,srcDark:`https:${r.fields.file.url}`,srcLight:`https:${r.fields.file.url}`,width:a})}):(0,t.jsx)(s.Avatar,{className:c.default.icon,hash:r,size:a})}e.s(["MarketplaceIntegrationCard",0,function(e){let{Actions:i,children:s,href:n,title:a,icon:l,className:m,"data-testid":g,disabled:h}=e,f=(0,d.useRouter)();return(0,t.jsxs)("div",{className:(0,r.clsx)(m,c.default.integrationCard),children:[(0,t.jsxs)("div",{className:(0,r.clsx)("flex flex-row items-stretch justify-between gap-4 flex-initial",c.default.descriptionWrapper),children:[(0,t.jsxs)("div",{className:(0,r.clsx)("flex flex-row items-center justify-start gap-3 flex-initial",c.default.descriptionWrapper),children:[(0,t.jsx)(p,{icon:l,name:a}),s]}),i]}),h?null:(0,t.jsx)(o.Link,{"aria-label":`Open ${a}`,className:c.default.cardLink,"data-testid":g,href:n,onMouseDown:(0,u.buildOnMouseDown)({href:n,router:f})})]})},"MarketplaceIntegrationCardIcon",0,p,"MarketplaceIntegrationCardPlaceholder",0,function(e){let{children:i,Action:s,className:o}=e;return(0,t.jsx)("div",{className:(0,r.clsx)(o,c.default.integrationCard),children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial w-full",children:[(0,t.jsx)(n.Skeleton,{height:36,rounded:!0,width:36}),i]}),s??(0,t.jsx)(a.Button,{size:"small",type:"secondary",children:(0,t.jsx)(n.Skeleton,{height:16,width:30})})]})})}])},4325157,e=>{"use strict";var t=e.i(7909933),r=e.i(3559248);let i=(0,r.createServerReference)("7fcb241471c42d7d623e688208c2680bec610da08f",r.callServer,void 0,r.findSourceMapURL,"findManyPrivateMarketplaceIntegrationsByProduct");var s=e.i(2704354),n=e.i(9668517);e.s(["useMarketplaceIntegrations",0,e=>{let{protocolType:r}=e,a=(0,n.useTeamSlug)();return(0,t.default)(()=>(0,s.getMarketplaceIntegrationsApiUrl)({teamIdOrSlug:a??null,protocolType:r}),async e=>e&&a?i({protocolType:r,teamIdOrSlug:a}):[])}],4325157)},4110479,e=>{"use strict";var t=e.i(31889),r=e.i(6695816);let i=(0,r.createContext)(null);e.s(["DrainModalProvider",0,e=>{let{children:s,initialResource:n}=e,[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(n),p=(0,r.useCallback)((e,t)=>{c(e),u(t),o(!0)},[]),m=(0,r.useCallback)(()=>{c(null),u(n),o(!1)},[n]),g=(0,r.useMemo)(()=>({isOpen:a,setIsOpen:o,drain:l,resource:d,openDrain:p,closeModal:m}),[a,l,d,m,p]);return(0,t.jsx)(i.Provider,{value:g,children:s})},"useDrainModalContext",0,()=>{let e=(0,r.useContext)(i);if(null===e)throw Error("useDrainModal must be used within a DrainModalProvider");return e},"useOptionalDrainModalContext",0,()=>(0,r.useContext)(i)])},5644820,e=>{"use strict";var t=e.i(4828269),r=function(e,r,i){if(e&&"reportValidity"in e){var s=(0,t.get)(i,r);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},i=function(e,t){var i=function(i){var s=t.fields[i];s&&s.ref&&"reportValidity"in s.ref?r(s.ref,i,e):s.refs&&s.refs.forEach(function(t){return r(t,i,e)})};for(var s in t.fields)i(s)},s=function(e,r){r.shouldUseNativeValidation&&i(e,r);var s={};for(var n in e){var a=(0,t.get)(r.fields,n);(0,t.set)(s,n,Object.assign(e[n],{ref:a&&a.ref}))}return s},n=function(e,r){for(var i={};e.length;){var s=e[0],n=s.code,a=s.message,o=s.path.join(".");if(!i[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];i[o]={message:l.message,type:l.code}}else i[o]={message:a,type:n};if("unionErrors"in s&&s.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),r){var c=i[o].types,d=c&&c[s.code];i[o]=(0,t.appendErrors)(o,r,i,n,d?[].concat(d,s.message):s.message)}e.shift()}return i};e.s(["zodResolver",0,function(e,t,r){return void 0===r&&(r={}),function(a,o,l){try{return Promise.resolve(function(s,n){try{var o=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](a,t)).then(function(e){return l.shouldUseNativeValidation&&i({},l),{errors:{},values:r.rawValues?a:e}})}catch(e){return n(e)}return o&&o.then?o.then(void 0,n):o}(0,function(e){return{values:{},errors:e.isEmpty?{}:s(n(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)}}))}catch(e){return Promise.reject(e)}}}],5644820)},2199694,e=>{"use strict";e.s(["isCreateFlow",0,function(e){return"mode"in e&&"create"===e.mode},"isUpdateFlow",0,function(e){return"mode"in e&&"update"===e.mode}])},5263903,(e,t,r)=>{"use strict";let i="[a-fA-F\\d:]",s=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${i})|(?<=${i})(?=\\s|$))`:"",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",o=`
(?:
(?:${a}:){7}(?:${a}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${a}:){6}(?:${n}|:${a}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${a}:){5}(?::${n}|(?::${a}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${a}:){4}(?:(?::${a}){0,1}:${n}|(?::${a}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${a}:){3}(?:(?::${a}){0,2}:${n}|(?::${a}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${a}:){2}(?:(?::${a}){0,3}:${n}|(?::${a}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${a}:){1}(?:(?::${a}){0,4}:${n}|(?::${a}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${a}){0,5}:${n}|(?::${a}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),l=RegExp(`(?:^${n}$)|(?:^${o}$)`),c=RegExp(`^${n}$`),d=RegExp(`^${o}$`),u=e=>e&&e.exact?l:RegExp(`(?:${s(e)}${n}${s(e)})|(?:${s(e)}${o}${s(e)})`,"g");u.v4=e=>e&&e.exact?c:RegExp(`${s(e)}${n}${s(e)}`,"g"),u.v6=e=>e&&e.exact?d:RegExp(`${s(e)}${o}${s(e)}`,"g"),t.exports=u},3775629,(e,t,r)=>{"use strict";let i=e.r(5263903),s=e.r(6881271);t.exports=e=>{e={strict:!0,...e};let t=`(?:(?:[a-z]+:)?//)${e.strict?"":"?"}`,r=i.v4().source,n=`(?:\\.${e.strict?"(?:[a-z\\u00a1-\\uffff]{2,})":`(?:${s.sort((e,t)=>t.length-e.length).join("|")})`})\\.?`,a=`(?:${t}|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${r}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*${n})(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return e.exact?RegExp(`(?:^${a}$)`,"i"):RegExp(a,"ig")}},7662235,1094129,e=>{"use strict";var t=e.i(31889),r=e.i(4828269),i=e.i(9957872),s=e.i(248550),n=e.i(4535059),a=e.i(4524395),o=e.i(2640326),l=e.i(6401841),c=e.i(6695816),d=e.i(3758860),u=e.i(4110479);let p=[{value:"logs",protocol:"logDrain",icon:s.Logs,title:"Logs",description:"Runtime, build and static logs"},{value:"traces",protocol:"traceDrain",icon:n.Traces,title:"Traces",description:"Distributed tracing data"},{value:"speed_insights",protocol:null,icon:a.StopwatchFast,title:"Speed Insights",description:"Performance metrics"},{value:"analytics",protocol:null,icon:o.Analytics,title:"Web Analytics",description:"Page views and custom events"}];e.s(["chooseDrainDataStep",0,{title:"Choose data to drain",component:function(){let{watch:e,setValue:s,resetField:n,register:a,clearErrors:o,formState:{errors:m}}=(0,r.useFormContext)(),g=(0,u.useOptionalDrainModalContext)(),h=g?.resource,f=e("drainType"),x=e("mode");return(0,c.useEffect)(()=>{a("drainType",{required:"required"})},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.ChoiceboxGroup,{className:"pt-4",direction:"column",label:"Choose data type",type:"radio",value:f??"",onChange:e=>{s("drainType",e),o("drainType"),"create"!==x||h?(n("delivery.type"),n("delivery.endpoint")):(s("delivery.type","traces"===e?"otlphttp":"http"),s("delivery.endpoint","traces"===e?{traces:""}:"")),n("delivery.encoding"),n("filters.log.sources"),n("filters.deployment.environments")},children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:p.filter(e=>!h||e.protocol&&"integration"===h.type&&(0,d.isProtocolSupported)(h.product,e.protocol)).map(e=>{let r=e.icon;return(0,t.jsx)(i.ChoiceboxGroup.Item,{value:e.value,title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r,{size:16}),e.title]}),description:e.description},e.value)})})}),m.drainType?.message&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)(l.Stop,{size:14,color:"red-700"}),(0,t.jsx)("p",{className:"text-copy-14 text-red-900",children:m.drainType.message})]})]})},getFieldsToValidate:()=>["drainType"],getIsNextEnabled:()=>!0,getSuffix:function(e,r){if(r)return null;let i=(()=>{switch(e){case"traces":return"Traces";case"logs":return"Logs";case"analytics":return"Web Analytics";case"speed_insights":return"Speed Insights"}})();return(0,t.jsx)("span",{className:"text-copy-14 text-gray-900",children:i})}}],7662235),e.i(3512434);var m=e.i(9835407),g=e.i(3775629);let h=m.z.enum(["production","preview"]),f=m.z.object({type:m.z.literal("head_sampling"),env:m.z.union([h,m.z.literal("all")]).transform(e=>"all"===e?void 0:e).optional(),rate:m.z.number().min(0,"Sampling rate must be between 0 and 100%").max(1,"Sampling rate must be between 0 and 100%"),requestPath:m.z.string().optional().transform(e=>""===e?void 0:e)}),x=m.z.string().refine(e=>e.startsWith("https://"),{message:"URL must start with https://"}).refine(e=>(0,g.default)({exact:!0}).test(e),{message:"Must be a valid URL"}),v=m.z.object({type:m.z.literal("http"),endpoint:x,encoding:m.z.enum(["json","ndjson"]),headers:m.z.record(m.z.string()),secret:m.z.union([m.z.string(),m.z.object({kind:m.z.literal("INTEGRATION_SECRET")})]).optional(),compression:m.z.enum(["gzip","none"]).optional()}),j=m.z.object({type:m.z.literal("otlphttp"),endpoint:m.z.object({traces:x}),encoding:m.z.enum(["proto","json"]),headers:m.z.record(m.z.string()),secret:m.z.union([m.z.string(),m.z.object({kind:m.z.literal("INTEGRATION_SECRET")})]).optional()}),y=m.z.discriminatedUnion("type",[v,j]),b=m.z.enum(["lambda","edge","static","external","build","firewall","redirect"]),N=m.z.enum(["logs","traces","analytics","speed_insights"]),S=m.z.union([m.z.object({kind:m.z.literal("integration"),resourceId:m.z.string().optional(),integrationId:m.z.string().optional(),integrationConfigurationId:m.z.string().optional()}),m.z.object({kind:m.z.literal("self-served")})]),w=m.z.object({log:m.z.object({sources:m.z.array(b)}),deployment:m.z.object({environments:m.z.array(h)})}),I=m.z.object({name:m.z.string().trim().min(1,"Drain name is required"),projects:m.z.enum(["all","some"]),drainType:N,delivery:y.optional(),sampling:m.z.array(f).max(10,"You can configure up to 10 sampling rules").optional(),projectIds:m.z.array(m.z.string()).optional(),filters:w,source:S.optional(),mode:m.z.literal("create")}),k=m.z.object({name:m.z.string().trim().min(1,"Drain name is required").optional(),projects:m.z.enum(["all","some"]).optional(),drainType:N,delivery:y.optional(),sampling:m.z.array(f).optional(),projectIds:m.z.array(m.z.string()).optional(),status:m.z.enum(["enabled","disabled"]).optional(),filters:w.optional(),source:S.optional(),mode:m.z.literal("update")}),C=m.z.discriminatedUnion("mode",[I,k]).refine(e=>"some"!==e.projects||e.projectIds&&e.projectIds.length>0,{message:"At least one project must be selected when choosing specific projects",path:["projectIds"]}).refine(e=>"logs"!==e.drainType||Number(e.filters?.log?.sources.length)>0,{message:"At least one source must be selected when draining logs",path:["filters.log.sources"]});e.s(["DrainFormSchema",0,C,"httpUrl",0,x,"sourceLabelMap",0,{lambda:"Functions",edge:"Edge Functions",static:"Static Files",external:"Rewrites",build:"Builds",firewall:"Firewall",redirect:"Redirects"}],1094129)},1733572,e=>{"use strict";let t={logs:"Logs",traces:"Traces",analytics:"Web Analytics",speed_insights:"Speed Insights"};e.s(["getDrainType",0,function(e){return e.schemas?.trace?"traces":e.schemas?.analytics?"analytics":e.schemas?.speed_insights?"speed_insights":"logs"},"getDrainTypeLabel",0,function(e){return t[e]}])},3614887,9572009,8249103,3456281,4789955,5664328,e=>{"use strict";let t;var r=e.i(31889),i=e.i(3500331),s=e.i(3869281),n=e.i(7048904),a=e.i(6401841),o=e.i(2565125),l=e.i(2098824),c=e.i(1094129),d=e.i(1733572),u=e.i(4828269),p=e.i(6695816),m=e.i(6060673);let g=(0,p.createContext)(null),h=()=>(0,p.useContext)(g);e.s(["SheetContainerContext",0,g,"useSheetContainer",0,h],9572009);var f=e.i(5323212),x=e.i(3169345),v=e.i(8161149),j=e.i(2504781),y=e.i(5468328),b=e.i(923772),N=e.i(5169576);function S(){let{register:e,watch:t,setValue:s,formState:{errors:n}}=(0,u.useFormContext)(),o=t("filters.deployment.environments"),l=0===o.length||2===o.length,c=Array.isArray(n.sampling)?n.sampling[0]?.rate?.message:void 0,{fields:d,append:p,remove:m}=(0,u.useFieldArray)({name:"sampling"});return(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,r.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Sampling"}),0===d.length?(0,r.jsx)("div",{className:"flex flex-col items-center justify-start gap-4 flex-initial mt-1.5",children:(0,r.jsx)(v.EmptyState.Root,{secondary:!0,title:"No sampling rules configured",description:"Configure rules to set sampling rates by environment or path prefix.",children:(0,r.jsx)(j.Button,{onClick:()=>p({type:"head_sampling",env:void 0,rate:1}),type:"secondary",typeName:"button",children:"Add Sampling Rule"})})}):(0,r.jsxs)(x.Table,{className:"border-separate border-spacing-0 mt-1.5",children:[(0,r.jsx)(x.Table.Header,{removeSpacing:!0,children:(0,r.jsxs)(x.Table.Row,{children:[(0,r.jsx)(x.Table.Head,{className:"border-t border-l rounded-tl border-solid border-gray-200 text-xs pl-4",children:"Environment"}),(0,r.jsx)(x.Table.Head,{className:"border-t border-solid border-gray-200 text-xs",children:"Rate"}),(0,r.jsx)(x.Table.Head,{className:"border-t border-solid border-gray-200 text-xs",children:(0,r.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial",children:["Request Path Prefix",(0,r.jsx)(y.Tooltip,{text:"The prefix of the request path to sample or the entire request path",children:(0,r.jsx)(N.Information,{size:12,color:"gray-700"})})]})}),(0,r.jsx)(x.Table.Head,{className:"border-t border-r rounded-tr border-solid border-gray-200 text-xs"})]})}),(0,r.jsxs)(x.Table.Body,{className:"[&_td:first-child]:rounded-l-none [&_td:last-child]:rounded-r-none",children:[d.map((a,o)=>{let l=e(`sampling.${o}.env`);e(`sampling.${o}.rate`,{valueAsNumber:!0});let c=t(`sampling.${o}.rate`),d=Array.isArray(n.sampling)?n.sampling[o]?.rate?.message:void 0;return(0,r.jsxs)(x.Table.Row,{children:[(0,r.jsx)(x.Table.Cell,{className:"border-l border-b border-solid border-gray-200 rounded-none py-4 pl-4",children:(0,r.jsx)(f.Select,{size:"small",ref:l.ref,name:l.name,value:t(`sampling.${o}.env`)??"all",onChange:e=>{s(`sampling.${o}.env`,e.target.value)},selectClassName:"capitalize",children:(0,r.jsx)(w,{})})}),(0,r.jsx)(x.Table.Cell,{className:"border-b border-solid border-gray-200 rounded-none max-w-20 py-4",children:(0,r.jsx)(i.Input,{error:d,showErrorMessage:!1,className:"[&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",suffix:"%","aria-labelledby":`sampling-rate-${o}`,typeName:"number",min:"0",max:"100",step:"1",size:"small",defaultValue:"100",style:{width:"100px"},value:"number"==typeof c?`${100*c}`:c,onChange:e=>{let t=e.target.valueAsNumber;"number"!=typeof t||Number.isNaN(t)?s(`sampling.${o}.rate`,t,{shouldDirty:!0}):s(`sampling.${o}.rate`,t/100,{shouldDirty:!0})}})}),(0,r.jsx)(x.Table.Cell,{className:"border-b border-solid border-gray-200 rounded-none py-4",children:(0,r.jsx)(i.Input,{"aria-labelledby":`request-path-${o}`,placeholder:`/api/example-${o+1}`,...e(`sampling.${o}.requestPath`),size:"small"})}),(0,r.jsx)(x.Table.Cell,{className:"border-b border-r border-solid border-gray-200 rounded-none py-4",children:(0,r.jsx)(j.Button,{size:"small",type:"tertiary",onClick:()=>m(o),"aria-label":"Remove sampling config",children:(0,r.jsx)(b.Trash,{color:"gray-700",size:16})})})]},a.id)}),(0,r.jsx)(x.Table.Row,{children:(0,r.jsx)(x.Table.Cell,{colSpan:4,className:"border-b border-l border-r border-solid border-gray-200 !rounded-bl !rounded-br py-4 pl-4",children:(0,r.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial",children:(0,r.jsx)(y.Tooltip,{text:"You can configure up to 10 sampling rules",disableTriggers:d.length<10,className:"",children:(0,r.jsx)(j.Button,{onClick:()=>p({type:"head_sampling",env:l?"all":o[0],rate:1}),size:"small",type:"tertiary",disabled:d.length>=10,typeName:"button",children:"Add Sampling Rule"})})})})})]})]}),c&&(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,r.jsx)(a.Stop,{size:14,color:"red-700"}),(0,r.jsx)("p",{className:"text-copy-14 text-red-900",children:c})]})]})}function w(){let{watch:e}=(0,u.useFormContext)(),t=e("filters.deployment.environments");return 0===t.length||2===t.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("option",{value:"all",children:"All Environments"}),(0,r.jsx)("option",{value:"production",children:"Production"}),(0,r.jsx)("option",{value:"preview",children:"Preview"})]}):(0,r.jsx)(r.Fragment,{children:t.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})}var I=e.i(4597921);let k=["lambda","edge","static","external","build","firewall","redirect"];function C(){let{watch:e,setValue:t,register:i,formState:{errors:n}}=(0,u.useFormContext)(),a=e("filters.log.sources"),o=(0,p.useCallback)(e=>{a.includes(e)?t("filters.log.sources",a.filter(t=>t!==e),{shouldDirty:!0}):t("filters.log.sources",[...a,e],{shouldDirty:!0})},[a,t]);return(0,p.useEffect)(()=>{i("filters.log.sources",{required:"required"})},[i]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,r.jsx)(l.FormTitleDescription,{description:"Logs from the selected sources will be forwarded to your drain. At least one must be selected.",title:"Sources"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3 @md-page:grid-cols-3",children:k.map(e=>(0,r.jsx)(s.Checkbox,{className:"cursor-pointer rounded-md border border-gray-200 p-3 hover:border-gray-300",checked:a.includes(e),onChange:()=>o(e),children:c.sourceLabelMap[e]},e))}),(0,r.jsx)(E,{error:n.filters?.log?.sources?.message})]}),(0,r.jsx)(D,{})]})}function _(){return(0,r.jsx)(r.Fragment,{})}function T(){let{setValue:e,watch:t,register:i}=(0,u.useFormContext)(),s=t("sampling",[{type:"head_sampling",rate:1}]);return(0,p.useEffect)(()=>{i("sampling")},[]),(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,r.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Sampling"}),(0,r.jsxs)("span",{style:{minWidth:30,fontSize:"12px"},children:[Math.round((s?.[0]?.rate??1)*100),"%"]}),(0,r.jsx)("div",{style:{maxWidth:"200px",flex:1},children:(0,r.jsx)(n.Slider,{max:100,min:1,onValueChange:t=>{e("sampling",[{type:"head_sampling",rate:t[0]/100}],{shouldDirty:!0})},value:[Math.round((s?.[0]?.rate??1)*100)]})})]}),(0,r.jsx)("p",{className:"text-copy-14 text-gray-900",children:"A percentage of data matching the sampling rate will be sent to your drain from the selected environments."})]})}function D(){let{watch:e,setValue:t,formState:{errors:i}}=(0,u.useFormContext)(),n=e("filters.deployment.environments"),a=(e,r)=>{r?t("filters.deployment.environments",[...n,e],{shouldDirty:!0}):t("filters.deployment.environments",n.filter(t=>t!==e),{shouldDirty:!0})};return(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,r.jsx)(l.FormTitleDescription,{description:"Select which environments to drain from.",title:"Environment"}),(0,r.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-6 flex-initial",children:[(0,r.jsx)(s.Checkbox,{checked:n.includes("production"),onChange:e=>{a("production",e.target.checked)},children:"Production"}),(0,r.jsx)(s.Checkbox,{checked:n.includes("preview"),onChange:e=>{a("preview",e.target.checked)},children:"Preview"})]}),(0,r.jsx)(E,{error:i.filters?.deployment?.environments?.message})]})}function E(e){let{error:t}=e;return t?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(a.Stop,{size:14,color:"red-700"}),(0,r.jsx)("p",{className:"text-copy-14 text-red-900",children:t})]}):null}e.s(["configureDrainStep",0,{title:"Configure the drain",component:function(){let{watch:e,setValue:t,register:s,clearErrors:n,formState:{errors:a}}=(0,u.useFormContext)(),l=e("drainType"),c="logs"===l||"traces"===l,g=(0,I.useServerFlag)("drains-advanced-sampling",!1)&&c,f=e("projects"),x=e("projectIds")||[],v=h();(0,p.useEffect)(()=>{s("projects",{required:"required"}),s("projectIds")},[]);let{data:j,isLoading:y}=(0,m.useProjects)(x.length>0?x:void 0),b=j||[],[N,w]=(0,p.useState)([]);return(0,r.jsx)("div",{className:"pt-4 max-w-2xl",children:(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,r.jsx)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial w-full",children:(0,r.jsx)(i.Input,{label:"Drain Name",id:"drain-name",placeholder:`My ${(0,d.getDrainTypeLabel)(l)} drain`,width:"100%",className:"flex-1",error:a.name?.message,...s("name")})}),(0,r.jsx)(o.ProjectSelector,{error:a.projects?.message||a.projectIds?.message,projects:b,projectType:"all"===f?o.ProjectTypes.ALL:o.ProjectTypes.SOME,onProjectsUpdated:e=>{t("projectIds",e.map(e=>e.id),{shouldDirty:!0}),n("projectIds"),w(e)},onProjectTypeUpdated:e=>{n("projectIds"),t("projects",e===o.ProjectTypes.ALL?"all":"some",{shouldDirty:!0}),e===o.ProjectTypes.ALL?(b.length>0&&w(b),t("projectIds",void 0,{shouldDirty:!0})):t("projectIds",(N.length>0?N:b).map(e=>e.id),{shouldDirty:!0})},title:"Projects",description:"Choose which projects should send data to the specified endpoint.",disabled:!1,isLoading:y&&0===b.length,loadingCount:x.length,comboboxListContainer:v}),"logs"===l&&(0,r.jsx)(C,{}),"traces"===l&&(0,r.jsx)(_,{}),g?(0,r.jsx)(S,{}):(0,r.jsx)(T,{})]})})},getFieldsToValidate:()=>["name","projects","projectIds","filters.log.sources","filters.deployment.environments","sampling"],getIsNextEnabled:()=>!0}],3614887);var P=e.i(8436238),A=e.i(1114103),$=e.i(9334091),L=e.i(1906681),M=e.i(2455417),R=e.i(8735244),z=e.i(6607601),O=e.i(8225664),F=e.i(198667),q=e.i(6318858),U=e.i(4819890),B=e.i(1933683),H=e.i(3973638);let V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",G=(t=(e,t)=>{if(e<0||e>65536)throw RangeError('The value of "size" is out of range. It must be >= 0 && <= 65536. Received '+e);var r=new Uint8Array(e);return(globalThis.crypto.getRandomValues(r),t)?(setTimeout(()=>t(null,r),0),new Uint8Array):r},e=>new Promise(async(r,i)=>{Number.isInteger(e)?e<=0?i(Error("You must supply a length integer greater than zero")):t(e,(e,s)=>{let n;if(e)return i(e);let a=[];for(let e=0;e<s.length;e++){for(n=s[e];n>248;)try{n=t(1)[0]}catch(e){i(e)}a.push(V[n%V.length])}r(a.join(""))}):i(TypeError("You must supply a length integer to `uid-promise`."))}));async function W(e){return G(e)}e.s(["generateSecret",0,W],8249103);var K=e.i(6461317),Y=e.i(4062761),J=e.i(277234),Z=e.i(5338940);function Q(e){if(!e)throw Error("Drain type is required");switch(e){case"logs":return{log:{version:"v1"}};case"traces":return{trace:{version:"v1"}};case"analytics":return{analytics:{version:"v1"}};case"speed_insights":return{speed_insights:{version:"v1"}}}}e.s(["getDrainTypeFromDrain",0,function(e){return e.schemas?.log?"logs":e.schemas?.trace?"traces":e.schemas?.analytics?"analytics":e.schemas?.speed_insights?"speed_insights":"logs"},"getSchemaForDrainType",0,Q],3456281);let[X,ee]=(0,Y.default)(function(){let{team:e}=(0,Z.useTeam)(),[t,r]=(0,p.useState)({status:"idle"});return{validationState:t,validateEndpoint:async t=>{r({status:"validating"});try{let{delivery:i,drainType:s}=t,n=Q(s),a={type:i?.type||"http",endpoint:i?.endpoint||"",encoding:i?.encoding||"json",headers:i?.headers||{},...i?.secret&&{secret:i.secret}},o=await (0,J.fetchAPI)(`/v1/drains/test${e?.id?`?teamId=${e.id}`:""}`,{method:"POST",body:{schemas:n,delivery:a},returnStatus:!0,throwOnHTTPError:!1});if(o.status&&o.status>=200&&o.status<300&&o.body){let{status:e,statusCode:t}=o.body;if(e){if("success"===e)return r({status:"success",message:"Success: Your endpoint sent a 2xx status"}),!0;if("failure"===e){if(t)return r({status:"error",message:`Error: Your endpoint sent a ${t} status instead of 2xx, fix it and try again`}),!1;return r({status:"error",message:"Error: Your endpoint did not reply, fix it and try again"}),!1}}}return r({status:"error",message:"Unknown error, please contact support"}),!1}catch(e){return r({status:"error",message:"Unknown error, please contact support"}),!1}},resetValidation:()=>{r({status:"idle"})}}});function et(e){let{icon:t,onClick:i,successDuration:s=1e3,...n}=e,[a,o]=(0,p.useState)(!1),[l,c]=(0,p.useState)(!0),d=(0,p.useRef)(null),u=async()=>{c(!1),d.current&&clearTimeout(d.current),await i(),o(!0),d.current=setTimeout(()=>{o(!1)},s)};return(0,r.jsx)(j.Button,{...n,onClick:u,children:(0,r.jsxs)("div",{style:{position:"relative",height:16,width:16},children:[(0,r.jsx)("div",{className:`absolute inset-0 transition-all duration-150 ease-out ${l?"opacity-0 scale-50":!l&&a?"opacity-100 scale-100":"opacity-0 scale-50"}`,children:(0,r.jsx)(q.Check,{size:16})}),(0,r.jsx)("div",{className:`absolute inset-0 transition-all duration-150 ease-out ${l||!l&&!a?"opacity-100 scale-100":"opacity-0 scale-50"}`,children:t})]})})}e.s(["EndpointValidationProvider",0,X,"useEndpointValidationContext",0,ee],4789955);let er={http:[{value:"json",label:"JSON"},{value:"ndjson",label:"NDJSON"}],otlphttp:[{value:"json",label:"JSON"},{value:"proto",label:"Protobuf"}]},ei={input:e=>e?Object.entries(e).map(e=>{let[t,r]=e;return`${t}: ${r}`}).join("\n"):"",output(e,t,r){if(!e)return{};let i=e.split("\n").filter(e=>e.trim()),s=[],n=i.reduce((e,t,r)=>{let[i,...n]=t.split(":"),a=n.join(":"),o=es(i?.trim()||""),l=es(a?.trim()||"");return o&&l?e[o]=l:s.push(`Line ${r+1}: "${t}"`),e},{});return s.length>0?t("delivery.headers",{message:`Invalid header format: ${s.join(", ")}. Expected format: "Header-Name: Header-Value"`}):r("delivery.headers"),n}};function es(e){return e?e.replace(/""+/g,'"').replace(/''+/g,"'").replace(/^["']+|["']+$/g,""):e}e.s(["CustomEndpointEditor",0,function(){let e,t,s,{watch:n,setValue:o,register:l,setError:d,clearErrors:m,formState:{errors:g}}=(0,u.useFormContext)(),{validationState:h,validateEndpoint:x,resetValidation:v}=ee();(0,p.useEffect)(()=>()=>{m(),v()},[]);let b=n("delivery.headers"),N=n("delivery.type"),S=n("delivery.endpoint"),w=n("drainType"),[I,k]=(0,p.useState)(ei.input(b||{})),[C,_]=(0,p.useState)(I.length>0),[T,D]=(0,p.useState)(!1),E=n("delivery.secret");return"string"==typeof S?(e="https://your-endpoint.com/ingest",t="delivery.endpoint"):(e="https://your-otlp-endpoint.com/v1/traces",t="delivery.endpoint.traces"),(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial pt-4 max-w-2xl",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 @md-page:grid-cols-[3fr_1fr] @md-page:gap-2 @md-page:items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,r.jsx)(i.Input,{id:"drain-url",label:"URL",prefix:"POST",placeholder:e,width:"100%",...l(t,{onChange:()=>{v(),m(t)}})}),(0,r.jsx)(y.Tooltip,{desktopOnly:!0,text:"Send an example payload to your endpoint for testing",children:(0,r.jsx)(j.Button,{"aria-label":"Test endpoint",type:"secondary",typeName:"button",disabled:!(s="string"==typeof S?S:S?.traces)||!c.httpUrl.safeParse(s).success||h?.status==="validating",svgOnly:!0,onClick:()=>{x(n())},prefix:h?.status==="validating"?(0,r.jsx)(R.Spinner,{size:16}):(0,r.jsx)(U.PlayCircle,{size:16}),children:"Test"})})]}),(0,K.default)(g,`${t}.message`)&&(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,r.jsx)(a.Stop,{size:14,color:"red-700"}),(0,r.jsx)("p",{className:"text-copy-14 text-red-900",children:(0,K.default)(g,`${t}.message`)})]}),h&&"idle"!==h.status&&(0,r.jsx)("div",{className:"mt-2 flex items-center gap-2",children:"validating"===h.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.LoadingDots,{}),(0,r.jsx)("p",{className:"text-copy-13 text-gray-900",children:"Validating endpoint"})]}):(0,r.jsxs)(r.Fragment,{children:["success"===h.status?(0,r.jsx)(q.Check,{size:14,color:"green-700"}):(0,r.jsx)(a.Stop,{size:14,color:"red-700"}),(0,r.jsx)("p",{className:`text-copy-13 ${"success"===h.status?"text-green-900":"text-red-900"}`,children:h.message})]})})]}),(0,r.jsx)(f.Select,{label:"Encoding",placeholder:"Select encoding",...l("delivery.encoding"),children:er[N].map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),w&&(0,r.jsxs)("div",{className:"text-xs text-gray-900 text-right @md-page:text-right @sm-page:text-left",children:["Need help with the data format?"," ",(0,r.jsxs)("a",{href:{logs:"/docs/drains/reference/logs",traces:"/docs/drains/reference/traces",speed_insights:"/docs/drains/reference/speed-insights",analytics:"/docs/drains/reference/analytics"}[w],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["View"," ","speed_insights"===w?"Speed Insights":"analytics"===w?"Analytics":w.charAt(0).toUpperCase()+w.slice(1)," ","schema "]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,r.jsx)(i.Input,{label:(0,r.jsxs)(r.Fragment,{children:["Signature verification secret"," ",(0,r.jsxs)("span",{className:"text-gray-900 normal-case",children:["(optional,"," ",(0,r.jsx)("a",{href:"/docs/drains/security",target:"_blank",rel:"noopener noreferrer",className:"text-gray-900 hover:text-gray-700 underline",children:"How to use it"})]}),")"]}),id:"drain-secret",placeholder:"32-character secret",width:"100%",className:"font-mono tracking-wider",typeName:T?"text":"password",prefix:(0,r.jsx)(j.Button,{"aria-label":"Toggle password visibility",variant:"unstyled",svgOnly:!0,typeName:"button",onClick:()=>D(!T),className:"-ml-1",children:T?(0,r.jsx)(H.EyeOff,{size:16}):(0,r.jsx)(B.Eye,{size:16})}),prefixStyling:!1,suffix:(0,r.jsx)(O.CopyButton,{textToCopy:"string"==typeof E?E:"",label:"Copy secret",title:"Copy secret to clipboard",disabled:"string"!=typeof E||!E,variant:"unstyled",className:"-mr-1"}),suffixStyling:!1,...l("delivery.secret")}),(0,r.jsx)(et,{"aria-label":"Generate new secret",shape:"square",svgOnly:!0,type:"secondary",typeName:"button",icon:(0,r.jsx)(F.RefreshClockwise,{size:16}),onClick:async()=>{o("delivery.secret",await W(32),{shouldDirty:!0})}})]})}),(0,r.jsx)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:(0,r.jsx)(L.Toggle,{checked:C,id:"custom-headers",onChange:_,size:"medium",direction:"switch-first",children:(0,r.jsx)("p",{className:"text-copy-14",children:"Custom Headers"})})}),(0,r.jsx)(A.AnimatePresence,{initial:!1,children:C&&(0,r.jsx)(P.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut",opacity:{duration:.2}},children:(0,r.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,r.jsx)($.Textarea,{error:(0,K.default)(g,"delivery.headers.message"),"aria-labelledby":"Custom Headers (Optional)",className:"font-mono",onBlur:()=>{o("delivery.headers",ei.output(I,d,m),{shouldDirty:!0})},onChange:e=>k(e.target.value),placeholder:"Authorization: Bearer token X-Custom-Header: value",rows:3,value:I}),(0,r.jsxs)("p",{className:"text-copy-13 text-gray-900",children:["Format: Header-Name: Header-Value (one per line). The"," ",(0,r.jsx)(z.InlineCode,{children:"content-type"})," header is automatically added."]})]})})})})]})}],5664328)},4576858,3226981,4758962,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),i=e.i(4237893),s=e.i(6064230),n=e.i(762896),a=e.i(4828269),o=e.i(5664328);e.i(6887680);var l=e.i(6810699),c=e.i(3758860),d=e.i(9957872),u=e.i(4245131),p=e.i(8161149),m=e.i(5255926),g=e.i(5468328);e.i(8703064);var h=e.i(648779),f=e.i(4325157),x=e.i(1017032),v=e.i(9668517),j=e.i(3584802),y=e.i(109803),b=e.i(57106);function N(e){let{drainType:i}=e,s=(0,v.useTeamSlug)(),n="logs"===i?"logDrain":"traceDrain",{data:a,isLoading:o}=(0,f.useMarketplaceIntegrations)({protocolType:n}),{data:d,isLoading:p}=(0,l.useResourceList)({protocolType:n}),{data:g,isLoading:N}=(0,x.useConfigurations)({type:"provisioning",skipBillingData:!0,skip:!1}),S=(0,r.useMemo)(()=>{if(!a||!d||!g)return[];let e=[];for(let t of a)for(let r of t.products)(0,c.isProtocolSupported)(r,n)&&e.push({product:r,integration:t});return e},[a,d,g,n]);return o||p||N?(0,t.jsx)(u.Description,{title:(0,t.jsx)("h2",{className:"text-sm font-medium",children:"Available products"}),content:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[1,2].map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4 border border-gray-alpha-400 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,t.jsx)(m.Skeleton,{width:36,height:36,rounded:!0}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(m.Skeleton,{width:"80%",height:14,className:"mb-2"}),(0,t.jsx)(m.Skeleton,{width:"60%",height:12})]})]}),(0,t.jsx)(m.Skeleton,{width:60,height:32})]},e))})}):0!==S.length&&s?(0,t.jsx)(u.Description,{title:(0,t.jsx)("h2",{className:"text-sm font-medium",children:"Available products"}),content:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:S.map(e=>{let{product:r,integration:i}=e,n=(0,j.getIntegrationCheckoutUrl)({params:{integrationSlug:i.slug,teamSlug:s},searchParams:{productSlug:r.slug,cancelUrl:`${window.location.pathname}${window.location.search}`}});return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4 border border-gray-alpha-400 rounded-lg hover:border-gray-600 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"shrink-0",children:(0,t.jsx)(h.ProductIcon,{icon:r.iconUrl,size:"large"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium truncate",title:r.name,children:r.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600 truncate",title:i.name,children:i.name})]})]}),(0,t.jsx)(b.ButtonLink,{size:"small",type:"secondary",href:n,target:"_blank",rel:"noopener noreferrer",suffix:(0,t.jsx)(y.External,{}),children:"Install"})]},r.id)})})}):null}function S(){let{watch:e,setValue:i}=(0,a.useFormContext)(),s=e("source"),n=e("drainType"),o=s&&"resourceId"in s?s.resourceId??"":"",{data:f,isLoading:x}=(0,l.useResourceList)({protocolType:"traceDrain"}),{data:v,isLoading:j}=(0,l.useResourceList)({protocolType:"logDrain"}),y=(0,r.useMemo)(()=>{let e=[];return"traces"===n&&f?.stores?e.push(...f.stores.filter(e=>(0,c.isProtocolSupported)(e.product,"traceDrain"))):"logs"===n&&v?.stores&&e.push(...v.stores.filter(e=>(0,c.isProtocolSupported)(e.product,"logDrain"))),e},[f,v,n]);if(x||j)return(0,t.jsx)(u.Description,{title:(0,t.jsx)("h2",{className:"text-sm font-medium",children:"Installed products"}),content:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 border border-gray-alpha-400 rounded-lg",children:[(0,t.jsx)(m.Skeleton,{width:40,height:40,rounded:!0}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(m.Skeleton,{width:"80%",height:14,className:"mb-2"}),(0,t.jsx)(m.Skeleton,{width:"60%",height:12})]})]},e))})});let b="logs"===n||"traces"===n;return 0===y.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.EmptyState.Root,{title:"No Integrations Installed",description:"Add an integration that supports drains to get started."}),b&&(0,t.jsx)("div",{className:"flex flex-col gap-6 mt-6",children:(0,t.jsx)(N,{drainType:n})})]}):(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)(u.Description,{title:(0,t.jsx)("h2",{className:"text-sm font-medium",children:"Installed products"}),content:(0,t.jsx)(d.ChoiceboxGroup,{type:"radio",label:"Select resource",direction:"row",value:o,onChange:e=>{i("source",{kind:"integration",resourceId:e})},className:"[&>ul]:grid [&>ul]:grid-cols-2 [&>ul]:gap-3 [&_label>div>span:first-child]:overflow-hidden [&_label>div>span:first-child>span]:overflow-hidden",children:y.map(e=>(0,t.jsx)(d.ChoiceboxGroup.Item,{value:e.id,title:(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"shrink-0",children:(0,t.jsx)(h.ProductIcon,{icon:e.product.iconUrl,size:"large"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1 overflow-hidden",children:[(0,t.jsx)(g.Tooltip,{text:e.name,className:"block truncate",children:(0,t.jsx)("span",{className:"truncate text-sm font-medium block",children:e.name})}),(0,t.jsxs)("div",{className:"truncate text-sm text-gray-600",title:`${e.product.name}${e.billingPlan?.name?` - ${e.billingPlan.name}`:""}`,children:[e.product.name,e.billingPlan?.name?` - ${e.billingPlan.name}`:""]})]})]})},e.id))})}),b&&(0,t.jsx)(N,{drainType:n})]})}var w=e.i(7609806),I=e.i(1282571);function k(e){let{protocolType:r,limit:i=3,size:s=20}=e,{data:n,isLoading:a,error:o}=(0,f.useMarketplaceIntegrations)({protocolType:r});if(a||o||!n||0===n.length)return null;let l=n.map(e=>({uid:e.id,component:(0,t.jsx)(I.MarketplaceIntegrationCardIcon,{icon:e.icon,name:e.name,size:s})}));return(0,t.jsx)(w.AvatarGroup,{members:l,size:s,limit:i})}function C(e,r){if(r)return null;let i="logs"===e?"logDrain":"traces"===e?"traceDrain":null;return i?(0,t.jsx)(k,{protocolType:i}):null}e.s(["configureDestinationStep",0,{title:"Configure the destination",component:function(){let{watch:e,setValue:l}=(0,a.useFormContext)(),c=e("source"),d=e("mode"),u=e("drainType"),p=(0,r.useMemo)(()=>c?.kind==="integration"?"native-integrations":"custom",[c]),m=C(u,!1);return"update"===d&&c?.kind!=="integration"||"logs"!==u&&"traces"!==u?(0,t.jsx)(o.CustomEndpointEditor,{}):(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial pt-4 max-w-2xl",children:[(0,t.jsx)(i.Tabs,{selected:p,setSelected:e=>{"native-integrations"===e?l("source",{...c,kind:"integration"}):l("source",{...c,kind:"self-served"})},tabs:[{title:"Custom Endpoint",value:"custom",icon:(0,t.jsx)(s.Terminal,{size:16})},{title:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:["Native Integrations",m]}),value:"native-integrations",icon:(0,t.jsx)(n.LogoVercelFill,{size:16})}]}),"custom"===p?(0,t.jsx)(o.CustomEndpointEditor,{}):(0,t.jsx)(S,{})]})},getFieldsToValidate:e=>e.source?.kind==="integration"?["source","source.resourceId"]:["delivery.endpoint","delivery.encoding","delivery.headers","source"],getIsNextEnabled:e=>e.source?.kind!=="integration"||!!("resourceId"in e.source&&e.source.resourceId),getSuffix:C}],4576858);var _=e.i(9722978),T=e.i(2504781),D=e.i(4030453);e.s(["StepWrapper",0,function(e){let{children:r,onNext:i,onBack:s,isFirstStep:n=!1,isLastStep:a=!1,nextLabel:o="Next",isLoading:l=!1,isNextDisabled:c=!1,error:d}=e;return(0,t.jsxs)(t.Fragment,{children:[r,(0,t.jsxs)("div",{className:`flex flex-row items-stretch justify-start gap-2 flex-initial ${(0,_.default)(!a&&"pb-6")}`,children:[!n&&(0,t.jsx)(T.Button,{onClick:s,type:"secondary",typeName:"button",children:"Back"}),i&&(0,t.jsx)(T.Button,{loading:l,disabled:c,onClick:i,typeName:"button",children:o})]}),d&&a&&(0,t.jsx)(D.Error,{children:d})]})}],3226981);var E=e.i(4005781),P=e.i(9979783),A=e.i(5338940),$=e.i(319451),L=e.i(6060673);e.s(["useCreateDrain",0,function(e,t){let{team:r}=(0,A.useTeam)(),{data:i}=(0,L.useProject)(t),s=(0,$.getDrainsKey)({teamIdOrSlug:e,projectIdOrSlug:t,includeMetadata:!0}),{trigger:n,isMutating:a}=(0,E.default)(s,async(e,t)=>{let{arg:s}=t;if(!r?.id)throw Error("Team ID is required");let n={teamId:r.id,...i&&{projectId:i.id}};return(await (0,P.typedFetch)("/v1/drains","post",n,s,{throwOnHTTPError:!0})).body},{throwOnError:!0});return{createDrain:n,isCreating:a}}],4758962)},8404074,e=>{"use strict";var t=e.i(4005781),r=e.i(2111701),i=e.i(9979783),s=e.i(5338940),n=e.i(319451);e.s(["useUpdateDrain",0,function(e,a){let{team:o}=(0,s.useTeam)(),l=(0,n.getDrainsKey)({teamIdOrSlug:e,projectIdOrSlug:a,includeMetadata:!0}),{trigger:c,isMutating:d,error:u}=(0,t.default)(l,async(e,t)=>{let{arg:s}=t;if(!o?.id)throw Error("Team ID is required");let{id:n,...a}=s;(0,r.mutate)(l,e=>{if(e)return{...e,drains:e.drains.map(e=>e.id===n?{...e,...(e=>{let t={};for(let[r,i]of Object.entries(e))t[r]=null===i?void 0:i;return t})(a)}:e)}},!1);try{let e=await (0,i.typedFetch)("/v1/drains/{id}","patch",{id:n,teamId:o.id},a,{throwOnHTTPError:!0});if((0,r.mutate)(l),200!==e.status)throw console.error("Failed to update drain:",e.body),Error("Failed to update drain");return e.body}catch(e){throw console.error("Failed to update drain:",e),(0,r.mutate)(l),e}},{throwOnError:!0});return{updateDrain:c,isUpdating:d,error:u}}])},3199886,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),i=e.i(2504781),s=e.i(455575),n=e.i(5806401),a=e.i(6942035),o=e.i(6318858),l=e.i(109803),c=e.i(4828269),d=e.i(5644820),u=e.i(6143247),p=e.i(2199694),m=e.i(7662235),g=e.i(3614887),h=e.i(4576858),f=e.i(3226981),x=e.i(4758962),v=e.i(8404074),j=e.i(3456281);function y(e){let{filters:t}=e;if(!t)return;let r=t?.deployment?.environments?.length>0,i=t?.log?.sources?.length>0;if(i||r)return{version:"v2",filter:{type:"basic",...i?{log:t.log}:{},...r?{deployment:t.deployment}:{}}}}var b=e.i(8631221),N=e.i(3196486),S=e.i(7917902),w=e.i(4789955),I=e.i(8249103),k=e.i(1094129),C=e.i(9572009),_=e.i(4110479);e.i(8703064);var T=e.i(648779);function D(e){let{drain:o,onClose:C,teamSlug:D,projectIdOrSlug:P,onDrainCreated:A,onDrainUpdated:$,onOpenExternalModal:L,drainType:M,defaultProjectId:R}=e,z=o?"update":"create",O=(0,s.useToasts)(),F=M?2:1,[q,U]=(0,r.useState)(F),{validateEndpoint:B}=(0,w.useEndpointValidationContext)(),H=(0,_.useOptionalDrainModalContext)(),V=H?.resource,G=(0,c.useForm)({resolver:(0,d.zodResolver)(k.DrainFormSchema),defaultValues:async()=>{let e,t,r;if("update"!==z||!o)return(e=>{let{secret:t,resourceId:r,drainType:i,projectId:s}=e;return{mode:"create",name:"",...s?{projectIds:[s],projects:"some"}:{projects:"all",projectIds:[]},drainType:i,filters:{log:{sources:[]},deployment:{environments:[]}},delivery:r?void 0:{type:"http",endpoint:"",encoding:"json",secret:t,headers:{},compression:void 0},sampling:[],source:r?{kind:"integration",resourceId:r}:{kind:"self-served"}}})({secret:await (0,I.generateSecret)(32),resourceId:V?.id,drainType:M,projectId:R});return e=function(e){if(!e)return{log:{sources:[]},deployment:{environments:[]}};if("v2"===e.version)if("basic"===e.filter.type)return{log:{sources:e.filter.log?.sources||[]},deployment:{environments:e.filter.deployment?.environments||[]}};else return{log:{sources:[]},deployment:{environments:[]}};throw Error("Unsupported filter version")}(o.filterV2),t=(0,j.getDrainTypeFromDrain)(o),r=o.source?.kind==="integration"?void 0:o.delivery?.type==="http"||o.delivery?.type==="otlphttp"?o.delivery:void 0,{mode:"update",name:o.name??"",projects:o.projectAccess.access,projectIds:"some"===o.projectAccess.access?o.projectAccess.projectIds:void 0,drainType:t,filters:e,delivery:r,sampling:o.sampling,source:o.source}}}),W=(0,r.useCallback)(()=>{C(),G.reset(),U(F)},[C,G,F]),{handleSubmit:K,isLoading:Y}=function(e){let{teamSlug:t,projectIdOrSlug:i,drainId:s,onSuccess:n,onError:a,onDrainCreated:o}=e,{team:l,user:c}=(0,S.useAccount)(),{createDrain:d,isCreating:u}=(0,x.useCreateDrain)(t,i),{updateDrain:m,isUpdating:g}=(0,v.useUpdateDrain)(t,i);return{handleSubmit:(0,r.useCallback)(async e=>{try{if((0,p.isCreateFlow)(e)){let t={name:e.name.trim(),projects:e.projects,projectIds:e.projectIds,...e.delivery&&{delivery:e.delivery},sampling:e.sampling,schemas:(0,j.getSchemaForDrainType)(e.drainType),filter:y({filters:e.filters}),...e.source&&{source:e.source}},r=await d(t);o?.(e,r)}else if((0,p.isUpdateFlow)(e)){if(!s)throw Error("Drain ID is required for update mode");let t={id:s,...void 0!==e.name&&{name:e.name.trim()},...void 0!==e.status&&{status:e.status},...void 0!==e.delivery&&{delivery:e.delivery},...void 0!==e.sampling&&{sampling:e.sampling},...void 0!==e.filters&&{filter:y({filters:e.filters})},...(void 0!==e.projectIds||void 0!==e.projects)&&{projectIds:e.projectIds,projects:e.projects}};await m(t),e.status&&(0,N.sendToSnowflake)(b.Topic.VercelAppV0LogDrainToggle,{event_time:Date.now(),user_id:null!==c?c.uid:"",team_id:null!==l?l.id:"",log_drain_id:s,enabled:"enabled"===e.status},"vercel-app")}n?.()}catch(e){a?.(e)}},[d,m,s,t,i,n,a,l,c,o]),isLoading:u||g}}({teamSlug:D,projectIdOrSlug:P,drainId:o?.id,onSuccess:async()=>{"update"===z&&await $?.(),W(),O.success({text:`Drain ${"create"===z?"created":"updated"} successfully.`,key:`${"create"===z?"add":"edit"}-drain`})},onError:e=>{console.error(e),G.setError("root.serverError",{message:e.message}),O.error({text:`Failed to ${z} drain`})},onDrainCreated:e=>{A?.({drainType:e.drainType,kind:e.source?.kind==="integration"?`integration${"externalResourceId"in e.source?"-external":""}`:e.source?.kind})}}),J=(0,r.useCallback)(async e=>{if(G.clearErrors(),(0,p.isCreateFlow)(e))await K(e);else if(G.formState.isDirty&&Object.keys(G.formState.dirtyFields).length>0){var t;let r,i,s=(t=G.formState.dirtyFields,r=t.projects||t.projectIds,i=Object.keys(t).reduce((r,i)=>t[i]?{...r,[i]:e[i]}:r,{}),r?{...i,projects:e.projects,projectIds:e.projectIds}:i);await K({...s,mode:"update",drainType:e.drainType})}else W(),O.success({text:"No changes to save.",key:"edit-drain"})},[K,G.formState.isDirty,G.formState.dirtyFields,O,W,G.clearErrors,A,o]),Z=(0,r.useMemo)(()=>{let e=[m.chooseDrainDataStep,g.configureDrainStep,h.configureDestinationStep],t=[g.configureDrainStep,h.configureDestinationStep];return V&&(e=[m.chooseDrainDataStep,g.configureDrainStep],t=[g.configureDrainStep]),("update"===z?t:e).map((e,t)=>({...e,id:t+1,number:t+1,isComplete:t+1<q,isActive:q===t+1,disabled:t+1>q}))},[z,q,V]),Q=Z.length,X=Z.find(e=>e.id===q),ee=async()=>{let e=G.getValues(),t=X?.getFieldsToValidate(e);if(!t)return;let r=await G.trigger(t),i=e.source?.kind==="self-served";if(r&&X?.component===h.configureDestinationStep.component)if(i){if(G.setValue("source",{kind:"self-served"}),!await B(e)){let t="string"==typeof e.delivery?.endpoint?"delivery.endpoint":"delivery.endpoint.traces";G.setError(t,{message:""});return}}else G.setValue("delivery",void 0);r&&(q===Q?G.handleSubmit(J,e=>{console.error("[DrainModal] RHF validation failed with errors:",e)})():q<Q&&U(q+1))},et=()=>{q>1&&(G.clearErrors(),U(q-1))};return(0,t.jsxs)("main",{className:"flex h-full shrink-0 grow-0 flex-col",children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-background-100 pt-7",children:(0,t.jsxs)("section",{className:"flex items-center justify-start gap-4 px-8",children:[(0,t.jsxs)(n.SheetTitle,{className:"text-heading-24 flex items-center gap-4",children:[(0,t.jsxs)("span",{children:["create"===z?"Add":"Edit"," Drain"]}),V&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,t.jsx)(T.ProductIcon,{icon:V.product.iconUrl,size:"medium"}),(0,t.jsx)("span",{children:V.name})]})]}),(0,t.jsx)(n.SheetDescription,{className:"sr-only",children:"Configure a drain to send your data to external services"}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-3",children:["create"===z&&!V&&L&&(0,t.jsx)(i.Button,{type:"tertiary",size:"small",onClick:L,suffix:(0,t.jsx)(l.External,{}),className:"!text-gray-600 hover:!text-gray-900",children:"External Integrations"}),(0,t.jsx)(i.Button,{svgOnly:!0,"aria-label":"close modal",shape:"circle",size:"tiny",onClick:W,className:"!border-0 !bg-transparent",children:(0,t.jsx)(a.Cross,{color:"gray-1000"})})]})]})}),(0,t.jsx)("div",{className:"px-8 pb-4 pt-6",children:(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)(c.FormProvider,{...G,children:(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),ee()},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ee())},children:Z.map(e=>{let r=e.getSuffix?.(G.watch("drainType"),e.isActive);return(0,t.jsxs)("div",{children:[(0,t.jsx)(E,{step:e,onClick:()=>{var t;(t=e.number)>q||(G.clearErrors(),U(t))},suffix:r}),e.isActive&&(0,t.jsx)("div",{className:`flex flex-col items-stretch justify-start gap-6 flex-initial ${(0,u.cn)("pl-6 ml-[1.6rem] -mt-1 -mb-1",e.number!==Q&&"border-gray-400 border-dashed border-l")}`,children:(()=>{var e,r,i;if(!X)return null;let s=X.component,n=X.getIsNextEnabled(G.getValues());return(0,t.jsx)(f.StepWrapper,{error:G.formState.errors.root?.serverError?.message,isLoading:Y,onNext:ee,onBack:et,isFirstStep:1===q,isLastStep:q===Q,nextLabel:(e=q,r=Q,i=z,e===r?"create"===i?"Create Drain":"Update Drain":"Next"),isNextDisabled:!n,children:(0,t.jsx)(s,{})})})()})]},e.number)})})})})})]})}function E(e){let{step:r,onClick:i,suffix:s}=e;return(0,t.jsxs)("div",{className:(0,u.cn)("flex items-center gap-3 px-3 py-3 cursor-pointer transition-colors",{"hover:bg-gray-50":!r.disabled&&!r.isActive,"opacity-80 cursor-not-allowed":r.disabled&&r.isNext,"opacity-50 cursor-not-allowed":r.disabled&&!r.isNext,"hover:bg-success-100":r.isComplete&&!r.isActive}),onClick:i,title:r.isComplete&&!r.isActive?"Click to return to this step":void 0,children:[(0,t.jsx)("div",{className:(0,u.cn)("flex size-7 items-center justify-center rounded-full text-sm font-medium border",{"bg-success text-black border-success":r.isComplete,"bg-black text-white border-black":!r.isComplete&&r.isActive,"bg-white text-gray-900 border-gray-500":!r.isComplete&&!r.isActive}),children:r.isComplete?(0,t.jsx)(o.Check,{size:14}):r.number}),(0,t.jsx)("p",{className:(0,u.cn)("text-[16px] leading-[24px]",r.isActive&&"font-medium"),children:r.title}),s]})}e.s(["DrainModal",0,function(e){let{drain:i,active:s,onClose:a,teamSlug:o,projectIdOrSlug:l,onDrainCreated:c,onDrainUpdated:d,onOpenExternalModal:p,drainType:m,defaultProjectId:g}=e,h=(0,r.useRef)(null);return(0,t.jsx)(n.Sheet,{open:s,onOpenChange:e=>!e&&a(),children:(0,t.jsx)(n.SheetContent,{ref:h,className:(0,u.cn)("m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] overflow-y-auto rounded-[1rem] bg-white p-0 pb-6 lg:w-3/4 sm:max-w-[800px]"),side:"right",children:(0,t.jsx)(C.SheetContainerContext.Provider,{value:h.current,children:(0,t.jsx)(w.EndpointValidationProvider,{children:(0,t.jsx)(D,{drain:i,onClose:a,teamSlug:o,projectIdOrSlug:l,onDrainCreated:c,onDrainUpdated:d,onOpenExternalModal:p,drainType:m,defaultProjectId:g})})})})})}],3199886)},5765731,e=>{"use strict";var t=e.i(2704354),r=e.i(9668517),i=e.i(7909933);e.s(["useConnectableIntegrations",0,function(){let e=(0,r.useTeamSlug)();return(0,i.default)(e?(0,t.getMarketplaceIntegrationsApiUrl)({integrationType:"external",teamIdOrSlug:e}):null,e=>fetch(e).then(e=>e.json()))}])},7908739,e=>{"use strict";e.s(["HIDE_ADD_BUTTON_SLUGS",0,["bigcommerce"],"HIDE_DEPLOY_BUTTON_SLUGS",0,["agility-cms","gel","motherduck"]])},6269556,e=>{"use strict";var t=e.i(7553931),r=e.i(6695816),i=e.i(6838069);e.s(["useMarketplaceNavigation",0,function(){let e=(0,t.useSearchParams)(),s=(0,t.useParams)(),n=e?.get("category")??null,a=e?.get("search")??null,o=!!e?.get("expanded"),l=!!e?.get("isPreview"),c=(0,r.useMemo)(()=>s?.teamSlug?{teamSlug:s.teamSlug.toString(),isPublic:!1}:{isPublic:!0,teamSlug:void 0},[s?.teamSlug]);return{categorySlug:n,isRootCategory:!n||!!o,searchQuery:a,expanded:o,teamSlugOrPublic:c,isPreview:!!l,getBrowseMarketplaceLink:e=>(0,i.getBrowseMarketplaceLink)({teamSlugOrPublic:c,...e})}}])},6315360,e=>{e.v({bradcrumbsWrapper:"details-layout-module__xg7Djq__bradcrumbsWrapper",breadcrumbsText:"details-layout-module__xg7Djq__breadcrumbsText",cta:"details-layout-module__xg7Djq__cta",header:"details-layout-module__xg7Djq__header",marketplaceDetailsProductsGrid:"details-layout-module__xg7Djq__marketplaceDetailsProductsGrid",marketplaceProduct:"details-layout-module__xg7Djq__marketplaceProduct",message:"details-layout-module__xg7Djq__message",mobileHeaderButtons:"details-layout-module__xg7Djq__mobileHeaderButtons",wrapper:"details-layout-module__xg7Djq__wrapper"})},1033832,e=>{"use strict";var t=e.i(31889),r=e.i(5468328),i=e.i(4991687),s=e.i(6694387),n=e.i(8459493),a=e.i(8674454),o=e.i(8876434),l=e.i(57106),c=e.i(6695816),d=e.i(5338940),u=e.i(1857939),p=e.i(2504781),m=e.i(3225905),g=e.i(7668531),h=e.i(2704354),f=e.i(7908739),x=e.i(6838069),v=e.i(1017032),j=e.i(8794163),y=e.i(4065455),b=e.i(6269556),N=e.i(7594446),S=e.i(6315360),w=e.i(9722978);let I={normal:{foreground:"#000",background:"#fff",border:"#fff"},hover:{foreground:"#fff",background:"#000",border:"#fff"},active:{foreground:"#fff",background:"#000",border:"#fff"}};function k(e){let{isCta:r,...i}=e;return r?(0,t.jsx)(g.CustomButtonLink,{...I,...i}):(0,t.jsx)(l.ButtonLink,{...i})}function C(e){let{isCta:r,...i}=e;return r?(0,t.jsx)(m.CustomButton,{...I,...i}):(0,t.jsx)(p.Button,{...i})}function _(e){let{integration:i,isCta:s,type:n,size:a,className:o,loginRedirect:l}=e,{isLoggedOut:p}=(0,u.useIsLoggedIn)(),{teamSlugOrPublic:m}=(0,b.useMarketplaceNavigation)(),{canCreateIntegrationConfiguration:g}=(0,N.useIntegrationPermissions)(),f=n??((0,h.isMarketplaceIntegration)(i)?"secondary":"default"),{isReady:S,team:w}=(0,d.useTeam)(),{hasConfigurations:I,data:_}=(0,v.useConfigurations)({integrationId:i.id,type:"external",skip:m.isPublic,skipBillingData:!0}),T=_?.[0],[D,E]=(0,c.useState)(!1),P=!!(w?.billing?.plan==="hobby"||w?.billing?.trial)&&i.proOnly,A=!g,$=P||A,L=!!(0,j.useV0Marketplace)()?.token;if((0,h.isMarketplaceOnlyIntegration)(i))return null;let M=!i.canInstall&&!!i.hiddenAt;return T&&m.teamSlug?(0,t.jsx)(r.Tooltip,{disableTriggers:g,text:g?void 0:"You don't have permission to manage this integration.",children:(0,t.jsx)(k,{className:o,href:(0,x.getInstallationDetailsLink)({teamSlug:m.teamSlug,configurationId:T.id,integrationSlug:i.slug,isMarketplace:!1}),isCta:s,type:f,size:a,disabled:!g,children:"Manage"})}):M?null:p?(0,t.jsx)(k,{className:o,disabled:(0,h.isLegacyIntegration)(i),href:l??`/login?next=${(0,x.getIntegrationDetailsLink)({integrationSlug:i.slug,teamSlugOrPublic:m,isFromV0:L})}`,isCta:s,type:f,size:a,rel:"nofollow",children:"Connect Account"}):(0,t.jsxs)(t.Fragment,{children:[I?null:(0,t.jsx)(r.Tooltip,{disableTriggers:!$,text:A?"You need additional permissions to install integrations.":"You need a paid account to install this integration",children:(0,t.jsx)(C,{className:o,disabled:$,isCta:s,onClick:()=>E(!0),type:f,size:a,children:"Connect Account"})}),D&&S?(0,t.jsx)(y.InstallExternalIntegrationModal,{account:w,integration:i,onAnimationDone:()=>E(!1),teamSlugOrPublic:m}):null]})}e.s(["ConnectAndTemplateMenu",0,function(){let{size:e,integrationSlug:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r&&f.HIDE_DEPLOY_BUTTON_SLUGS.includes(r)?null:(0,t.jsxs)(i.MenuContainer,{children:[(0,t.jsx)(s.MenuButton,{"aria-label":"More",shape:"square",svgOnly:!0,type:"secondary",size:e,children:(0,t.jsx)(o.MoreHorizontal,{})}),(0,t.jsx)(a.Menu,{children:(0,t.jsx)(n.MenuItem,{children:(0,t.jsx)(l.Link,{href:"#template",prefetch:!1,children:"Deploy Template"})})})]})},"ConnectExternalIntegrationButton",0,_,"ConnectExternalIntegrationCTA",0,function(e){let{integration:r}=e,{teamSlugOrPublic:i}=(0,b.useMarketplaceNavigation)(),{hasConfigurations:s}=(0,v.useConfigurations)({integrationId:r.id,type:"external",skip:i.isPublic,skipBillingData:!0}),n=!r.canInstall&&!!r.hiddenAt;return s||n?null:(0,t.jsx)("div",{className:S.default.wrapper,children:(0,t.jsxs)("div",{className:(0,w.default)("flex flex-col items-stretch justify-start gap-3 flex-initial",S.default.cta),children:[(0,t.jsxs)("div",{className:S.default.message,children:["Get started with Vercel and ",r.name,"."]}),(0,t.jsx)(_,{integration:r,isCta:!0})]})})}])},7589392,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),i=e.i(3199886),s=e.i(6891161),n=e.i(57106),a=e.i(109803),o=e.i(1017032),l=e.i(5765731),c=e.i(2521731),d=e.i(2704354),u=e.i(1282571),p=e.i(1033832),m=e.i(7743427);function g(e){let{config:r,teamSlug:i}=e,{data:s,isLoading:o}=(0,m.useIntegration)(r.integrationId,{teamId:i});return o||!s?null:(0,t.jsx)(u.MarketplaceIntegrationCard,{Actions:(0,t.jsx)(n.ButtonLink,{size:"small",type:"secondary",prefix:(0,t.jsx)(a.External,{size:14}),href:(0,d.getConfigureUrl)(s,r.id),target:"_blank",children:"Configure"}),className:"p-3 px-4",disabled:!0,href:"#",icon:s.icon,title:s.name,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-1000",children:s.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-900",children:["Connected ",new Date(r.createdAt).toLocaleDateString()]})]})})}function h(e){let{teamSlug:r,onClose:i}=e,{data:n}=(0,o.useConfigurations)({skipBillingData:!0}),{data:a}=(0,l.useConnectableIntegrations)(),d=n?.filter(e=>"external"===e.installationType&&e.scopes.includes("read-write:log-drain"))||[],m=Array.isArray(a)?a.filter(e=>!!(0,c.integrationSupportsLogDrains)(e)&&!n?.some(t=>"external"===t.installationType&&t.integrationId===e.id)):[];return(0,t.jsxs)(s.Modal.Modal,{active:!0,onClickOutside:i,children:[(0,t.jsxs)(s.Modal.Body,{children:[(0,t.jsx)(s.Modal.Header,{children:(0,t.jsx)(s.Modal.Title,{center:!0,children:"External Integration Log Drains"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-6 mt-4",children:[d.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-1000 mb-3",children:"Installed Integrations"}),(0,t.jsx)("div",{className:"rounded-md border border-accents-2 shadow-[0px_1px_2px_0px_rgba(0,0,0,0.04)]",children:d.map(e=>(0,t.jsx)(g,{config:e,teamSlug:r},e.id))})]}),m.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-1000 mb-3",children:"Available Integrations"}),(0,t.jsx)("div",{className:"rounded-md border border-accents-2 shadow-[0px_1px_2px_0px_rgba(0,0,0,0.04)]",children:m.map(e=>(0,t.jsx)(u.MarketplaceIntegrationCard,{Actions:(0,t.jsx)(p.ConnectExternalIntegrationButton,{integration:e,size:"small"}),className:"p-3 px-4",disabled:!0,href:"#",icon:e.icon,title:e.name,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-1000",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-900",children:e.shortDescription})]})},e.id))})]}),0===d.length&&0===m.length&&(0,t.jsx)("p",{className:"text-center py-8 text-gray-700",children:"No external integrations available for log drains."})]})]}),(0,t.jsxs)(s.Modal.Actions,{children:[(0,t.jsx)("div",{}),(0,t.jsx)(s.Modal.Action,{type:"secondary",onClick:i,children:"Close"})]})]})}var f=e.i(8633387);e.s(["DrainModals",0,function(e){let{isOpen:s,closeModal:n,teamSlug:a,projectIdOrSlug:o,onDrainCreated:l,drain:c,drainType:d}=e,[u,p]=(0,r.useState)(!1),{data:m}=(0,f.useDashboardProject)({projectSlug:o,teamSlug:a});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.DrainModal,{drain:c,active:s,onClose:()=>{n()},teamSlug:a,projectIdOrSlug:o,onDrainCreated:l,onOpenExternalModal:()=>{n(),p(!0)},drainType:d,defaultProjectId:m?.id},c?.id),u&&(0,t.jsx)(h,{teamSlug:a,onClose:()=>p(!1)})]})}],7589392)}]);

//# debugId=3df3e49e-06ed-c7a8-e8b3-a7b39245360f
//# sourceMappingURL=2e80a4fa4fef4731.js.map