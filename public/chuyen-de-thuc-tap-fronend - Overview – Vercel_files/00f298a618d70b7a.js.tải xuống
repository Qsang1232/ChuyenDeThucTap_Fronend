;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="32e7a708-09ca-7ee3-66d9-ff5e49ed6a09")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1509029,e=>{"use strict";var t=e.i(7432042);let i=(0,t.default)("32d"),s=(0,t.default)("25h"),a=(0,t.default)("4d"),l=(0,t.default)("14h");e.s(["FreeEntRetention",0,a,"FreeHobbyRetention",0,l,"FreeProRetention",0,s,"MeteredEvents",0,["incomingRequest","outgoingRequest","functionExecution","middlewareInvocation","aiGatewayRequest"],"PlusRetention",0,i])},5568858,3570807,e=>{"use strict";var t=e.i(31889),i=e.i(8522580);e.i(7962980);var s=e.i(3769024),a=e.i(7432042),l=e.i(901210),n=e.i(5338940),r=e.i(1233856),o=e.i(1509029),c=e.i(9667097);async function d(e){let{teamId:t}=e,i=(0,r.startOfDuration)(new Date,{days:1}),s=new Date(i.getTime()-(0,a.default)("7d")),l=await Promise.all(o.MeteredEvents.map(async e=>{let a=await (0,c.getSonarData)({scope:{type:"owner",ownerId:t},reason:"observability_usage_estimate",event:e,rollups:{count:{measure:"count",aggregation:"sum"}},granularity:{days:1},startTime:s,endTime:i,groupBy:["projectId"],limit:5});return{event:e,data:a}})),n=new Map,d={totalEvents:0,eventBreakdown:{}};for(let{event:e,data:t}of l)for(let i of t.summary){let t=n.get(i.projectId)??0,s=Math.round((i.count??0)*4.25);n.set(i.projectId,t+s),d.totalEvents+=s,d.eventBreakdown[e]=(d.eventBreakdown[e]??0)+s}let u=l.flatMap(e=>{let{event:t,data:i}=e;return i.data.map(e=>{let{timestamp:i,count:s}=e;return{event:t,timestamp:i,value:4.25*Number(s)}})});return{eventBreakdown:d.eventBreakdown,totalEvents:Math.round(d.totalEvents),timeseries:u,eventsByProject:Array.from(n.entries()).map(e=>{let[t,i]=e;return{projectId:t,events:i}}).sort((e,t)=>t.events-e.events)}}var u=e.i(7114658),m=e.i(9736132),b=e.i(6060673),x=e.i(3869281),p=e.i(5255926),g=e.i(6695816),h=e.i(9722978);function v(){let{excludedProjects:e}=(0,u.useObservabilityPlusForProjects)(),{data:t}=function(){let{team:e}=(0,n.useTeam)();return(0,l.default)(e?.id,()=>e?d({teamId:e.id}):null)}(),{data:i}=(0,b.useProjects)(t&&e?Array.from(new Set([...e.map(e=>{let{id:t}=e;return t}),...t.eventsByProject.map(e=>{let{projectId:t}=e;return t}).slice(0,6)])):void 0,{config:{keepPreviousData:!0}});return{totalEvents:t?.eventsByProject?t.eventsByProject.reduce((t,i)=>{var a;let{projectId:l,events:n}=i;return void 0!==(a=(0,s.hasObservabilityPlusAccess)({excludedProjects:e,enabled:!0},l)?t+n:t)?+a:void 0},0):void 0,excludedProjects:i?.filter(t=>!(0,s.hasObservabilityPlusAccess)({excludedProjects:e,enabled:!0},t.id)),includedProjects:i?.filter(t=>(0,s.hasObservabilityPlusAccess)({excludedProjects:e,enabled:!0},t.id)),observabilityUsage:t,totalExcludedProjects:e?.length??0}}function y(e){let{observabilityUsage:i,excludedProjects:s,includedProjects:a,canConfigure:l}=e,[n,r]=(0,g.useTransition)(),{toggleObservabilityPlusForProject:o}=(0,u.useObservabilityPlusForProjects)();return(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(f,{leftColumnTitle:"Top 5 Projects *",rightColumnTitle:"~ Events in the last 30 days",children:a&&i?a.map(e=>{let s=i.eventsByProject.find(t=>t.projectId===e.id);return(0,t.jsx)(j,{disabled:n||!l,project:e,isIncluded:!0,onStatusChanged:()=>{r(async()=>{await o({projectName:e.name,disabled:!0})})},description:s?.events.toLocaleString()},e.id)}):(0,t.jsx)(t.Fragment,{children:Array.from(Array(s?.length??3).keys()).map(e=>(0,t.jsx)(j,{},e))})}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-700",children:"* Other projects can be excluded in their Observability page"})]}),(0,t.jsx)(f,{leftColumnTitle:"Excluded Projects",children:s?.map(e=>(0,t.jsx)(j,{disabled:n||!l,project:e,isIncluded:!1,onStatusChanged:()=>{r(async()=>{await o({projectName:e.name,disabled:!1})})},description:"Excluded"},e.id))})]})}function f(e){let{children:i,leftColumnTitle:s,rightColumnTitle:a}=e;return(0,t.jsxs)("div",{className:" flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-1",children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:s}),a?(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000 text-right",children:a}):null]}),(0,t.jsx)("div",{className:"divide-1 divide-solid divide-x-0 divide-y",children:i})]})}function j(e){let{project:i,onStatusChanged:s,isIncluded:a,description:l,disabled:n}=e;return(0,t.jsx)("div",{className:"col-span-2 border-[var(--ds-gray-200)] tabular-nums",children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2 py-2",children:[(0,t.jsxs)("div",{className:"flex cursor-pointer items-center justify-center gap-2",onClick:s,children:[(0,t.jsx)(x.Checkbox,{checked:a,disabled:n,onChange:s}),i?(0,t.jsx)(m.FrameworkAvatar,{isDisabled:!a,size:20,project:i}):(0,t.jsx)(m.FrameworkAvatarSkeleton,{size:20}),i?(0,t.jsx)("p",{className:(0,h.default)("text-copy-14",a?"text-gray-900":"text-gray-700"),children:i.name}):(0,t.jsx)(p.Skeleton,{width:50,height:20})]}),i?(0,t.jsx)("p",{className:(0,h.default)("text-copy-14 text-right",a?"text-gray-900":"text-gray-700"),children:l}):(0,t.jsx)(p.Skeleton,{width:50,height:20})]})})}e.s(["ProjectListWithUsageEvents",0,y,"useIncludedAndExcludedProjectWithUsageEvents",0,v],3570807);let w={surveyName:"Disable Observability Plus User Feedback",surveySlug:"disable-observability-plus-user-feedback",surveySteps:[{title:"Observability Plus has been disabled",description:"Help us improve by sharing your feedback.",fields:[{type:"select",id:"reasons-why",label:"Any reasons for disabling Observability Plus?",selectMultiple:!0,options:[{id:"missing-features",label:"Missing features",reveals:{id:"what-were-you-missing",label:"What were you missing?"}},{id:"too-expensive",label:"Too expensive",reveals:{id:"missing-controls",label:"What controls are missing?"}},{id:"prefer-another-product",label:"I prefer another product",reveals:{id:"preferred-product",label:"Which product do you prefer?"}},{id:"not-working-as-expected",label:"It is not working as expected",reveals:{id:"what-was-not-working",label:"What was not working?"}},{id:"just-looking-around",label:"I was just looking around"},{id:"other",label:"Other",reveals:{id:"other-reason",label:"Additional comments"}}]}]}]};var N=e.i(854682),P=e.i(6880199),k=e.i(7917902),C=e.i(1717203),O=e.i(7557283),E=e.i(364898),A=e.i(4496450);function M(){let e=v(),{can:i,isLoading:s}=(0,C.default)(),a=!s&&i(O.Action.Update,O.Resource.ObservabilityConfiguration);return(0,t.jsx)(y,{...e,canConfigure:a})}e.s(["useToggleObservabilityPlus",0,e=>{let s,{team:a}=(0,k.useAccount)(),{hasOnlyMonitoring:l,hasObservabilityPlusAccess:n,mutate:r,applyPromotion:o}=(0,N.useHasObservabilityPlus)(),{excludedProjects:c,isObservabilityPlusForProjectsFlagEnabled:d}=(0,u.useObservabilityPlusForProjects)(),m={...function(e){let{hasOnlyMonitoring:s,team:a,source:l,refresh:n,skipPostConfirm:r,applyPromotion:o}=e,c=(0,t.jsxs)(t.Fragment,{children:["By disabling Observability Plus, you will immediately lose access to all advanced metrics. Only included metrics with limited retention window will be accessible.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)(i.Note,{type:"warning",children:"Data collected while Observability Plus was disabled will not be visible if you re-enable it."}),(0,t.jsx)("br",{})]}),d={name:"observabilityBase",price:1e3*!o,enable:async()=>{a&&(await (0,P.patchObservabilityConfiguration)({team:a,enableTeam:!0,source:l}),await n())},enableSteps:{externalConfiguration:!0,confirm:{lineItems:[...s?[{name:"Monitoring with 250K data points",price:1e3,removal:!0}]:[],{name:"Observability Plus with 1M events",price:"from_invoice_item",discountPrice:o?0:void 0,discountDescriptor:o?"during first month":void 0},{name:"On-demand events",price:120,priceDescriptor:"per 1M events",discountPrice:o?0:void 0,discountDescriptor:o?(0,t.jsx)("span",{className:"text-blue-700",children:"during first month"}):void 0}],nonProratedCustomCopy:o?void 0:(0,t.jsxs)(t.Fragment,{children:[" ","and your credit card will be charged ",(0,t.jsx)("b",{children:"immediately"}),"."]}),customCopy:(0,t.jsxs)(t.Fragment,{children:[" ","Charges for on-demand events will be billed to your credit card as accrued.",o&&(0,t.jsxs)(i.Note,{fill:!0,type:"success",className:"mt-4",children:["Limited time: Get"," ",(0,t.jsx)("span",{className:"font-bold",children:"your first month"})," of Observability Plus for free."]})]}),confirmLabel:o?"Confirm":void 0}},disableSteps:{disable:{customDisableCopy:(0,t.jsxs)(t.Fragment,{children:[c,"Disabling will take effect now, regardless of your billing cycle."]})},exitSurvey:w},disable:async()=>{a&&(await (0,P.patchObservabilityConfiguration)({team:a,enableTeam:!1,source:l}),await n())}};return a?.billing?.plan==="enterprise"&&(0,A.isLegacyPlanIteration)(a?.billing?.planIteration)&&(d.disableSteps.disable.customDisableModal=(0,t.jsxs)(t.Fragment,{children:[c,"Please reach out to your account executive to disable Observability Plus."]})),r||(d.enableSteps.postConfirmConfiguration={instructions:null,content:(0,t.jsx)(M,{})}),d}({hasOnlyMonitoring:l,team:a,refresh:r,source:e.analyticsEventSource,skipPostConfirm:e.skipPostConfirm,applyPromotion:o}),...e,isEnabled:()=>n},{isEnabled:b,openEnableOrUpdateModal:x,openDisableModal:p,AddOnModal:g,formattedPrice:h}=(0,E.useTogglePaidAddOn)(m);return d&&(s=c?.length?`${c.length} project${1===c.length?"":"s"} excluded`:"Manage projects"),{addOn:m,isObservabilityPlusEnabled:b,enableObservabilityPlus:x,disableObservabilityPlus:p,ObservabilityPlusModal:g,pricingCopy:`${h} / month`,configureUIText:s}}],5568858)},6728635,2630141,e=>{"use strict";var t=e.i(31889);e.i(6483798);var i=e.i(8287059),s=e.i(854682),a=e.i(5568858),l=e.i(6232213),n=e.i(5338940),r=e.i(7553931),o=e.i(6695816);e.i(7962980);var c=e.i(1509029),d=e.i(7114658),u=e.i(57106),m=e.i(1717203),b=e.i(7557283),x=e.i(9722978),p=e.i(3306538),g=e.i(6891161),h=e.i(8522580),v=e.i(5255926),y=e.i(5468328),f=e.i(1438473),j=e.i(199192),w=e.i(2988836),N=e.i(7749365),P=e.i(4333930),k=e.i(3228096),C=e.i(787358),O=e.i(762945),E=e.i(218692),A=e.i(6675233),M=e.i(4099936),F=e.i(682502),S=e.i(150374),I=e.i(455575),T=e.i(8914449),U=e.i(6880199),B=e.i(4496450);let D=Object.fromEntries(Object.entries({p75DurationMs:"function-performance",functionDurationMs:"function-performance"}).map(e=>{let[t,i]=e;return[t.toLowerCase(),i]})),R={step:"choose",isEnabling:!1},L=(0,T.create)((e,t)=>({step:"closed",team:null,projectId:null,plan:"hobby",isTrialing:!1,isEnabling:!1,isLegacyEnt:!1,hasOnlyMonitoring:!1,openedFrom:!1,setProps:t=>{let{team:i,...s}=t,a=i?.billing?.plan??"hobby";e({...s,team:i,plan:a,isTrialing:"pro"===a&&i?.billing?.status==="trialing"})},open:function(){let{from:i="observability",via:s,upgradeUseCase:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:l,onOpen:n,isTrialing:r,plan:o}=t(),c=l?.billing?.plan==="enterprise"&&!(0,B.isOnUnbundledPricingPlan)(l);e({...R,source:s,upgradeUseCase:a,openedFrom:i,isLegacyEnt:c}),n?.({from:i||void 0,via:s,legacyEnt:c,teamUpgrade:r||"hobby"===o,upgradeUseCase:a})},close:()=>{e({step:"closed"})},doNext:async()=>{let{isEnabling:i,isLegacyEnt:s,isTrialing:a,plan:l,step:n,team:r,onContactSupport:o,onOpenTeamUpgrade:c,onSuccess:d,onConversion:u,source:m,onNext:b,openedFrom:x,upgradeUseCase:p}=t();if(r&&!i){if("choose"===n&&"pro"===l&&!a){b?.({from:x||void 0,via:m,teamUpgrade:!1,upgradeUseCase:p}),e({step:"paid-addon"});return}if("choose"===n){if("hobby"===l||a)b?.({from:x||void 0,via:m,teamUpgrade:!0,upgradeUseCase:p}),c?.({addOn:{additionalConfigurations:{team:r,source:"enable-modal"},type:"observabilityPlus"},disabledSteps:["team-members"],forceImmediateUpgrade:a,source:`observability-enable-modal${m?`-${m}`:""}`,teamHint:r.id,trialBehavior:"disallow-trial",onConversionSuccess:()=>{u?.({from:x||void 0,via:m,teamUpgrade:!0,upgradeUseCase:p}),d?.({team:r})},onAbandon:t=>{t&&e({step:"closed"})}});else if(s)b?.({from:x||void 0,via:m,legacyEnt:!0,upgradeUseCase:p}),o?.({team:r});else if("enterprise"===l){b?.({from:x||void 0,via:m,upgradeUseCase:p}),e({isEnabling:!0});try{await (0,U.patchObservabilityConfiguration)({team:r,enableTeam:!0,source:"enable-modal"}),I.toasts.success("Enabled Observability Plus.")}catch(t){e({isEnabling:!1}),I.toasts.error(`Failed to enable Observability Plus${t instanceof Error?`: ${t.message}`:""}`);return}d?.({team:r}),u?.({from:x||void 0,via:m,teamUpgrade:!1,upgradeUseCase:p})}e({step:"closed",isEnabling:!1})}}}}));e.s(["getUpgradeUseCaseForColumn",0,function(e){return D[e.toLowerCase()]},"useModalState",0,L,"useOpenEnableModal",0,()=>L(e=>e.open)],2630141);var q=e.i(3570807),G=e.i(794055),$=e.i(6143247);let W={incomingRequest:{label:"Edge Requests",description:"All requests received by the Vercel Edge Network"},outgoingRequest:{label:"External API Requests",description:"All HTTP requests made by your functions to external APIs"},functionExecution:{label:"Function Executions",description:"All executions of your Serverless and Edge Functions"},middlewareInvocation:{label:"Middleware Invocations",description:"All Edge and Node.js Middleware invocations"},aiGatewayRequest:{label:"AI Gateway Requests",description:"All requests made to the AI Gateway"}},H=e=>{let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return t.endsWith(".00")?t.slice(0,-3):t},_=e=>{let t=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),i=t.endsWith(".00")?t.slice(0,-3):t;return`${i} MIU`},z=[{icon:O.Warning,title:"Anomaly Alerts",description:"Get notified when a function starts failing or usage spikes."},{icon:N.Clock,title:"30 days retention",description:"Explore data of the past 30 days across Observability and Logs."},{icon:E.LineChart,title:"Custom Queries",description:"Find exactly what you are looking for with custom queries."},{icon:S.Notebook,title:"Notebooks",description:"Save and share queries to collaborate with your team."},{icon:k.Globe,title:"External APIs Insights",description:"Dig deep into external API requests made by your functions."},{icon:P.FunctionSquare,title:"Advanced Insights",description:"Unlock insights into latency, middleware, and external APIs."}],V={"function-performance":{title:["Get insights into ",{text:"Function Performance",icon:P.FunctionSquare}]},function:{title:["Get deeper insights into ",{text:"Functions",icon:P.FunctionSquare}]},"middleware-performance":{title:["Get insights into ",{text:"Middleware Performance",icon:C.FunctionMiddleware}]},"external-apis":{title:["Get insights into ",{text:"External APIs",icon:k.Globe}]},retention:{title:["Unlock ",{text:"30 days of retention",icon:N.Clock}]},"anomaly-alerts":{title:["Be alerted when ",{text:"Anomalies",icon:O.Warning}," arise"],color:"amber"},"query-builder":{title:["Explore your data using ",{text:"Queries",icon:E.LineChart}],color:"pink"},"bot-insights":{title:["Get insights into ",{text:"Bots",icon:A.Robot}]},"blob-insights":{title:["Get deeper insights into ",{text:"Blob",icon:M.Blob}]},rewrites:{title:["Get insights into ",{text:"External Rewrites",icon:F.ArrowCrossed}]}};function K(e){let{upgradeUseCase:i}=e,s=V[i],a=s.color||"blue";return(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold leading-relaxed",children:s.title.map(e=>"string"==typeof e?(0,t.jsx)("span",{children:e},e):(0,t.jsxs)("span",{className:(0,x.clsx)("inline-flex items-center gap-1 rounded-sm px-1.5 text-[1.4rem] translate-y-px","blue"===a&&"text-blue-700 bg-blue-100","amber"===a&&"text-amber-800 bg-amber-100","pink"===a&&"text-pink-700 bg-pink-100"),children:[e.icon&&(0,t.jsx)(e.icon,{size:18}),e.text]},e.text))}),(0,t.jsx)("div",{className:"text-2xl font-semibold",children:"with Observability Plus"})]})}function Q(){return(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-7 px-1 py-3 mb-4",children:z.map(e=>{let i=e.icon;return(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(i,{color:"gray-900",size:16}),(0,t.jsx)("span",{className:"text-[15px] font-semibold text-gray-1000",children:e.title})]}),(0,t.jsx)("p",{className:"text-[14px] leading-relaxed text-gray-900",children:e.description})]},e.title)})})}function J(e){let{metric:i,count:s,loading:a}=e,l=W[i];return(0,t.jsxs)(o.default.Fragment,{children:[(0,t.jsxs)("span",{className:"flex items-center gap-1 text-sm text-gray-900",children:[l.label,l.description?(0,t.jsx)(y.Tooltip,{text:l.description,children:(0,t.jsx)(w.InformationFillSmall,{color:"gray-900"})}):null]}),a||void 0===s?(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(v.Skeleton,{height:10,width:35})}):(0,t.jsx)("span",{className:"text-right text-sm text-gray-900",children:(+s).toLocaleString()})]},i)}function X(e){let{onClose:i,applyPromotion:s}=e,a=(0,q.useIncludedAndExcludedProjectWithUsageEvents)(),{observabilityUsage:l,totalExcludedProjects:n,totalEvents:r}=a,y=(0,d.useObservabilityPlusForProjectsFlag)(),{doNext:f,hasOnlyMonitoring:w,team:N,plan:P,upgradeUseCase:k}=L(),C=L(Z),O=L(e=>e.isLegacyEnt),E=L(ee),{can:A,isLoading:M}=(0,m.default)(),F=(0,o.useMemo)(()=>!M&&A(b.Action.Update,b.Resource.ObservabilityConfiguration),[M,A]),S="enterprise"===P,I=(0,B.usesMiuPricing)(N?.billing)?_:H,T=void 0!==r?Math.max(0,r-1e6):void 0,U=void 0!==T?T/1e6*1.2:void 0,D=void 0!==U?10*!S+U:void 0;return(0,t.jsxs)(g.Modal.Modal,{width:640,active:!0,onClickOutside:i,children:[(0,t.jsxs)(g.Modal.Body,{className:(0,$.cn)("tailwind-preflight","[--modal-padding:1.5rem_!important] @md-page:[--modal-padding:3rem_!important]"),children:[k?(0,t.jsx)("div",{className:(0,x.clsx)("h-24 w-full absolute top-0 inset-x-0 to-transparent bg-gradient-to-b hidden @md-page:block","amber"===V[k].color?"from-amber-100":"pink"===V[k].color?"from-pink-100":"from-blue-100")}):(0,t.jsx)(G.NorthernLights,{className:"hidden @md-page:block"}),(0,t.jsx)(g.Modal.Header,{children:(0,t.jsx)(g.Modal.Title,{className:"px-1 relative",children:k?(0,t.jsx)(K,{upgradeUseCase:k}):E})}),(0,t.jsx)(Q,{}),(0,t.jsxs)("div",{className:"mb-4",children:["Get more information about"," ",(0,t.jsx)(u.Link,{external:!0,href:"/docs/observability/observability-plus",variant:"highlight",children:"Observability Plus"}),"."]}),s&&(0,t.jsxs)(h.Note,{fill:!0,type:"success",label:!1,className:"my-4",children:[(0,t.jsx)(p.Badge,{className:"mr-2 bg-blue-800",capitalize:!1,children:"Black Friday / Cyber Monday"}),"Get ",(0,t.jsx)("span",{className:"font-bold",children:"your first month"})," of Observability Plus for free."]}),y?(0,t.jsx)("div",{className:"mt-2 flex flex-col",children:(0,t.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border",children:[(0,t.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between p-3 transition-opacity hover:opacity-80 leading-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,t.jsx)(j.ChevronRightSmall,{})}),(0,t.jsx)("span",{className:"font-medium text-gray-1000",children:"Included Projects"})]}),(0,t.jsx)("span",{className:"flex items-center gap-1 text-gray-900",children:n>0?`${n} Project${n>1?"s":""} excluded `:"All Projects"})]}),(0,t.jsx)("div",{className:"col-span-2 border-t bg-background-200 p-3 py-3.5 pl-9 tabular-nums space-y-2",children:(0,t.jsx)(q.ProjectListWithUsageEvents,{...a,canConfigure:F})})]})}):null,(0,t.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,t.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border",children:[(0,t.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between p-3 transition-opacity hover:opacity-80 leading-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,t.jsx)(j.ChevronRightSmall,{})}),(0,t.jsxs)("span",{className:"font-medium text-gray-1000",children:[w?"Observability":""," Cost Estimate*",(0,t.jsxs)("div",{className:"text-label-13 text-gray-900 leading-[18px]",children:[S?null:(0,t.jsxs)(t.Fragment,{children:[I(10)," per month + "]}),I(1.2)," per million events"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[s?(0,t.jsx)("span",{className:"text-blue-700 font-medium",children:"First month free"}):null,(0,t.jsxs)("span",{className:(0,$.cn)("flex items-center gap-1",s?"text-gray-900":"font-medium text-gray-1000"),children:[void 0!==D?`${s?"then ":""}~ ${I(D)}`:(0,t.jsx)(v.Skeleton,{height:18,width:30})," ",(0,t.jsx)("span",{children:"/ month"})]})]})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{className:(0,x.clsx)("ml-0 grid grid-cols-[2fr,1fr] items-center gap-x-1 gap-y-3 border-t border-dashed p-3 pl-9"),children:[S?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-gray-1000 text-sm",children:"Base Price"}),N?.billing?.planIteration!=="plus"&&(0,t.jsx)("span",{className:"text-label-13 text-gray-900",children:"Includes 1 million events, across all projects"})]}),(0,t.jsxs)("span",{className:"text-right text-sm text-gray-900",children:[I(10)," / month"]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-gray-1000 text-sm",children:"Additional Events"}),(0,t.jsxs)("span",{className:"text-xs text-gray-900",children:[(0,t.jsx)("span",{children:void 0!==T?T?T.toLocaleString("en-US",{notation:"compact",maximumFractionDigits:2}):"0":(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(v.Skeleton,{className:"mr-2 inline-block h-2 w-16 translate-y-0.5",height:12,width:20})})})," ","additional events Ã— ",I(1.2)," per million"]})]}),(0,t.jsx)("span",{className:"text-right text-gray-900",children:void 0!==U?U?I(U):"No additional cost":(0,t.jsx)(v.Skeleton,{className:"inline-block",height:18,width:30})})]}),(0,t.jsx)("div",{className:"col-span-2 border-t bg-background-200 p-3 py-3.5 pl-9 tabular-nums space-y-2",children:y?(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-1000",children:"Total events in the last 30 days"}),void 0!==r?(0,t.jsx)("span",{className:"text-right text-sm text-gray-1000",children:r.toLocaleString()}):(0,t.jsx)(v.Skeleton,{height:18,width:50})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-1000",children:"Total events in the last 30 days"}),void 0!==r?(0,t.jsx)("span",{className:"text-right text-sm text-gray-1000",children:r.toLocaleString()}):(0,t.jsx)(v.Skeleton,{height:18,width:50})]}),(0,t.jsx)("div",{className:"grid grid-cols-[2fr,1fr] gap-x-4 gap-y-1",children:l?.eventBreakdown?Object.entries(l.eventBreakdown).map(e=>{let[i,s]=e;return(0,t.jsx)(J,{count:s,metric:i},i)}):(0,t.jsx)(t.Fragment,{children:c.MeteredEvents.map(e=>(0,t.jsx)(J,{loading:!0,metric:e},e))})})]})})]}),(0,t.jsx)("div",{className:"px-4 text-gray-800 pb-2 text-xs bg-background-200 pl-10",children:"* Estimate is based on your team's activity over the last 30 days. The actual cost will vary depending on future usage patterns."})]}),w?(0,t.jsxs)(h.Note,{className:"-mx-2 mt-6",type:"violet",fill:!0,children:["By migrating, your team's existing Monitoring package will be replaced by Observability Plus","pro"===P?(0,t.jsx)(t.Fragment,{children:". The price per million events has already been reduced to $1.20. The base fee remains $10."}):null]}):null,"hobby"===P?(0,t.jsx)(h.Note,{className:"-mx-2 mt-8",type:"violet",fill:!0,children:"Upgrading to Observability Plus requires a paid plan."}):null,O?(0,t.jsx)(h.Note,{className:"-mx-2 mt-2",type:"cyan",children:"To enable Observability Plus, please contact your account executive."}):null]})]}),(0,t.jsxs)(g.Modal.Actions,{children:[(0,t.jsx)(g.Modal.Action,{onClick:i,type:"secondary",children:"Dismiss"}),!O&&(0,t.jsx)(Y,{text:F?void 0:"Please ask your team owners",children:(0,t.jsx)(g.Modal.Action,{disabled:!F,loading:C.loading,onClick:()=>void f(),suffix:C.suffix,type:C.type,children:C.label})})]})]})}function Y(e){let{text:i,children:s}=e;return i?(0,t.jsx)(y.Tooltip,{text:i,children:s}):s}function Z(e){let{plan:i,hasOnlyMonitoring:s,isEnabling:a}=e;return"enterprise"===i?{loading:a,label:s?"Confirm and Migrate":"Confirm"}:{label:"Continue",suffix:(0,t.jsx)(f.ArrowRight,{})}}function ee(e){let{plan:t,hasOnlyMonitoring:i}=e;return i?"Migrate from Monitoring to Observability Plus":"hobby"===t?"Upgrade to Pro and Observability Plus":"Upgrade to Observability Plus"}e.i(3182268);var et=e.i(7849855);function ei(e){let{onClose:i}=e,{projectSlug:s}=(0,et.useProjectSlug)(),{toggleObservabilityPlusForProject:a}=(0,d.useObservabilityPlusForProjects)(),[l,n]=(0,o.useTransition)();return(0,t.jsxs)(g.Modal.Modal,{active:!0,onClickOutside:i,children:[(0,t.jsxs)(g.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(g.Modal.Header,{children:(0,t.jsx)(g.Modal.Title,{className:"px-1",children:"Include Project in Observability Plus"})}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Include ",(0,t.jsx)("span",{className:"font-medium",children:s})," in Observability Plus to unlock advanced features. This will incur additional event usage."]})]}),(0,t.jsxs)(g.Modal.Actions,{children:[(0,t.jsx)(g.Modal.Action,{onClick:i,type:"secondary",children:"Cancel"}),(0,t.jsx)(g.Modal.Action,{loading:l,onClick:()=>{s&&n(async()=>{await a({projectName:s,disabled:!1}),i()})},children:"Include Project"})]})]})}var es=e.i(9250831),ea=e.i(7837522),el=e.i(7780974);e.s(["EnableModal",0,function(){let{setProps:e,step:c,close:d,open:u,openedFrom:m,source:b,upgradeUseCase:x}=L(),{team:p}=(0,n.useTeam)(),g=(0,r.useRouter)(),{track:h}=(0,ea.useTrackActivity)(),{hasOnlyMonitoring:v,mutate:y,hasObservabilityPlusAccessOnCurrentProject:f,hasObservabilityPlusAccess:j,ready:w,applyPromotion:N}=(0,s.useHasObservabilityPlus)(),P=(0,o.useCallback)(()=>{y(),g.refresh()},[g,y]),k=(0,o.useCallback)(e=>{g.push(`/help?teamSlug=${e.team.slug}`)},[g]),{enableObservabilityPlus:C,ObservabilityPlusModal:O}=(0,a.useToggleObservabilityPlus)({analyticsEventSource:"enable-modal",onSuccess:()=>{P(),F({from:m||void 0,via:b,teamUpgrade:!1,upgradeUseCase:x})},onClose:e=>{d(),e&&u({from:m||void 0,via:b,upgradeUseCase:x})},skipPostConfirm:!0}),E=(0,i.useOpenUpgradeModal)(),A=(0,o.useCallback)(e=>{h(el.VercelActivityAction.ObservabilityPlusModalOpened,e),(0,es.track)("Observability Upsell Clicked",{region:e.via??e.from??null,upgradeUseCase:e.upgradeUseCase??null})},[h]),M=(0,o.useCallback)(e=>{h(el.VercelActivityAction.ObservabilityPlusModalContinued,e)},[h]),F=(0,o.useCallback)(e=>{h(el.VercelActivityAction.ObservabilityPlusModalConverted,e),(0,es.track)("Observability Plus Conversion",{via:e.via??null,from:e.from??null,region:e.via??e.from??null,upgradeUseCase:e.upgradeUseCase??null,plan:p?.billing?.plan??"hobby"}),(0,l.postToStatsigClient)({events:[{eventName:"observability_plus_conversion",metadata:{via:e.via??""}}]})},[h,p?.billing?.plan]);return((0,o.useEffect)(()=>e({team:p,hasOnlyMonitoring:v,onContactSupport:k,onOpenTeamUpgrade:E,onSuccess:P,onOpen:A,onNext:M,onConversion:F}),[v,k,E,P,e,p,A,M,F]),(0,o.useEffect)(()=>{"paid-addon"===c&&C?.()},[C,c]),"choose"===c&&w&&j&&!f)?(0,t.jsx)(ei,{onClose:d}):(0,t.jsxs)(t.Fragment,{children:["choose"===c?(0,t.jsx)(X,{onClose:d,applyPromotion:N}):null,"paid-addon"===c?O:null]})}],6728635)}]);

//# debugId=32e7a708-09ca-7ee3-66d9-ff5e49ed6a09
//# sourceMappingURL=310c5b6fdabcc7e6.js.map