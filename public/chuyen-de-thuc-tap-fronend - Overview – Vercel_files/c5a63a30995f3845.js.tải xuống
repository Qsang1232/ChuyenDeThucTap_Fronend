;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7b496ede-e19e-eb8c-85d0-20408cd7d9f9")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2112997,e=>{e.v({checked:"switch-control-module__WvDOda__checked",container:"switch-control-module__WvDOda__container",control:"switch-control-module__WvDOda__control",disabled:"switch-control-module__WvDOda__disabled",icon:"switch-control-module__WvDOda__icon",large:"switch-control-module__WvDOda__large",small:"switch-control-module__WvDOda__small",text:"switch-control-module__WvDOda__text"})},1328457,e=>{e.v({hideBorder:"switch-module__idkRsq__hideBorder",large:"switch-module__idkRsq__large",small:"switch-module__idkRsq__small",switch:"switch-module__idkRsq__switch"})},8923565,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),s=e.i(9722978),n=e.i(9508212),i=e.i(1232321),l=e.i(1344973),a=e.i(2112997),o=e.i(1328457);let c=Object.assign((0,r.forwardRef)(function(e,i){let{className:l,size:a,name:c,children:u,hideBorder:d,checkedColor:f,...h}=e;return(0,t.jsx)(n.Stack,{className:(0,s.clsx)(l,o.default.switch,{[String(o.default.large)]:"large"===a,[String(o.default.small)]:"small"===a,[String(o.default.hideBorder)]:d}),direction:"row",...h,ref:i,children:r.Children.map(u,e=>(0,r.cloneElement)(e,{name:c,size:a,checkedColor:f}))})}),{Control:function(e){let{className:n,icon:o,label:c,size:u,checked:d,disabled:f,checkedColor:h="var(--ds-gray-100)",innerDivClassName:m,...g}=e,p=void 0!==o,x=(0,s.clsx)(a.default.control,{[String(a.default.disabled)]:f,[String(a.default.checked)]:d,[String(a.default.large)]:"large"===u,[String(a.default.small)]:"small"===u,[String(a.default.text)]:!p,[String(a.default.icon)]:p}),j=o?(0,t.jsxs)(t.Fragment,{children:[(0,r.cloneElement)(o,{size:"large"===u?20:16}),(0,t.jsx)("span",{className:"geist-sr-only",children:c})]}):c;return"href"in g&&void 0!==g.href?f?(0,t.jsx)(l.Text,{as:"span",className:x,style:{"--switch-checked-color":h},children:j}):(0,t.jsx)(i.default,{className:x,href:g.href,onClick:g.onClick,prefetch:g.prefetch,scroll:!1,style:{"--switch-checked-color":h},children:j}):(0,t.jsxs)("label",{className:(0,s.clsx)(a.default.container,n),"data-disabled":f?"true":"false",children:[(0,t.jsx)("input",{...g,checked:d,className:"geist-sr-only",disabled:f,type:"radio"}),(0,t.jsx)("div",{className:(0,s.clsx)(x,m),style:{"--switch-checked-color":h},children:j})]})}});e.s(["Switch",0,c],8923565)},923772,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.75 2.75C6.75 2.05964 7.30964 1.5 8 1.5C8.69036 1.5 9.25 2.05964 9.25 2.75V3H6.75V2.75ZM5.25 3V2.75C5.25 1.23122 6.48122 0 8 0C9.51878 0 10.75 1.23122 10.75 2.75V3H12.9201H14.25H15V4.5H14.25H13.8846L13.1776 13.6917C13.0774 14.9942 11.9913 16 10.6849 16H5.31508C4.00874 16 2.92263 14.9942 2.82244 13.6917L2.11538 4.5H1.75H1V3H1.75H3.07988H5.25ZM4.31802 13.5767L3.61982 4.5H12.3802L11.682 13.5767C11.6419 14.0977 11.2075 14.5 10.6849 14.5H5.31508C4.79254 14.5 4.3581 14.0977 4.31802 13.5767Z" fill="currentColor"/>');e.s(["Trash",0,t])},3233146,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M12.2803 0.719661L11.75 0.189331L11.2197 0.719661L1.09835 10.841C0.395088 11.5442 0 12.4981 0 13.4926V15.25V16H0.75H2.50736C3.50192 16 4.45575 15.6049 5.15901 14.9016L15.2803 4.78032L15.8107 4.24999L15.2803 3.71966L12.2803 0.719661ZM9.81066 4.24999L11.75 2.31065L13.6893 4.24999L11.75 6.18933L9.81066 4.24999ZM8.75 5.31065L2.15901 11.9016C1.73705 12.3236 1.5 12.8959 1.5 13.4926V14.5H2.50736C3.1041 14.5 3.67639 14.2629 4.09835 13.841L10.6893 7.24999L8.75 5.31065Z" fill="currentColor"/>');e.s(["Pencil",0,t])},9114193,e=>{"use strict";var t=e.i(31889),r=e.i(3306538),s=e.i(5468328);let n={301:"Moved Permanently",302:"Found",307:"Temporary Redirect",308:"Permanent Redirect"};e.s(["StatusCodeBadge",0,function(e){let{status:i}=e;return i&&n[i]?(0,t.jsx)(s.Tooltip,{text:n[i],children:(0,t.jsx)(r.Badge,{className:"cursor-default font-mono leading-none",variant:"gray-subtle",children:i})}):null}])},9728542,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DISALLOWED_FORM_PROPS:function(){return i},checkFormActionUrl:function(){return a},createFormSubmitDestinationUrl:function(){return l},hasReactClientActionAttributes:function(){return f},hasUnsupportedSubmitterAttributes:function(){return d},isSupportedFormEncType:function(){return o},isSupportedFormMethod:function(){return c},isSupportedFormTarget:function(){return u}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let i=["method","encType","target"];function l(e,t){let r;try{let t=window.location.href;r=new URL(e,t)}catch(t){throw Object.defineProperty(Error(`Cannot parse form action "${e}" as a URL`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E152",enumerable:!1,configurable:!0})}for(let[e,s]of(r.searchParams.size&&(r.search=""),new FormData(t)))"string"!=typeof s&&(s=s.name),r.searchParams.append(e,s);return r}function a(e,t){let r,s="action"===t?"an `action`":"a `formAction`";try{r=new URL(e,"http://n")}catch(t){console.error(`<Form> received ${s} that cannot be parsed as a URL: "${e}".`);return}r.searchParams.size&&console.warn(`<Form> received ${s} that contains search params: "${e}". This is not supported, and they will be ignored. If you need to pass in additional search params, use an \`<input type="hidden" />\` instead.`)}let o=e=>"application/x-www-form-urlencoded"===e,c=e=>"get"===e,u=e=>"_self"===e;function d(e){let t=e.getAttribute("formEncType");if(null!==t&&!o(t))return!0;let r=e.getAttribute("formMethod");if(null!==r&&!c(r))return!0;let s=e.getAttribute("formTarget");return!(null===s||u(s))}function f(e){let t=e.getAttribute("formAction");return t&&/\s*javascript:/i.test(t)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},4802342,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return d}});let s=e.r(31889),n=e.r(6695816),i=e.r(7445365),l=e.r(1104106),a=e.r(9923070),o=e.r(9728542),c=e.r(2928683),u=e.r(3488398);function d(e){let{replace:t,scroll:r,prefetch:d,ref:f,...h}=e,m=(0,n.useContext)(a.AppRouterContext),g=h.action,p="string"==typeof g;for(let e of o.DISALLOWED_FORM_PROPS)e in h&&delete h[e];let x=!!m&&p&&null===(!1===d||null===d?d:null),j=(0,n.useCallback)(e=>(x&&null!==m&&(0,c.mountFormInstance)(e,g,m,u.FetchStrategy.PPR),()=>{(0,c.unmountPrefetchableInstance)(e)}),[x,g,m]),S=(0,l.useMergedRef)(j,f??null);if(!p)return(0,s.jsx)("form",{...h,ref:S});let b=(0,i.addBasePath)(g);return(0,s.jsx)("form",{...h,ref:S,action:b,onSubmit:e=>(function(e,t){let{actionHref:r,onSubmit:s,replace:n,scroll:i,router:l}=t;if("function"==typeof s&&(s(e),e.defaultPrevented)||!l)return;let a=e.currentTarget,c=e.nativeEvent.submitter,u=r;if(c){if((0,o.hasUnsupportedSubmitterAttributes)(c)||(0,o.hasReactClientActionAttributes)(c))return;let e=c.getAttribute("formAction");null!==e&&(u=e)}let d=(0,o.createFormSubmitDestinationUrl)(u,a);e.preventDefault();let f=d.href;l[n?"replace":"push"](f,{scroll:i})})(e,{router:m,actionHref:b,replace:t,scroll:r,onSubmit:h.onSubmit})})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},4129547,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),s=e.i(8459493),n=e.i(5255926);let i=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13 2.5H3V4.5H13V2.5ZM3 7.5V5.75H4.75L4.75 7.5H3ZM4.75 8.75H3V10.5H4.75V8.75ZM6 10.5L6 8.75H13V10.5H6ZM4.75 11.75H3V12.5C3 13.0523 3.44772 13.5 4 13.5H4.75V11.75ZM6 13.5V11.75H13V12.5C13 13.0523 12.5523 13.5 12 13.5H6ZM6 7.5V5.75H13V7.5H6ZM3 1H1.5V2.5V12.5C1.5 13.8807 2.61929 15 4 15H12C13.3807 15 14.5 13.8807 14.5 12.5V2.5V1H13H3Z" fill="currentColor"/>');var l=e.i(7553931);function a(){let{teamSlug:e,project:r}=(0,l.useParams)()??{},n=`/${e}/${r}/cdn/redirects/upload`;return(0,t.jsx)(s.MenuItem,{href:n,scroll:!1,children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(i,{}),"CSV"]})})}e.s(["BulkRedirectsUploadMenuItem",0,function(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(n.Skeleton,{className:"w-full h-10"}),children:(0,t.jsx)(a,{})})}],4129547)},5255427,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),s=e.i(8459493),n=e.i(5255926),i=e.i(3233146),l=e.i(7553931);function a(){let{teamSlug:e,project:r}=(0,l.useParams)()??{},n=`/${e}/${r}/cdn/redirects/new`;return(0,t.jsx)(s.MenuItem,{href:n,scroll:!1,children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(i.Pencil,{}),"Manual"]})})}e.s(["BulkRedirectsCreateMenuItem",0,function(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(n.Skeleton,{className:"w-full h-10"}),children:(0,t.jsx)(a,{})})}])},431692,e=>{"use strict";var t=e.i(31889),r=e.i(6695816);let s=(0,r.createContext)(null);e.s(["SelectedRedirectsProvider",0,function(e){let{children:n}=e,[i,l]=(0,r.useState)(new Set),a=(0,r.useCallback)(e=>{l(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),o=(0,r.useCallback)((e,t)=>{l(r=>{let s=new Set(r);for(let r of e)t?s.add(r):s.delete(r);return s})},[]),c=(0,r.useCallback)(()=>l(new Set),[]),u=(0,r.useCallback)(e=>i.has(e),[i]),d=(0,r.useMemo)(()=>({selectedIds:i,toggleSelection:a,toggleAll:o,clearSelection:c,isSelected:u}),[i,a,o,c,u]);return(0,r.useEffect)(()=>(window.addEventListener("clear-selected-redirects",c),()=>window.removeEventListener("clear-selected-redirects",c)),[c]),(0,t.jsx)(s.Provider,{value:d,children:n})},"useSelectedRedirects",0,function(){let e=(0,r.useContext)(s);if(!e)throw Error("useSelectedRedirects must be used within SelectedRedirectsProvider");return e}])},3948350,e=>{"use strict";var t=e.i(31889),r=e.i(431692),s=e.i(923772),n=e.i(7553931),i=e.i(57106);function l(){let{selectedIds:e}=(0,r.useSelectedRedirects)(),{teamSlug:l,project:a}=(0,n.useParams)()??{};if(0===e.size)return null;let o=new URLSearchParams;for(let t of e)o.append("source",t);let c=`/${l}/${a}/cdn/redirects/delete?${o.toString()}`;return(0,t.jsx)(i.ButtonLink,{href:c,scroll:!1,prefix:(0,t.jsx)(s.Trash,{}),type:"error",className:"w-full @md-page:w-[110px]",children:"Delete"})}var a=e.i(8893913);function o(){let{selectedIds:e}=(0,r.useSelectedRedirects)(),{teamSlug:s,project:l}=(0,n.useParams)()??{};if(0===e.size)return null;let o=new URLSearchParams;for(let t of e)o.append("source",t);o.set("returnTo","staging");let c=`/${s}/${l}/cdn/redirects/restore?${o.toString()}`;return(0,t.jsx)(i.ButtonLink,{href:c,scroll:!1,prefix:(0,t.jsx)(a.RotateCounterClockwise,{}),className:"w-full @md-page:w-[110px]",children:"Restore"})}e.s(["BulkRedirectsActionButtonWithSelection",0,function(e){let{isStaging:s,actionButton:n}=e,{selectedIds:i}=(0,r.useSelectedRedirects)();return i.size>0?s?(0,t.jsx)(o,{}):(0,t.jsx)(l,{}):(0,t.jsx)(t.Fragment,{children:n})}],3948350)},3777872,e=>{"use strict";var t=e.i(31889),r=e.i(6695816);let s=(0,r.createContext)(null);e.s(["BulkRedirectsContextProvider",0,function(e){let{children:n}=e,[i,l]=(0,r.useState)(!1),a=(0,r.useCallback)(e=>{l(e)},[]),o=(0,r.useMemo)(()=>({isPageTransitioning:i,setIsPageTransitioning:a}),[i,a]);return(0,t.jsx)(s.Provider,{value:o,children:n})},"useBulkRedirectsContext",0,function(){let e=(0,r.useContext)(s);if(!e)throw Error("useBulkRedirectsContext must be used within BulkRedirectsContextProvider");return e}])},6648845,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),s=e.i(8835183),n=e.i(7553931),i=e.i(277234),l=e.i(7909933),a=e.i(3777872);function o(e){var o,u;let d,{searchParams:f,...h}=e,m=(0,r.useRef)(null),g=(0,r.useRef)(null),{q:p,environment:x}=(0,r.use)(f),[j,S]=(0,r.useState)(p??""),{data:b,isLoading:v}=(d=(0,n.useParams)(),o=d?.teamSlug,u=d?.project,(0,l.default)(()=>o&&u?`/api/v1/bulk-redirects/versions?teamId=${o}&projectId=${u}`:null,async e=>await (0,i.default)(e,{throwOnHTTPError:!0}))),w=b?.versions?.find(e=>e.isLive),{setIsPageTransitioning:C}=(0,a.useBulkRedirectsContext)();return(0,r.useEffect)(()=>{document.activeElement!==m.current&&S(p??"")},[p]),(0,r.useEffect)(()=>{let e=e=>{if(document.activeElement){let e=document.activeElement.tagName.toLowerCase();if("input"===e||"textarea"===e||"select"===e||"true"===document.activeElement.contentEditable)return}"/"===e.key&&m.current&&(e.preventDefault(),m.current.focus())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,t.jsx)(s.SearchInput,{clearable:!0,disabled:"staging"===x||!v&&!w,name:"q",value:j,onChange:e=>{let t=e.target.value;S(t),g.current&&clearTimeout(g.current);let r=e.currentTarget?.form;(t||r)&&(g.current=setTimeout(()=>{r&&(c(r),r.requestSubmit(),C(!0))},1e3))},onKeyDownCapture:e=>{if("Enter"===e.key){g.current&&clearTimeout(g.current),e.preventDefault();let t=e.currentTarget.form;t&&(c(t),t.requestSubmit(),C(!0))}},placeholder:"Search redirects…",ref:m,width:"auto",...h})}function c(e){if(!e)return;let t=e.querySelector('input[name="page"]');t?.parentNode&&(t.value="0")}e.s(["BulkRedirectsSearchInput",0,function(e){let{searchParams:n,...i}=e;return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(s.SearchInput,{disabled:!0,placeholder:"Search redirects…",...i}),children:(0,t.jsx)(o,{searchParams:n,...i})})}],6648845)},2244130,e=>{"use strict";var t=e.i(31889),r=e.i(6695816),s=e.i(8923565),n=e.i(431692),i=e.i(3777872);function l(e){let{searchParams:l,versionsPromise:a}=e,{versions:o}=(0,r.use)(a),{environment:c}=(0,r.use)(l),[u,d]=(0,r.useState)("staging"===c?"staging":"production"),f="staging"===u;(0,r.useEffect)(()=>{d("staging"===c?"staging":"production")},[c,d]);let h=o.some(e=>e.isStaging),{clearSelection:m}=(0,n.useSelectedRedirects)(),{setIsPageTransitioning:g}=(0,i.useBulkRedirectsContext)(),p=e=>{m(),d(e.target.value),g(!0),e.target?.form?.requestSubmit()};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(s.Switch,{name:"environment",children:[(0,t.jsx)(s.Switch.Control,{checked:!f,label:"Production",onChange:p,value:"production"}),(0,t.jsx)(s.Switch.Control,{checked:f,label:"Staging",onChange:p,value:"staging"})]}),h&&(0,t.jsx)("span",{className:"absolute -right-1 -top-1 h-3 w-3 rounded-full bg-blue-700"})]})}e.s(["BulkRedirectsSwitch",0,function(e){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsxs)(s.Switch,{children:[(0,t.jsx)(s.Switch.Control,{disabled:!0,label:"Production",value:"production"}),(0,t.jsx)(s.Switch.Control,{disabled:!0,label:"Staging",value:"staging"})]}),children:(0,t.jsx)(l,{...e})})}])},8447985,e=>{"use strict";var t=e.i(31889),r=e.i(4991687),s=e.i(6694387),n=e.i(8674454),i=e.i(3306538),l=e.i(8876434),a=e.i(2936702),o=e.i(3646124),c=e.i(6695816),u=e.i(5441366),d=e.i(9114193),f=e.i(9031477),h=e.i(8459493),m=e.i(5255926),g=e.i(5756088),p=e.i(3233146),x=e.i(7553931),j=e.i(1717203),S=e.i(7557283);function b(e){let{redirect:r,isStaging:s=!1}=e,{can:n}=(0,j.default)(),i=n(S.Action.Update,S.Resource.Project),{teamSlug:l,project:a}=(0,x.useParams)()??{},o=new URLSearchParams;o.set("source",r.source),o.set("statusCode",String(r.statusCode)),o.set("destination",r.destination),o.set("caseSensitive",String(r.caseSensitive)),o.set("query",String(r.query)),s&&o.set("returnTo","staging");let c=`/${l}/${a}/cdn/redirects/edit?${o.toString()}`;return(0,t.jsx)(h.MenuItem,{disabled:!i,href:c,scroll:!1,children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[i?(0,t.jsx)(p.Pencil,{}):(0,t.jsx)(g.LockClosed,{}),"Edit"]})})}function v(e){return(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(m.Skeleton,{className:"w-full h-10"}),children:(0,t.jsx)(b,{...e})})}var w=e.i(923772);function C(e){let{source:r,isStaging:s=!1}=e,{can:n}=(0,j.default)(),i=n(S.Action.Delete,S.Resource.Project),{teamSlug:l,project:a}=(0,x.useParams)()??{},o=new URLSearchParams;o.set("source",r),o.set("bust",Date.now().toString()),s&&o.set("returnTo","staging");let c=`/${l}/${a}/cdn/redirects/delete?${o.toString()}`;return(0,t.jsx)(h.MenuItem,{disabled:!i,href:c,scroll:!1,prefix:i?(0,t.jsx)(w.Trash,{}):(0,t.jsx)(g.LockClosed,{}),type:"error",children:"Delete"})}function y(e){return(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(m.Skeleton,{className:"w-full h-10"}),children:(0,t.jsx)(C,{...e})})}var k=e.i(8893913);function R(e){let{redirect:r,isStaging:s=!1}=e,{can:n}=(0,j.default)(),i=n(S.Action.Update,S.Resource.Project),{teamSlug:l,project:a}=(0,x.useParams)()??{};if(!s)return null;let o=new URLSearchParams;o.set("source",r.source),o.set("returnTo","staging");let c=`/${l}/${a}/cdn/redirects/restore?${o.toString()}`;return(0,t.jsx)(h.MenuItem,{disabled:!i,href:c,scroll:!1,prefix:i?(0,t.jsx)(k.RotateCounterClockwise,{}):(0,t.jsx)(g.LockClosed,{}),children:"Restore"})}function P(e){return(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(m.Skeleton,{className:"w-full h-10"}),children:(0,t.jsx)(R,{...e})})}var _=e.i(109803);function N(e){let{redirect:r,version:s,isStaging:n}=e;return!n||!s?.alias||r.source.startsWith("http://")||r.source.startsWith("https://")||r.source.startsWith("//")?null:(0,t.jsx)(h.MenuItem,{onClick:()=>{let e=`https://${s.alias}${r.source}`;window.open(e,"_blank","noopener,noreferrer")},children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(_.External,{}),"Test"]})})}function L(e){return(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(m.Skeleton,{className:"w-full h-10"}),children:(0,t.jsx)(N,{...e})})}var M=e.i(3175682),A=e.i(8161149),E=e.i(5468328),B=e.i(1438473),H=e.i(57106),T=e.i(2504781),$=e.i(455575);e.i(6483798);var D=e.i(8287059);function O(){let e=(0,D.useOpenUpgradeModal)(),r=(0,$.useToasts)(),{can:s}=(0,j.default)();return s(S.Action.Update,S.Resource.BillingPlan)?(0,t.jsx)(T.Button,{onClick:()=>{e({source:"bulk-redirects",onConversionError:()=>r.error("Upgrade failed"),onConversionSuccess:()=>{r.success("Upgraded to Pro successfully.")}})},children:"Upgrade"}):(0,t.jsx)(E.Tooltip,{desktopOnly:!0,text:"You need additional permissions to upgrade your team",children:(0,t.jsx)(T.Button,{disabled:!0,children:"Upgrade"})})}var z=e.i(3882007);function F(e){let{hasAnyBulkRedirects:r,teamPromise:s,isStaging:n=!1}=e,i=(0,c.use)(s),{can:l}=(0,j.default)(),{teamSlug:a,project:o}=(0,x.useParams)()??{},u=l(S.Action.Update,S.Resource.Project),d=`/${a}/${o}/cdn/redirects/new`,f=!(0,z.isBulkRedirectsAvailable)(i),h=(0,t.jsx)(E.Tooltip,{disableTriggers:u,text:"Additional permissions are needed to create redirects",children:(0,t.jsx)(H.ButtonLink,{href:d,type:"secondary",disabled:!u,children:"Create redirects"})});return f?(0,t.jsxs)(A.EmptyState.Root,{icon:(0,t.jsx)(A.EmptyState.Icon,{icon:(0,t.jsx)(B.ArrowRight,{size:16}),size:32}),title:"Unlock project-level redirects",description:"Upgrade your plan to Pro to manage redirects at the project level.",children:[(0,t.jsx)(O,{}),(0,t.jsx)(H.Link,{external:!0,href:"/docs/redirects/bulk-redirects",variant:"secondary",children:"Learn more"})]}):n&&!r?(0,t.jsx)(A.EmptyState.Root,{description:"Pending redirects that have been added but not published to production yet will appear here.",icon:(0,t.jsx)(A.EmptyState.Icon,{icon:(0,t.jsx)(B.ArrowRight,{size:16}),size:24}),title:"No staging redirects",secondary:!0,className:"bg-background-100",children:h}):r?(0,t.jsx)(A.EmptyState.Root,{description:"No redirects found for your search query.",icon:(0,t.jsx)(A.EmptyState.Icon,{icon:(0,t.jsx)(B.ArrowRight,{size:16}),size:24}),title:"No redirects",children:h}):(0,t.jsx)(A.EmptyState.Root,{description:"Create redirects in your project to make sure every path can always be accessed.",icon:(0,t.jsx)(A.EmptyState.Icon,{icon:(0,t.jsx)(B.ArrowRight,{size:16}),size:24}),title:"No redirects",secondary:!0,className:"bg-background-100",children:h})}function I(e){let{hasAnyBulkRedirects:r,teamPromise:s,isStaging:n=!1}=e;return(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(A.EmptyState.Root,{description:(0,t.jsx)(m.Skeleton,{width:250,height:20}),icon:(0,t.jsx)(A.EmptyState.Icon,{icon:(0,t.jsx)(B.ArrowRight,{size:16}),size:24}),title:(0,t.jsx)(m.Skeleton,{width:75,height:20}),secondary:!0,className:"bg-background-100",children:(0,t.jsx)(m.Skeleton,{width:80,height:40})}),children:(0,t.jsx)(F,{hasAnyBulkRedirects:r,teamPromise:s,isStaging:n})})}var U=e.i(431692),V=e.i(3777872),q=e.i(3869281);function W(e){let{rows:r}=e,{selectedIds:s,toggleAll:n}=(0,U.useSelectedRedirects)(),i=r.map(e=>e.original.source),l=i.length>0&&i.every(e=>s.has(e)),a=i.some(e=>s.has(e));return(0,t.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,t.jsx)(q.Checkbox,{checked:l,indeterminate:a&&!l,disabled:0===i.length,onChange:e=>n(i,e.target.checked)})})}function Z(e){let{row:r}=e,{isSelected:s,toggleSelection:n}=(0,U.useSelectedRedirects)();return(0,t.jsx)("div",{className:"flex items-center justify-center",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(q.Checkbox,{checked:s(r.original.source),onChange:()=>n(r.original.source)})})}function G(e){let{searchParamsPromise:r,bulkRedirectsPromise:s,teamPromise:n,isStaging:i=!1}=e,l=(0,c.use)(r),{redirects:o,pagination:d,version:h}=(0,c.use)(s),m=o.length>0,{clearSelection:g}=(0,U.useSelectedRedirects)(),{isPageTransitioning:p,setIsPageTransitioning:x}=(0,V.useBulkRedirectsContext)();(0,c.useEffect)(()=>{p&&x(!1)},[o]);let[j,S]=(0,c.useTransition)(),[b,v]=(0,c.useState)(l.page?Number(Array.isArray(l.page)?l.page[0]:l.page):void 0),[w,C]=(0,c.useState)(l.pageSize?Number(Array.isArray(l.pageSize)?l.pageSize[0]:l.pageSize):void 0),y=!i&&h?.redirectCount&&h.redirectCount<=5e4,[k,R]=(0,c.useState)(l.sortBy),[P,_]=(0,c.useState)("1"===l.sortDesc?"desc":"asc"),N=(0,c.useRef)(null),L=(0,c.useRef)(null),M=(0,c.useRef)(b),A=(0,c.useRef)(w),E=(0,c.useRef)(k),B=(0,c.useRef)(P),H=(0,c.useCallback)(e=>{y&&(g(),e?(R(e.id),_(e.desc?"desc":"asc")):(R(void 0),_(void 0)))},[g,y]);(0,c.useEffect)(()=>{let e=M.current!==b,t=A.current!==w,r=E.current!==k,s=B.current!==P;M.current=b,A.current=w,E.current=k,B.current=P,(e||t||r||s)&&(g(),S(()=>{let e=document.querySelector("form#bulk-redirects-form");e?.requestSubmit()}))},[b,w,k,P,g]);let T=Y({isStaging:i,version:h}),$=(0,c.useMemo)(()=>k?[{id:k,desc:"desc"===P}]:[{id:"source"}],[k,P]),D=(0,c.useMemo)(()=>o.map(e=>({...e,statusCode:e.statusCode??"308"}))??[],[o]);if(0===D.length)return(0,t.jsx)(I,{hasAnyBulkRedirects:m,teamPromise:n,isStaging:i});let O=y?[u.useSortBy,u.usePagination]:[u.usePagination];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.ShareDomCopy,{title:"Redirects",children:(0,t.jsx)(a.SonarTable,{columns:T,customPagination:{pageCount:d?.numPages??50,onNextPage:()=>{v(e=>Math.max(0,(e??0)+1))},onPrevPage:()=>{v(e=>Math.max(0,(e??1)-1))},onSetPageSize:e=>{C(e),v(0)}},defaultPageIndex:b,defaultPageSize:w??20,defaultSort:y?$:void 0,data:D,isLoading:j||p,manualSortBy:!0,onSortChange:H,plugins:O,showSearch:!1},"bulk-redirects-table")}),b&&b>0&&d?.numPages?(0,t.jsx)("input",{type:"hidden",name:"pageCount",value:d.numPages}):null,b&&b>0?(0,t.jsx)("input",{type:"hidden",name:"page",value:b,ref:N}):null,w?(0,t.jsx)("input",{type:"hidden",name:"pageSize",value:w,ref:L}):null,y&&k?(0,t.jsx)("input",{type:"hidden",name:"sortBy",value:k}):null,y&&"desc"===P?(0,t.jsx)("input",{type:"hidden",name:"sortDesc",value:"desc"===P?"1":"0"}):null]})}function K(e){let{cell:r}=e;return(0,t.jsx)(d.StatusCodeBadge,{status:r.value})}function J(e){let{row:r,cell:s}=e,n=r.original.action;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"truncate",children:s.value}),"+"===n?(0,t.jsx)(i.Badge,{variant:"green-subtle",className:"shrink-0",children:"Added"}):"-"===n?(0,t.jsx)(i.Badge,{variant:"red-subtle",className:"shrink-0",children:"Deleted"}):"~"===n?(0,t.jsx)(i.Badge,{variant:"amber-subtle",className:"shrink-0",children:"Edited"}):null]})}function X(){return(0,t.jsx)(t.Fragment,{})}function Y(e){let{isStaging:i=!1,version:a}=e,u=(0,M.useCopyAction)(),d=(0,c.useCallback)(()=>a?.alias?{icon:(0,t.jsxs)("div",{className:"flex items-center justify-center text-blue-900",children:["Test ",(0,t.jsx)(_.External,{size:12})]}),label:"Test redirect",onClick:e=>{let t=e.value,r=`https://${a.alias}${t}`;window.open(r,"_blank","noopener,noreferrer")}}:null,[a?.alias]);return(0,c.useMemo)(()=>{let e=i?d():void 0,c=[u()];return e&&c.push(e),[{id:"selection",Header:W,Cell:Z,disableSortBy:!0,disableGlobalFilter:!0,columnClassName:"w-[50px] min-w-[50px] max-w-[50px]",cellActions:[]},{Header:"Source",accessor:"source",disableGlobalFilter:!1,sortDescFirst:!1,Cell:J,cellActions:c},{Header:"Code",accessor:"statusCode",disableGlobalFilter:!1,sortDescFirst:!1,Cell:K},{Header:"Destination",accessor:"destination",disableGlobalFilter:!1,sortDescFirst:!1,Cell:o.DefaultCell,cellActions:[u()]},{Header:X,id:"moreActions",Cell:function(e){let{row:o}=e,c=o.original.action;return(0,t.jsx)("div",{className:"flex items-center justify-end",children:(0,t.jsxs)(r.MenuContainer,{children:[(0,t.jsx)(s.MenuButton,{"aria-label":"More Actions",className:"shrink-0",shape:"square",svgOnly:!0,typeName:"button",variant:"unstyled",children:(0,t.jsx)(l.MoreHorizontal,{})}),(0,t.jsx)(n.Menu,{children:i?(0,t.jsxs)(t.Fragment,{children:["-"===c?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{redirect:o.original,isStaging:i}),(0,t.jsx)(L,{redirect:o.original,version:a,isStaging:i})]}),(0,t.jsx)(P,{redirect:o.original,isStaging:i})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{redirect:o.original,isStaging:i}),(0,t.jsx)(y,{source:o.original.source,isStaging:i})]})})]})})},columnClassName:"justify-end text-end",disableSortBy:!0}]},[u,d,i,a])}e.s(["BulkRedirectsTable",0,function(e){let{searchParamsPromise:r,bulkRedirectsPromise:s,teamPromise:n}=e,i=(0,c.use)(r),l="staging"===i.environment,o=Y({isStaging:l});return(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(a.SonarTable,{columns:o,customPagination:{...i.pageCount?{pageCount:Number(i.pageCount)}:{},onNextPage:()=>{},onPrevPage:()=>{},onSetPageSize:()=>{}},defaultPageIndex:i.page?Number(i.page):1,defaultPageSize:i.pageSize?Number(i.pageSize):20,defaultSort:[{id:"source"}],data:[],isLoading:!0,showSearch:!1,manualSortBy:!0,plugins:[u.useSortBy,u.usePagination]},"bulk-redirects-table"),children:(0,t.jsx)(G,{bulkRedirectsPromise:s,searchParamsPromise:r,teamPromise:n,isStaging:l})},`bulk-redirects-table-${JSON.stringify(i)}-${l?"staging":"production"}`)}],8447985)}]);

//# debugId=7b496ede-e19e-eb8c-85d0-20408cd7d9f9
//# sourceMappingURL=694669e422d6a823.js.map