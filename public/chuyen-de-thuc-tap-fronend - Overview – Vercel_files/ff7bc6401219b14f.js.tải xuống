;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d1f4c1ba-b626-c7ff-5e88-466a4c0f1cad")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,380513,e=>{"use strict";var t=e.i(7909933),n=e.i(8042625),r=e.i(5338940),s=e.i(277234);function l(){let{team:e,isReady:l}=(0,r.useTeam)(),a=l?`/api/feature-flags${e?(0,n.encode)({teamSlug:e.slug}):""}`:null,{data:i,isLoading:o,error:d}=(0,t.default)(a,e=>(0,s.fetchAPI)(e));return{data:i,error:d,isLoading:o}}e.s(["useFeatureFlag",0,function(e){let{data:t,error:n,isLoading:r}=l();return{data:t?.[e],error:n,isLoading:r}},"useFeatureFlags",0,l])},2425341,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.25 1.25V2.03971C5.87928 2.18571 4.62678 2.72736 3.6089 3.54824L3.03033 2.96967L2.5 2.43934L1.43934 3.5L1.96967 4.03033L2.54824 4.6089C1.57979 5.80976 1 7.33717 1 9C1 12.866 4.13401 16 8 16C11.866 16 15 12.866 15 9C15 7.33717 14.4202 5.80976 13.4518 4.6089L14.0303 4.03033L14.5607 3.5L13.5 2.43934L12.9697 2.96967L12.3911 3.54824C11.3732 2.72736 10.1207 2.18571 8.75 2.03971V1.25H9.25H10V-0.25H9.25H8.75H7.25H6.75H6V1.25H6.75H7.25ZM2.5 9C2.5 5.96243 4.96243 3.5 8 3.5C11.0376 3.5 13.5 5.96243 13.5 9C13.5 12.0376 11.0376 14.5 8 14.5C4.96243 14.5 2.5 12.0376 2.5 9ZM8.75 6.75V6H7.25V6.75V9V9.75H8.75V9V6.75Z" fill="currentColor"/>');e.s(["Stopwatch",0,t])},5023172,e=>{"use strict";var t=e.i(31889),n=e.i(6695816),r=e.i(6891161),s=e.i(455575),l=e.i(277234),a=e.i(4244280),i=e.i(57106);e.s(["StartBuildingNowModal",0,function(e){let[o,d]=(0,n.useState)(!1),u=(0,s.useToasts)(),c=(0,n.useCallback)(async()=>{if(!e.deploymentId||!e.teamId)return;d(!0);let t=new URLSearchParams;t.append("teamId",e.teamId);let n=`${(0,a.API_DEPLOYMENTS)("v13")}/${e.deploymentId}/skip-queue?${t.toString()}`;200===(await (0,l.fetchAPI)(n,{method:"POST",body:void 0,throwOnHTTPError:!1,returnStatus:!0})).status?(u.success("Deployment will start building now."),e.onSuccess?.()):u.error("Something went wrong"),d(!1),e.onClose()},[e,u]);return(0,t.jsxs)(r.Modal.Modal,{active:e.active,onClickOutside:e.onClose,width:"500px",children:[(0,t.jsxs)(r.Modal.Body,{children:[(0,t.jsx)(r.Modal.Header,{children:(0,t.jsx)(r.Modal.Title,{children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:"Start Building Now"})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["This will bypass the regular queue and start your build immediately. On-demand builds are billed in 1 minute increments."," ",(0,t.jsx)(i.Link,{href:"/docs/deployments/managing-builds#on-demand-concurrent-builds",target:"_blank",variant:"highlight",children:"Learn more."})]}),e.teamId&&e.projectName?(0,t.jsxs)("p",{className:"text-copy-14",children:["If you frequently need faster builds for this project, consider enabling"," ",(0,t.jsx)(i.Link,{as:`/${e.teamId}/${encodeURIComponent(e.projectName)}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",variant:"highlight",children:"On-Demand Concurrent Builds"})," ","at the project level."]}):null,(0,t.jsx)("p",{className:"text-copy-14",children:'By clicking "Confirm" you agree to be charged for on-demand concurrency.'})]})]}),(0,t.jsxs)(r.Modal.Actions,{children:[(0,t.jsx)(r.Modal.Action,{loading:!1,onClick:e.onClose,type:"secondary",children:"Close"}),(0,t.jsx)(r.Modal.Action,{disabled:o,loading:o,onClick:c,children:"Confirm"})]})]})}])},8366444,e=>{"use strict";var t=e.i(4496450);let n={enabled:!0,disabledReason:void 0},r=e=>({enabled:!1,disabledReason:e});e.s(["useOnDemandConcurrentBuilds",0,function(e,s){if(!e||!e.billing)return r("other");if("enterprise"===e.billing.plan)return(0,t.isLegacyPlanIteration)(e.billing.planIteration)?r("enterprise-non-unbundled"):s?n:r("no-permission");if("pro"===e.billing.plan)return"active"===e.billing.status?s?n:r("no-permission"):r("pro-non-active");return r("hobby-plan")}])},9041876,e=>{"use strict";function t(e){return e?.resourceConfig?.buildEntitlements?.enhancedBuilds?"enhanced":"standard"}function n(e,n){let r=e?.resourceConfig?.buildMachineType;return"turbo"===r||"enhanced"===r?r:t(n)}e.s(["getDefaultBuildMachine",0,t,"getProjectBuildMachine",0,n,"getTeamConcurrentBuildsTier",0,function(e){if(!e?.billing?.invoiceItems?.concurrentBuilds)return"1";let t=e.billing.invoiceItems.concurrentBuilds.quantity||1;return t>=10?"3":t>=5?"2":"1"},"getTierBasedPricing",0,function(e,t,n){let r={1:"0.030",2:"0.026",3:"0.022"};if(!e?.onDemandConcurrencyMinutes)return"enhanced"===n?r[t]||"0.030":void 0;if(!e.onDemandConcurrencyMinutes.matrix)return e.onDemandConcurrencyMinutes.defaultUnitAmount||("enhanced"===n?r[t]||"0.030":void 0);let s=e.onDemandConcurrencyMinutes.matrix.find(e=>{let r=e.dimensionValues;return r&&r.length>=2&&r[0]===t&&r[1]===n});return s?.unitAmount||e.onDemandConcurrencyMinutes.defaultUnitAmount||("enhanced"===n?r[t]||"0.030":void 0)},"isUpgradedBuildMachine",0,function(e,t){return["enhanced","turbo"].includes(n(e,t))}])},3577296,(e,t,n)=>{"use strict";let r;Object.defineProperty(n,"__esModule",{value:!0}),n.ParsingError=void 0;class s extends Error{constructor(e,t){super(e),this.cause=t}}function l(){return o(!1)||function(){let e=u(/^([^<]+)/);if(e){let t={type:"Text",content:e[1]};return{excluded:!1===r.options.filter(t),node:t}}}()||d()||function(){if(r.xml.startsWith("<![CDATA[")){let e=r.xml.indexOf("]]>");if(e>-1){let t=e+3,n={type:"CDATA",content:r.xml.substring(0,t)};return r.xml=r.xml.slice(t),{excluded:!1===r.options.filter(n),node:n}}}}()||i()}function a(){return u(/\s*/),o(!0)||d()||function(){let e=u(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||u(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||u(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||u(/^<!DOCTYPE\s+\S+\s*>/);if(e){let t={type:"DocumentType",content:e[0]};return{excluded:!1===r.options.filter(t),node:t}}}()||i()}function i(){let e=u(/^<\?([\w-:.]+)\s*/);if(!e)return;let t={name:e[1],type:"ProcessingInstruction",content:""},n=r.xml.indexOf("?>");if(n>-1)t.content=r.xml.substring(0,n).trim(),r.xml=r.xml.slice(n);else throw new s("Failed to parse XML","ProcessingInstruction closing tag not found");return u(/\?>/),{excluded:!1===r.options.filter(t),node:t}}function o(e){let t=u(/^<([^?!</>\s]+)\s*/);if(!t)return;let n={type:"Element",name:t[1],attributes:{},children:[]},a=!e&&!1===r.options.filter(n);for(;!(0===r.xml.length||c(">")||c("?>")||c("/>"));){let e=function(){let e=u(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(e)return{name:e[1].trim(),value:e[2].trim().replace(/^['"]|['"]$/g,"")}}();if(!e)return;n.attributes[e.name]=e.value}if(u(/^\s*\/>/))return n.children=null,{excluded:a,node:n};u(/\??>/);let i=l();for(;i;)i.excluded||n.children.push(i.node),i=l();if(r.options.strictMode){let e=`</${n.name}>`;if(r.xml.startsWith(e))r.xml=r.xml.slice(e.length);else throw new s("Failed to parse XML",`Closing tag not matching "${e}"`)}else u(/^<\/[\w-:.\u00C0-\u00FF]+\s*>/);return{excluded:a,node:n}}function d(){let e=u(/^<!--[\s\S]*?-->/);if(e){let t={type:"Comment",content:e[0]};return{excluded:!1===r.options.filter(t),node:t}}}function u(e){let t=r.xml.match(e);if(t)return r.xml=r.xml.slice(t[0].length),t}function c(e){return 0===r.xml.indexOf(e)}function m(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.trim();let l=n.filter||(()=>!0);r={xml:e,options:Object.assign(Object.assign({},n),{filter:l,strictMode:!0===n.strictMode})};let o=i(),d=[],u=a();for(;u;){if("Element"===u.node.type){if(t)throw Error("Found multiple root nodes");t=u.node}u.excluded||d.push(u.node),u=a()}if(!t)throw new s("Failed to parse XML","Root Element not found");if(0!==r.xml.length)throw new s("Failed to parse XML","Not Well-Formed XML");return{declaration:o?o.node:null,root:t,children:d}}n.ParsingError=s,t.exports=m,n.default=m},15932,(e,t,n)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let s=r(e.r(3577296));function l(e){let t;if(e.options.indentation||e.options.lineSeparator)for(e.content+=e.options.lineSeparator,t=0;t<e.level;t++)e.content+=e.options.indentation}function a(e,t){e.content+=t}function i(e,t){t.content.length>0&&l(t),a(t,"<?"+e.name),a(t," "+e.content.trim()),a(t,"?>")}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.indentation="indentation"in t?t.indentation:"    ",t.collapseContent=!0===t.collapseContent,t.lineSeparator="lineSeparator"in t?t.lineSeparator:"\r\n",t.whiteSpaceAtEndOfSelfclosingTag=!0===t.whiteSpaceAtEndOfSelfclosingTag,t.throwOnFailure=!1!==t.throwOnFailure;try{let n=(0,s.default)(e,{filter:t.filter,strictMode:t.strictMode}),r={content:"",level:0,options:t,path:[]};if(n.declaration&&i(n.declaration,r),n.children.forEach(function(e){!function e(t,n,r){if("Element"===t.type)!function(t,n,r){var s,i,o,d;if(n.path.push(t.name),!r&&n.content.length>0&&l(n),a(n,"<"+t.name),s=n,Object.keys(i=t.attributes).forEach(function(e){let t=i[e].replace(/"/g,"&quot;");a(s," "+e+'="'+t+'"')}),null===t.children||n.options.forceSelfClosingEmptyTag&&0===t.children.length){let e=n.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";a(n,e)}else if(0===t.children.length)a(n,"></"+t.name+">");else{let s=t.children;a(n,">"),n.level++;let i="preserve"===t.attributes["xml:space"]||r,u=!1;if(!i&&n.options.ignoredPaths){let e,t;o=n.path,d=n.options.ignoredPaths,e="/"+o.join("/"),t=o[o.length-1],i=u=d.includes(t)||d.includes(e)}if(!i&&n.options.collapseContent){let e=!1,t=!1,n=!1;s.forEach(function(l,a){"Text"===l.type?(l.content.includes("\n")?(t=!0,l.content=l.content.trim()):0!==a&&a!==s.length-1||r||0!==l.content.trim().length||(l.content=""),(l.content.trim().length>0||1===s.length)&&(e=!0)):"CDATA"===l.type?e=!0:n=!0}),!e||n&&t||(i=!0)}s.forEach(function(t){e(t,n,r||i)}),n.level--,r||i||l(n),u&&function(e){let t;for(t=0,e.content=e.content.replace(/ +$/,"");t<e.level;t++)e.content+=e.options.indentation}(n),a(n,"</"+t.name+">")}n.path.pop()}(t,n,r);else if("ProcessingInstruction"===t.type)i(t,n);else if("string"==typeof t.content){var s=t.content,o=n,d=r;if(!d){let e=s.trim();o.options.lineSeparator?s=e:0===e.length&&(s=e)}s.length>0&&(!d&&o.content.length>0&&l(o),a(o,s))}else throw Error("Unknown node type: "+t.type)}(e,r,!1)}),!t.lineSeparator)return r.content;return r.content.replace(/\r\n/g,"\n").replace(/\n/g,t.lineSeparator)}catch(n){if(t.throwOnFailure)throw n;return e}}o.minify=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(e,Object.assign(Object.assign({},t),{indentation:"",lineSeparator:""}))},t.exports=o,n.default=o},6656921,1895466,e=>{"use strict";var t=e.i(31889),n=e.i(9689002),r=e.i(5089756),s=e.i(15932);let l=["GET","PUT","POST","PATCH","DELETE"],a=["Request","Response"],i=["Requests","Settings"],o=["Body","Headers","Params","Snippets"],d=["Body","Headers"],u=["application/json","text/plain"],c=e=>{if(!e)return"";try{return new URL(e).pathname}catch{return e}},m=e=>e?e.endsWith("/")?e.slice(0,-1):e:"",h=e=>e?e.startsWith("/")?e:`/${e}`:"/",p={sendRequest:{label:"Send Request",keys:[["Meta","Enter"]],predicate:e=>(0,r.isApple)()?e.metaKey&&"Enter"===e.key:e.ctrlKey&&"Enter"===e.key},newRequest:{label:"New Request",keys:[["Meta","K"],"N"],predicate:e=>e.metaKey&&"N"===e.key},toggleSidebar:{label:"Toggle Sidebar",keys:[["Meta","K"],"B"],predicate:e=>e.metaKey&&"B"===e.key},focusUrl:{label:"Focus Url",keys:[["Meta","K"],"L"],predicate:e=>e.metaKey&&"L"===e.key}},f=e=>{if(!e||!e.response)return"";let{response:t}=e;if(!t.content)return"";if("Raw"===e.ui.responseBodyView)return t.content.text||"";let{mimeType:n,text:r}=t.content;if(!r)return"";try{if(!n)return r;if(n.startsWith("application/json"))return JSON.stringify(JSON.parse(r),null,2);if(n.startsWith("application/xml")||n.startsWith("text/xml")||n.startsWith("text/html"))return(0,s.default)(r,{indentation:"  ",collapseContent:!0});return r}catch{return r}},g={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",204:"No Content",301:"Moved Permanently",302:"Found",304:"Not Modified",400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"},y=e=>g[e]||"",x=()=>`reqCol_${Math.random().toString(36).substring(2,10)}`,b=e=>{if(!e.postData||!e.postData.mimeType)return e;let{headers:t,postData:{mimeType:n}}=e,r=t.find(e=>"content-type"===e.name.toLowerCase());return r?{...e,headers:t.map(e=>e.name===r.name?{...e,value:n}:e)}:{...e,headers:[{name:"Content-Type",value:n},...t]}};e.s(["appTabs",0,i,"calculateContentType",0,b,"easterEggUrl",0,()=>{let e=["https://ai-sdk.dev","https://nextjs.org","https://nuxt.com","https://svelte.dev","https://turborepo.com","https://v0.app","https://vercel.com/agent","https://vercel.com/botid","https://vercel.com/docs/rolling-releases","https://vercel.com/fluid","https://vercel.com/products/observability","https://vercel.com/products/previews","https://vercel.com/products/rendering","https://vercel.com/security","https://vercel.com/security/bot-management","https://vercel.com/security/web-application-firewall","https://vercel.com/solutions/turborepo","https://doom-captcha.vercel.app"];return e[Math.floor(Math.random()*e.length)]},"ensureLeadingSlash",0,h,"extractPathname",0,c,"formatBytes",0,e=>{if(!e||e<=0)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024)),n=Number.parseFloat((e/Math.pow(1024,t)).toFixed(1));return`${n} ${["B","KB","MB","GB","TB"][t]}`},"formatResponseBody",0,f,"generateRequestCollectionId",0,x,"getStatusText",0,y,"makeTabs",0,e=>e.map(e=>({value:e,title:e})),"methodShorthand",0,{GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PTCH",DELETE:"DEL"},"methods",0,l,"microViewTabs",0,a,"mimeTypeToLabel",0,e=>e?e.startsWith("application/json")?"JSON":e.startsWith("text/plain")?"Text":e.startsWith("application/xml")||e.startsWith("text/xml")?"XML":e.startsWith("text/html")?"HTML":"Text":"Text","mimeTypes",0,u,"requestTabs",0,o,"responseTabs",0,d,"shortcutKeyToKbd",0,e=>{let r="text-gray-600";return(0,t.jsx)("span",{className:"flex flex-row gap-1",children:e.flatMap(e=>Array.isArray(e)?(0,t.jsx)(n.Kbd,{className:r,ctrl:"Ctrl"===e[0],shift:"Shift"===e[0],alt:"Alt"===e[0],meta:"Meta"===e[0],children:e[1]},`shortcut-${e[0]}-${e[1]}`):(0,t.jsx)(n.Kbd,{className:r,children:e},e))})},"shortcutKeyToString",0,e=>e.map(e=>Array.isArray(e)?e.join("+"):e).join(" "),"shortcuts",0,p,"stripTrailingSlash",0,m],1895466);var j=e.i(6695816),v=e.i(9171423);let C=async e=>{let t={method:e.method,headers:e.headers.reduce((e,t)=>(e[t.name]=t.value,e),{}),body:e.postData?.text||void 0},n=await fetch(e.url,t),r={};n.headers.forEach((e,t)=>{r[t]=e});let s=await n.text();return{status:n.status,statusText:n.statusText||y(n.status),headers:Object.entries(r).map(e=>{let[t,n]=e;return{name:t,value:n}}),content:{size:0,mimeType:n.headers.get("Content-Type")||"",text:s},headersSize:-1,bodySize:s.length,httpVersion:"HTTP/1.1",redirectURL:"",cookies:[]}},w={method:"GET",headers:[],cookies:[],url:"",postData:{mimeType:u[0],text:""},httpVersion:"HTTP/1.1",headersSize:-1,bodySize:-1,queryString:[]},S={response:null,transportError:null,ui:{responseBodyView:"Pretty"}};e.s(["useRequestBuilder",0,e=>{let{deploymentId:t,deploymentUrl:n,teamId:r}=e,[s,u]=(0,j.useState)("HTTP/1.1"),[g,y]=(0,j.useState)(!0),[E,T]=(0,j.useState)(i[0]),[k,N]=(0,j.useState)(a[0]),[B,I]=(0,j.useState)(o[0]),[R,M]=(0,j.useState)(d[0]),[L,D]=(0,j.useState)(!1),{requestCollections:P,setRequestCollections:A,addRequestCollection:O,removeRequestCollection:q,requestCollectionsAreLoading:U,activeRequestCollectionId:F,activeRequestCollection:_,setActiveRequestCollectionId:$,setMethod:H,pathname:V,setPathname:z,setRequestBody:G,setMimeType:W,setTransportError:Q,setResponseHar:K,setResponseBodyView:Y,responseBody:J,setRequestHeader:X,deleteRequestHeader:Z,addRequestHeader:ee,setActiveRequestCollectionName:et}=(e=>{let{urlBase:t}=e,[n,r]=(0,j.useState)(!0),[s,a]=(0,j.useState)(new Map),[i,o]=(0,j.useState)(null);(0,j.useEffect)(()=>{let e=setTimeout(()=>{let e=[x(),x(),x()];a(new Map([[e[0],{...S,id:e[0],name:"My First Request",request:b({...w,method:l[0],url:`${t}/api/hello`})}],[e[1],{...S,id:e[1],name:"Ban Scammer",request:b({...w,method:"DELETE",url:`${t}/api/ban/captain-spectacular`,headers:[{name:"CoNtEnT-TyPe",value:"application/json"}]})}],[e[2],{...S,id:e[2],name:"Ziltoid",request:b({...w,method:"POST",url:`${t}/api/ziltoid/visitPlanet`,postData:{mimeType:"application/json",text:JSON.stringify({nebulo:9,omniscient:!1,ultimateCupOfCoffee:!0,time:"6 earth minutes"},null,2)}})}]])),r(!1),o(e[2])},1e3);return()=>clearTimeout(e)},[t]);let d=i?s.get(i):null,u=f(d),m=(0,j.useCallback)((e,t)=>{a(n=>{let r=t??i;if(!r)return n;let s=n.get(r);if(!s)return n;let l={...s.request,...e.request??{}},a=null===e.response?null:void 0===e.response?s.response:{...s.response??{},...e.response},o=null===e.transportError?null:e.transportError??s.transportError,d={...s.ui,...e.ui??{}},u={id:e.id??s.id,name:e.name??s.name,request:l,response:a,transportError:o,ui:d};return new Map(n).set(r,u)})},[a,i]);return{requestCollections:s,setRequestCollections:a,responseBody:u,updateActiveRequestCollection:m,setMethod:(0,j.useCallback)(e=>{m({request:{method:e}})},[m]),setUrl:(0,j.useCallback)(e=>{m({request:{url:e}})},[m]),pathname:h(h(c(d?.request.url))),setPathname:(0,j.useCallback)(e=>{if(!d)return;let t=h(e);try{let e=new URL(d.request.url);m({request:{url:`${e.origin}${t}`}})}catch{return}},[m,d]),setRequestBody:(0,j.useCallback)(e=>{d&&d.request.postData&&m({request:{postData:{mimeType:d.request.postData.mimeType,text:e}}})},[m,d]),setMimeType:(0,j.useCallback)(e=>{if(!d||!d.request.postData)return;let t=d.request.headers.find(e=>"content-type"===e.name.toLowerCase()),{headers:n,postData:r}=d.request;m({request:{postData:{...r,mimeType:e},headers:t?n.map(n=>n.name===t.name?{...n,value:e}:n):[...n,{name:"Content-Type",value:e}]}})},[m,d]),setResponseHar:(0,j.useCallback)(e=>{m({response:e})},[m]),setTransportError:(0,j.useCallback)(e=>{m({transportError:e})},[m]),addRequestCollection:()=>{let e={...S,id:x(),name:"New Request",request:b({...w,method:l[0],url:`${t}/`})};a(t=>new Map(t).set(e.id,e)),o(e.id)},setResponseBodyView:(0,j.useCallback)(e=>{i&&a(t=>{let n=t.get(i);if(!n)return t;let r={...n,ui:{...n.ui,responseBodyView:e}};return new Map(t).set(i,r)})},[i]),removeRequestCollection:e=>{a(t=>{if(t.size<=1)return t;if(i===e){let n=Array.from(t.keys()),r=n.indexOf(e);o(n[0===r?1:r-1])}let n=new Map(t);return n.delete(e),n})},setActiveRequestCollectionName:(0,j.useCallback)((e,t)=>{m({name:e},t)},[m]),setRequestHeader:(0,j.useCallback)((e,t)=>{if(!d||!d.request.headers[e])return;let n=[...d.request.headers];n[e]=t,m({request:{headers:n}})},[m,d]),deleteRequestHeader:(0,j.useCallback)(e=>{if(!d||!d.request.headers[e])return;let t=[...d.request.headers];t.splice(e,1),m({request:{headers:t}})},[m,d]),addRequestHeader:(0,j.useCallback)(e=>{let{name:t,value:n}=e;d&&m({request:{headers:[...d.request.headers,{name:t,value:n}]}})},[m,d]),requestCollectionsAreLoading:n,activeRequestCollectionId:i,activeRequestCollection:d,setActiveRequestCollectionId:o}})({urlBase:n}),en=(0,j.useCallback)(()=>{if(L)return void console.log("already sending a request");if(!t)return void console.log("no deployment");if(!_)return void console.log("no active request collection");D(!0);let e={comment:`sent by ${window.location.href}`,..._.request,headers:_.request.headers.filter(e=>!e.comment?.includes("disabled"))};(g?(e=>{let{deploymentId:t,teamId:n}=e;return async e=>{let r=`/request-builder/proxy/har/${t}?team=${n}`,s=await (0,v.fetchApi)(r,{method:"POST",body:JSON.stringify(e),throwOnHTTPError:!0,headers:{"Content-Type":"application/json"}});if(null===s||"string"==typeof s)throw Error(`Proxy request failed: ${s||"No response"}`);let{response:l}=s;if(!l)throw Error("Proxy request failed: No response");return l}})({deploymentId:t,teamId:r}):C)(e).then(e=>{K(e),Q(null)}).catch(e=>{K(null),Q(e.message||String(e))}).finally(()=>{N("Response"),M("Body"),D(!1)})},[t,n,_,N,M,r,s,g,L,D,Q,K]);return{activeRequestCollection:null,requestCollections:P,setRequestCollections:A,addRequestCollection:O,removeRequestCollection:q,requestCollectionsAreLoading:U,activeRequestCollectionId:F,setActiveRequestCollectionId:$,handleShortcuts:(0,j.useCallback)(e=>{p.sendRequest.predicate(e)&&(e.preventDefault(),en())},[en]),method:_?.request.method,setMethod:H,appTab:E,setAppTab:T,microViewTab:k,setMicroViewTab:N,requestTab:B,setRequestTab:I,responseTab:R,setResponseTab:M,requestBody:_?.request.postData?.text,setRequestBody:G,responseHar:_?.response,setResponseHar:K,responseBody:J,sendRequest:en,httpVersion:s,setHttpVersion:u,proxyEnabled:g,setProxyEnabled:y,isSendingRequest:L,setIsSendingRequest:D,mimeType:_?.request.postData?.mimeType,setMimeType:W,transportError:_?.transportError,pathname:V,setPathname:z,responseBodyView:_?.ui.responseBodyView||"formatted",setResponseBodyView:Y,urlBase:m(n),setTransportError:Q,requestHar:_?.request||null,setRequestHeader:X,requestHeaders:_?.request.headers||[],deleteRequestHeader:Z,addRequestHeader:ee,responseHeaders:_?.response?.headers||[],setActiveRequestCollectionName:et}}],6656921)},1303150,e=>{"use strict";var t=e.i(31889),n=e.i(6695816),r=e.i(9722978),s=e.i(57106),l=e.i(6352514),a=e.i(4759942),i=e.i(1681029),o=e.i(4478191),d=e.i(8518548),u=e.i(6613731),c=e.i(5338940),m=e.i(6656921),h=e.i(1895466),p=e.i(2504781),f=e.i(5838627),g=e.i(9334091),y=e.i(5468328),x=e.i(5323212),b=e.i(3500331),j=e.i(4237893);function v(e){let{deployment:n,teamId:r}=e,{method:s,setMethod:l,pathname:a,setPathname:i,microViewTab:o,setMicroViewTab:d,requestTab:u,setRequestTab:c,responseTab:v,setResponseTab:C,requestBody:w,setRequestBody:S,responseHar:E,sendRequest:T,urlBase:k,requestHeaders:N,responseHeaders:B}=(0,m.useRequestBuilder)({deploymentId:n.id,deploymentUrl:`https://${n.url}`,teamId:r}),I=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Tabs,{tabs:(0,h.makeTabs)(h.requestTabs),selected:u,setSelected:c,variant:"secondary",className:"my-1 shrink-0"}),"Body"===u?(0,t.jsx)(g.Textarea,{style:{fieldSizing:"content"},className:"flex grow font-mono h-full overflow-y-auto",value:w,onChange:e=>S(e.target.value)}):null,"Params"===u?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:"not yet implemented"}):null,"Headers"===u?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:(0,t.jsx)(f.CodeBlock,{className:"m-0 p-0",language:"json",hideLineNumbers:!0,children:JSON.stringify(N.reduce((e,t)=>{let{name:n,value:r}=t;return{...e,[n]:r}},{}),null,2)})}):null,"Snippets"===u?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:"not yet implemented"}):null]}),R=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Tabs,{tabs:(0,h.makeTabs)(h.responseTabs),selected:v,setSelected:C,variant:"secondary",className:"my-1 shrink-0"}),(0,t.jsxs)("div",{className:"overflow-y-scroll",children:["Body"===v?(0,t.jsx)(f.CodeBlock,{className:"m-0 p-0",language:"json",hideLineNumbers:!0,children:JSON.stringify(E,null,2)}):null,"Headers"===v?(0,t.jsx)("div",{className:"text-muted-foreground p-4",children:(0,t.jsx)(f.CodeBlock,{className:"m-0 p-0",language:"json",hideLineNumbers:!0,children:JSON.stringify(B.reduce((e,t)=>{let{name:n,value:r}=t;return{...e,[n]:r}},{}),null,2)})}):null]})]});return(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row",style:{borderBottom:"1px solid var(--ds-gray-400)"},children:[(0,t.jsx)(x.Select,{selectClassName:"px-2 w-[54px] rounded-none shadow-none",value:s,onChange:e=>l(e.target.value),size:"small",suffix:null,style:{borderRight:"1px solid var(--ds-gray-400)"},children:h.methods.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)(b.Input,{"aria-label":"request builder",innerWrapperClassName:"w-full rounded-none shadow-none border-l-1",prefix:(0,t.jsx)(y.Tooltip,{text:`The request will be sent with the base path: ${k}`,children:"/"}),value:a,onChange:e=>{i(e.target.value)},size:"small"}),(0,t.jsx)(y.Tooltip,{text:"Send Request",children:(0,t.jsx)(p.Button,{style:{borderRadius:0},size:"small",onClick:T,children:"Send"})})]}),(0,t.jsxs)("div",{className:"px-3",children:[(0,t.jsx)(j.Tabs,{className:"shrink-0",tabs:(0,h.makeTabs)(h.microViewTabs),selected:o,setSelected:d,tabClassName:"py-2"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 mt-1 max-h-full",children:["Request"===o?I:null,"Response"===o?R:null]})]})]})}var C=e.i(7087273),w=e.i(9318197),S=e.i(4450569);let E=e=>{let{title:n,message:r,link:l,action:a="Learn More",onDismiss:i}=e;return(0,t.jsxs)(S.default,{style:{padding:"var(--geist-gap)",width:"100%",height:"100%",position:"absolute"},children:[(0,t.jsx)("span",{className:"text-copy-16",children:n}),(0,t.jsx)(w.Spacer,{y:1/3}),(0,t.jsx)(S.default,{className:"min-h-0 break-words",children:(0,t.jsx)(C.Scroller,{children:(0,t.jsx)("p",{className:"text-copy-16 m-0",children:r})})}),(0,t.jsx)(w.Spacer,{y:2/3}),(0,t.jsxs)(S.default,{row:!0,style:{justifyContent:"center",alignItems:"flex-end"},children:[(0,t.jsx)(p.Button,{onClick:i,size:"small",style:{flex:"1"},type:"secondary",children:"Dismiss"}),l?(0,t.jsx)(w.Spacer,{x:.5}):null,l?(0,t.jsx)(s.ButtonLink,{href:l,size:"small",style:{flex:"1"},children:a}):null]})]})};var T=e.i(6159310);let k=["https://vercel.com/","https://zeit.ink/","https://vercel.link/","https://err.sh/","https://github.com/zeit/","https://github.com/vercel/"];var N=e.i(762945),B=e.i(6226725),I=e.i(2425341);let R=e=>{let{title:n,status:r,link:s,actionButton:l,buttonText:a,message:i}=e,o="https://vercel.link/CVE-2025-66478"===s;return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:"border-b border-solid border-gray-alpha-400 w-full p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["ERROR"===r?(0,t.jsx)("span",{className:"text-[var(--geist-error-light)]",children:(0,t.jsx)(N.Warning,{})}):null,"CANCELED"===r?(0,t.jsx)(B.CrossCircle,{color:"gray-900"}):null,"QUEUED"===r?(0,t.jsx)(I.Stopwatch,{color:"gray-900"}):null,(0,t.jsx)("h3",{className:"text-label-14 text-gray-1000 font-medium",children:n})]})}),(0,t.jsxs)("div",{className:"p-3 flex flex-col h-[calc(100%-45px)]",children:[(0,t.jsx)(C.Scroller,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",style:{overflowWrap:"anywhere"},children:i||"Your deployment has failed. Please check out the logs for more details."})}),(0,t.jsx)("div",{className:"mt-auto",children:o&&s?(0,t.jsxs)("div",{className:"flex flex-row gap-2 *:flex-1",children:[(0,t.jsx)(M,{buttonText:a,link:s,status:r}),(0,t.jsx)(T.DashboardButtonLink,{route:"/[teamSlug]/[project]/fix/[fixType]",params:{fixType:"react2shell"},size:"small",children:"Upgrade"})]}):s||l?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-2",children:[s?(0,t.jsx)(M,{buttonText:a,link:s,status:r}):(0,t.jsx)(w.Spacer,{y:1/6}),l?(0,t.jsx)(t.Fragment,{children:l}):null]})}):null})]})]})},M=e=>{let{status:n,link:r,buttonText:l}=e;return"string"==typeof r&&k.some(e=>r.startsWith(e))?(0,t.jsx)(s.ButtonLink,{href:r,size:"small",type:"secondary",children:"Learn More"}):"QUEUED"===n&&r?(0,t.jsx)(s.ButtonLink,{href:r,size:"small",children:l||"Add Concurrent Builds"}):(0,t.jsx)(p.Button,{passthroughOnClick:e=>{e.preventDefault();let t=document.querySelector("[data-status=error]");t&&(t?.dataset.state!=="open"&&t.querySelector("button")?.click(),t.scrollIntoView({behavior:"smooth"}))},type:"secondary",children:"View Logs"})};var L=e.i(7962980),D=e.i(5255926),P=e.i(7553931),A=e.i(6280036),O=e.i(6677848),q=e.i(4597921);function U(e,t){switch(t.type){case"LIGHT_IMAGE_LOADING":return{...e,lightImage:"pending"};case"LIGHT_IMAGE_SUCCESS":return{...e,lightImage:"success"};case"LIGHT_IMAGE_FAILURE":return{...e,lightImage:"failure"};case"DARK_IMAGE_LOADING":return{...e,darkImage:"pending"};case"DARK_IMAGE_SUCCESS":return{...e,darkImage:"success"};case"DARK_IMAGE_FAILURE":return{...e,darkImage:"failure"};default:return e}}let F={lightImage:"pending",darkImage:"pending"};function _(e,t,n,r,s){let l=new URL(s?"/api/screenshot/v2":"/api/screenshot","production"!==L.default.env.VERCEL_ENV&&L.default.env.VERCEL_URL?`https://${L.default.env.VERCEL_URL}`:"https://vercel.com");return t?(l.searchParams.set("dark","dark"===e?"1":"0"),l.searchParams.set("deploymentId",t),n&&l.searchParams.set("teamId",n),r&&l.searchParams.set("withStatus","1"),`${l.pathname}${l.search}`):""}function $(e){let{srcLight:n,srcDark:r,onLoad:s,onError:l,alt:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H,{alt:a,className:"absolute block size-full dark:hidden",onError:()=>l("light"),onLoad:()=>s("light"),src:n}),(0,t.jsx)(H,{alt:a,className:"absolute hidden size-full dark:block",onError:()=>l("dark"),onLoad:()=>s("dark"),src:r})]})}function H(e){let{src:s,onLoad:l,renderScale:a=3,onError:i,className:o,alt:d}=e,u=(0,n.useRef)(null),c=(0,n.useRef)(null),[m,h]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=u.current;if(!e)return;c.current||(c.current=new Image);let t=c.current,n=()=>{let n=e.getContext("2d");if(!n)return;let r=e.offsetWidth,s=e.offsetHeight,l=r*a,i=s*a;e.width=l,e.height=i,n.scale(a,a),n.clearRect(0,0,l,i);let o=Math.min(r/t.width,s/t.height),d=r/2-t.width/2*o;n.drawImage(t,d,0,t.width*o,t.height*o)};if(t.src===s)return;t.src=s,t.onload=()=>{l(),h(!0),n()},t.onerror=()=>{i()};let r=()=>{n()};return window.addEventListener("resize",r),r(),()=>{window.removeEventListener("resize",r)}},[s,a]),(0,t.jsx)("canvas",{"aria-hidden":"true","aria-label":d,className:(0,r.clsx)(o,"size-full",{"animate-blurIn":m}),ref:u,role:"img",style:{width:"100%",height:"100%"}})}let V=n.default.memo(e=>{let{deployment:s,placeholder:l,noBorderRadius:a=!1,withReachable:i=!1,withImageWrapper:o=!0,onReady:d,height:u=400,width:c=640,onScreenshotFailed:m=()=>null}=e,h="string"==typeof s?.url?s.url:"",p="string"==typeof s?.id?s.id:void 0,f=c?{"--width":(0,O.px)(c)}:{},{teamSlug:g=""}=(0,P.useParams)()??{},y=(0,q.useServerFlag)("enable-screenshot-v2",!1),x=(0,n.useMemo)(()=>_("dark",p,g,i,y),[p,g,i,y]),b=(0,n.useMemo)(()=>_("light",p,g,i,y),[p,g,i,y]),[j,v]=(0,n.useReducer)(U,F),{resolvedTheme:C}=(0,A.useTheme)(),w=(0,n.useCallback)(e=>{void 0===e?(v({type:"LIGHT_IMAGE_SUCCESS"}),v({type:"DARK_IMAGE_SUCCESS"})):v({type:"dark"===e?"DARK_IMAGE_SUCCESS":"LIGHT_IMAGE_SUCCESS"}),d?.(!0)},[d]),S=(0,n.useCallback)(e=>{x&&b&&(void 0===e?(v({type:"LIGHT_IMAGE_FAILURE"}),v({type:"DARK_IMAGE_FAILURE"}),d?.(!1)):("dark"===e?x:b)&&(v({type:"dark"===e?"DARK_IMAGE_FAILURE":"LIGHT_IMAGE_FAILURE"}),d?.(!1)))},[d,x,b]),E="dark"===C?"failure"===j.darkImage:"failure"===j.lightImage,T=l||("dark"===C?"pending"===j.darkImage:"pending"===j.lightImage);if(E||!T&&!s)return m();let k=(0,t.jsx)($,{alt:`Preview Screenshot of ${h}`,onError:S,onLoad:w,srcDark:x,srcLight:b});return(0,t.jsx)(D.Skeleton,{show:T,squared:a,style:{width:"100%",height:"100%"},children:o?(0,t.jsx)("div",{className:(0,r.clsx)("relative aspect-[var(--width,640)/var(--height,400)] size-full",{"rounded-none":a}),style:u?{"--height":(0,O.px)(u),...f}:{},children:k}):k})});var z=e.i(7917902),G=e.i(6060673),W=e.i(5129431),Q=e.i(6625227),K=e.i(5072965),Y=e.i(6891161),J=e.i(455575),X=e.i(277234),Z=e.i(4244280),ee=e.i(1717203),et=e.i(7557283),en=e.i(7837522),er=e.i(7780974);function es(e){let r=(0,P.useRouter)(),[l,a]=(0,n.useState)(!1),i=(0,J.useToasts)(),{track:o}=(0,en.useTrackActivity)(),{can:d}=(0,ee.default)(),u=d(et.Action.Update,et.Resource.BuildMachine),c=(0,n.useCallback)(async()=>{if(e.deploymentId&&e.teamId&&e.projectName){a(!0),o(er.VercelActivityAction.DeploymentOverviewEnhancedBuildUpgrade,{});{let t=new URLSearchParams;t.append("teamId",e.teamId),200===(await (0,X.fetchAPI)(`${(0,Z.API_PROJECTS_VERSION)("v9")}/${e.projectName}?${t.toString()}`,{method:"PATCH",body:JSON.stringify({resourceConfig:{elasticConcurrencyEnabled:!0,buildMachineType:e.buildMachineType}}),throwOnHTTPError:!1,returnStatus:!0})).status?i.success(`Enabled ${e.buildMachineTypeLabel}`):(i.error("Something went wrong"),a(!1),e.onClose())}{let t=new URLSearchParams;t.append("teamId",e.teamId),t.append("forceNew","1"),t.append("withCache","1");let n=`${(0,Z.API_DEPLOYMENTS)("v13")}?${t.toString()}`,s=await (0,X.fetchAPI)(n,{method:"POST",body:JSON.stringify({deploymentId:e.deploymentId,meta:{action:"redeploy",buildMachineUpgradeReason:e.upgradeReasonCode,buildMachineAfterUpgrade:e.buildMachineType},name:e.projectName}),throwOnHTTPError:!1,returnStatus:!0});if(200===s.status&&s.body.inspectorUrl){e.onSuccess?.();let t=new URL(s.body.inspectorUrl);r.push(t.pathname)}else i.error("Something went wrong")}a(!1)}},[e,i,r,o]);return(0,t.jsxs)(Y.Modal.Modal,{active:e.active,onClickOutside:e.onClose,width:"500px",children:[(0,t.jsxs)(Y.Modal.Body,{children:[(0,t.jsx)(Y.Modal.Header,{children:(0,t.jsx)(Y.Modal.Title,{children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:["Enable ",e.buildMachineTypeLabel]})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["Overcome memory constraints by activating On-demand Concurrency with"," ",e.buildMachineTypeLabel,"."]}),e.teamId&&e.projectName?(0,t.jsxs)("p",{className:"text-copy-14",children:["Adjust this setting anytime via your project's"," ",(0,t.jsx)(s.Link,{as:`/${e.teamId}/${encodeURIComponent(e.projectName)}/settings/build-and-deployment#build-machine`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",variant:"highlight",children:"On-Demand Concurrent Builds"})," ","options."]}):null,(0,t.jsxs)("p",{className:"text-copy-14",children:['By clicking "Confirm & Redeploy" you agree to be charged for On-demand Concurrency.'," ",(0,t.jsx)(s.Link,{href:"/docs/deployments/managing-builds#build-machine-types",target:"_blank",variant:"highlight",children:"Learn more"})]})]})]}),(0,t.jsxs)(Y.Modal.Actions,{children:[(0,t.jsx)(Y.Modal.Action,{loading:!1,onClick:e.onClose,type:"secondary",children:"Close"}),(0,t.jsx)(y.Tooltip,{text:u?void 0:`You don't have permission to Enable ${e.buildMachineTypeLabel}.`,children:(0,t.jsx)(Y.Modal.Action,{disabled:l||!u,loading:l,onClick:c,children:"Confirm & Redeploy"})})]})]})}function el(e){let{deploy:r,projectName:s,team:l}=e,{errorMessage:a="Your deployment has failed. Please check out the logs for more details.",errorLink:i=""}=r,o=(0,P.useRouter)(),d=(0,P.useSearchParams)(),u=(0,G.useProject)(s),c=!!d?.has("enabledEnhancedBuilds"),m=(0,n.useMemo)(()=>u.isLoading||!u.data?null:void 0===u.data.resourceConfig||!1===u.data.resourceConfig.elasticConcurrencyEnabled||void 0===u.data.resourceConfig.buildMachineType?"enhanced":"enhanced"===u.data.resourceConfig.buildMachineType?"turbo":null,[u]),h=(0,n.useCallback)(()=>{let e=new URLSearchParams(d?.toString());e.set("enabledEnhancedBuilds","1"),o.replace(`?${e.toString()}`)},[d,o]),f=(0,n.useCallback)(()=>{if(!d?.has("enabledEnhancedBuilds"))return;let e=new URLSearchParams(d?.toString());e.delete("enabledEnhancedBuilds"),o.replace(`?${e.toString()}`)},[d,o]);if(m){let e="out-of-memory"===r.oomReport,n="Your deployment's build step did not complete within the maximum of 45min"===a,i=`${m[0].toUpperCase()+m.slice(1)} Builds`,o=(0,K.createTrackingAttributes)({id:"enable-enhanced-builds-modal-opened",upgradeTarget:m??"",plan:l?.billing?.plan??""});if(e||n){let a,d,u;if(e)a="Build Failed (out of memory)",d=`Your build failed because it exceeded the amount of memory available. Enable ${i} to increase machine size and available memory.`,u=r.oomReport||"out-of-memory";else if(n)a="Build Failed (timed out)",d=`Your build exceeded the 45 minute limit. Enable ${i} to increase machine size and reduce build times.`,u="build-timed-out";else throw Error("This should never happen, satisfy typescript");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R,{title:a,message:d,status:"ERROR",actionButton:(0,t.jsxs)(p.Button,{className:"w-full",onClick:h,size:"small",type:"default",...o,children:["Enable ",i]})}),(0,t.jsx)(es,{active:c,buildMachineType:m,buildMachineTypeLabel:i,deploymentId:r.id||null,onClose:f,upgradeReasonCode:u,projectName:s??null,teamId:l.slug})]})}}return(0,t.jsx)(R,{link:i,message:a,status:"ERROR",title:"Build Failed"})}e.i(6483798);var ea=e.i(8287059),ei=e.i(9041876);function eo(e){let{team:r,projectName:s}=e,l=(0,G.useProject)(s),a=(0,n.useMemo)(()=>!l.isLoading&&l.data&&r?{enhancedBuilds:(0,ei.isUpgradedBuildMachine)(l.data,r),onDemandBuilds:l.data.resourceConfig?.elasticConcurrencyEnabled??!1}:null,[l,r]);return a&&r&&s?r?.billing?.plan==="hobby"?(0,t.jsx)(ed,{team:r}):a.onDemandBuilds&&a.enhancedBuilds?(0,t.jsx)(ec,{}):a.enhancedBuilds?(0,t.jsx)(eu,{upgradeMessage:"Enable On-Demand Concurrent Builds to skip all queueing and build instantly.",projectName:s,team:r,settings:a}):(0,t.jsx)(eu,{upgradeMessage:"Switch to Enhanced Build Machines for faster builds with more CPU and memory.",projectName:s,team:r,settings:a}):(0,t.jsx)(ec,{})}function ed(e){let n,{team:r}=e,l=(0,ea.useOpenUpgradeModal)();return(0,t.jsx)(R,{message:"Upgrade to Pro for faster builds with more CPU and memory.",status:"BUILDING",title:"Building…",actionButton:(n=(0,K.createTrackingAttributes)({section:"deployment-status",onDemandBuildsEnabled:"0",id:"faster-builds",plan:r?.billing?.plan??""}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(s.ButtonLink,{href:"/docs/deployments/managing-builds#on-demand-concurrent-builds",target:"_blank",className:"w-full",size:"small",type:"secondary",children:"Read Docs"}),(0,t.jsx)(p.Button,{className:"w-full",size:"small",type:"default",onClick:()=>{l({teamHint:r.id,source:"deployment-building-status"})},...n,children:"Get Faster Builds with Pro"})]}))})}function eu(e){let n,{projectName:r,team:l,upgradeMessage:a,settings:i}=e;return(0,t.jsx)(R,{message:a,status:"BUILDING",title:"Building…",actionButton:(n=(0,K.createTrackingAttributes)({section:"deployment-status",onDemandBuildsEnabled:i.onDemandBuilds?"1":"0",id:"faster-builds",plan:l?.billing?.plan??""}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(s.ButtonLink,{href:"/docs/deployments/managing-builds#on-demand-concurrent-builds",target:"_blank",className:"w-full",size:"small",type:"secondary",children:"Read Docs"}),(0,t.jsx)(s.ButtonLink,{href:`/${l.slug}/${encodeURIComponent(r)}/settings/build-and-deployment#build-machine`,className:"w-full",size:"small",type:"default",...n,children:"Get Faster Builds"})]}))})}function ec(){return(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Building..."})}var em=e.i(8366444),eh=e.i(380513),ep=e.i(5023172),ef=e.i(542164);let eg=new Map;window.addEventListener("storage",e=>{e.key&&(null===e.newValue?eg.delete(e.key):eg.set(e.key,e.newValue))});class ey{key;defaultValue;constructor(e,t){this.key=e,this.defaultValue=t,this.init()}init(){if(!eg.has(this.key))try{eg.set(this.key,window.localStorage?.getItem(this.key))}catch(e){}}reset(){this.set(this.defaultValue)}get(){let e=eg.get(this.key);if(!e)return this.defaultValue;try{return JSON.parse(e)}catch(e){return this.defaultValue}}set(e){try{let t=JSON.stringify(e);window.localStorage?.setItem(this.key,t),eg.set(this.key,t)}catch(e){}}remove(){try{window.localStorage?.removeItem(this.key),eg.delete(this.key)}catch(e){}}}function ex(e,t){let n=t?.name||e.url;return!n||(0,ef.default)(n)?e.url:n}function eb(){let e=(0,P.useSearchParams)();return(0,n.useMemo)(()=>{let t=e?.get("fakeDeploymentStatus")??null,n=e?.get("fakeBillingPlan")??null;return{status:t?.toUpperCase(),plan:n?.toLowerCase()}},[e])}let ej=["nitro","express","fastapi","hono","xmcp"],ev=new Map([["enterprise-non-unbundled","Contact sales to enable On-Demand Concurrent Builds"],["pro-non-active","Upgrade to Pro to enable On-Demand Concurrent Builds"],["no-permission","Only project admins and team owners can trigger builds on-demand"]]);function eC(e){let{deploy:r,projectName:l,team:a,user:i,isInSystemBuildsQueue:o,isInConcurrentBuildsQueue:d,compact:u}=e,{data:c}=(0,eh.useFeatureFlag)("enable-team-deployments-page"),m=r.target?et.Resource.Deployment:et.Resource.DeploymentPreview,{can:h}=(0,ee.default)(),p=h(et.Action.Update,m),[f,g]=(0,n.useState)(null),y="string"==typeof r.id?r.id:void 0,{enabled:x,disabledReason:b}=(0,em.useOnDemandConcurrentBuilds)(a,p),j=x||b&&ev.has(b),v=b?ev.get(b):void 0,[C,w]=(0,n.useState)(x),S=j?(0,t.jsx)(eT,{enabled:C,onClick:()=>g(y??null),reasonWhyStartBuildingNowIsDisabled:v}):null,E=eb();if(o)return(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Initializing..."});let T="Deployments",k=c?(0,t.jsx)(s.Link,{href:`/${a.slug}/~/deployments?status=building%2Cqueued`,underline:!0,children:T}):T;if(d){let e=E.plan?E.plan:a.billing?.plan;if("enterprise"===e)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ew,{team:a,user:i,deployments:k,projectName:l,startBuildNowButton:S}),(0,t.jsx)(ep.StartBuildingNowModal,{active:!!f,deploymentId:f,onClose:()=>{g(null)},onSuccess:()=>{w(!1)},projectName:l??null,teamId:a.slug})]});if("pro"===e)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eS,{team:a,deployments:k,projectName:l,startBuildNowButton:S}),(0,t.jsx)(ep.StartBuildingNowModal,{active:!!f,deploymentId:f,onClose:()=>{g(null)},onSuccess:()=>{w(!1)},projectName:l??null,teamId:a.slug})]});if("hobby"===e)return(0,t.jsx)(eE,{team:a,deployments:k})}return u?(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Deployment Queued"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R,{message:(0,t.jsxs)(t.Fragment,{children:["The build will start once other"," ",l?(0,t.jsx)(s.Link,{href:`/${a.slug}/${l}/deployments?status=building%2Cqueued`,underline:!0,children:T}):T," ","for this branch have finished."," ",(0,t.jsx)(s.Link,{href:"/docs/builds/build-queues#git-branch-queue",underline:!0,children:"Learn more."})]}),actionButton:S,status:"QUEUED",title:"Deployment Queued"}),(0,t.jsx)(ep.StartBuildingNowModal,{active:!!f,deploymentId:f,onClose:()=>{g(null)},onSuccess:()=>{w(!1)},projectName:l??null,teamId:a.slug})]})}function ew(e){let{team:n,user:r,deployments:l,projectName:a,startBuildNowButton:i}=e,o=new URLSearchParams({content:"I'd like to add extra concurrent builds to my contract."});return r?.email&&o.set("email",r.email),(0,t.jsx)(R,{actionButton:i,status:"QUEUED",title:"Deployment Queued",message:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsxs)("div",{children:["The build will start once your other ",l," have finished."]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.Link,{href:`/contact/sales?${o.toString()}`,underline:!0,children:"Contact Sales"})," ","to add concurrent build slots or use"," ",(0,t.jsx)(s.Link,{as:`/${n.slug}/${encodeURIComponent(a??"")}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",underline:!0,children:"On-Demand Concurrent Builds"})," ","to avoid the queue."]})]})})}function eS(e){let{team:n,deployments:r,projectName:l,startBuildNowButton:a}=e,i=(n?.billing?.invoiceItems?.concurrentBuilds?.quantity??1)>1,o=n.billing?.planIteration!=="plus"||i?(0,t.jsxs)(t.Fragment,{children:["The build will start once your other ",r," have finished. Add"," ",(0,t.jsx)(s.Link,{as:`/${n.slug}/~/settings/build-and-deployment#concurrent-builds`,href:"/[teamSlug]/~/settings/build-and-deployment#concurrent-builds",target:"_blank",underline:!0,children:"concurrent build slots"})," ","or use"," ",(0,t.jsx)(s.Link,{as:`/${n.slug}/${encodeURIComponent(l??"")}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",underline:!0,children:"On-Demand Concurrent Builds"})," ","to avoid the queue."]}):(0,t.jsxs)(t.Fragment,{children:["The build will start once your other ",r," have finished. Use"," ",(0,t.jsx)(s.Link,{as:`/${n.slug}/${encodeURIComponent(l??"")}/settings/build-and-deployment`,href:"/[teamSlug]/[project]/settings/build-and-deployment",target:"_blank",underline:!0,children:"On-Demand Concurrent Builds"})," ","to avoid the queue."]});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(R,{message:o,actionButton:a,status:"QUEUED",title:"Deployment Queued"})})}function eE(e){let{deployments:n,team:r}=e,s=(0,ea.useOpenUpgradeModal)();return(0,t.jsx)(R,{message:(0,t.jsxs)(t.Fragment,{children:["The build will start once your other ",n," have finished. Pro teams can use On-Demand Concurrent Builds to avoid the queue."]}),status:"QUEUED",title:"Another build is in progress",actionButton:(0,t.jsx)(p.Button,{onClick:()=>{s({teamHint:r.id,source:"concurrent-builds-queue"})},size:"small",type:"default",children:"Upgrade to Pro"})})}function eT(e){let{onClick:n,enabled:r,reasonWhyStartBuildingNowIsDisabled:s}=e;return void 0!==s?(0,t.jsx)(y.Tooltip,{position:"right",style:{alignItems:"center",flex:"1",justifyContent:"center",width:"100%"},text:s,children:(0,t.jsx)(p.Button,{disabled:!0,size:"small",style:{alignItems:"center",flex:"1",justifyContent:"center"},children:"Start Building Now"})}):(0,t.jsx)(p.Button,{disabled:!r,onClick:n,size:"small",type:"default",children:"Start Building Now"})}let ek=e=>{let{deploy:n,projectName:r}=e,s=(0,G.useProject)(r),{data:l}=(0,Q.default)(n.id),{modal:a,open:i}=(0,W.default)(s.data),o=(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{children:"An unexpected error happened when running this build. This issue is likely temporary."}),(0,t.jsx)("p",{children:"Please try to redeploy in a few minutes."})]})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R,{message:o,status:"ERROR",title:"Build Failed",actionButton:(0,t.jsx)(p.Button,{className:"w-full",disabled:!l,onClick:()=>{l&&i(l)},size:"small",type:"default",children:"Redeploy"})}),a]})};function eN(e){let{deploy:n,showError:r,isInConcurrentBuildsQueue:s,isInSystemBuildsQueue:l,compact:a,projectName:i}=e,{status:o,errorMessage:d,errorLink:u=""}=n,c=o,m=eb();m?.status&&(c=m.status);let{user:h,team:p}=(0,z.useAccount)();return p?"ERROR"===c?r?"temporary_failure"===n.errorCode?(0,t.jsx)(ek,{deploy:n,projectName:i}):(0,t.jsx)(el,{deploy:n,team:p,projectName:i}):(0,t.jsx)("p",{className:"m-auto text-center text-sm text-red-600",children:"Deployment Failed"}):"FROZEN"===c||"FAILED"===c?(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"No Screenshot Available"}):"NO_PRODUCTION"===c?(0,t.jsx)(y.Tooltip,{className:"m-auto text-center",delay:!1,text:"To deploy to production, push to the Repository Default branch.",children:(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"No Production Deployment"})}):"CANCELED"===c?r&&d?(0,t.jsx)(R,{link:u,message:d||"Deployment canceled.",status:c,title:"Build Canceled"}):(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Deployment Canceled"}):"QUEUED"===c?(0,t.jsx)(eC,{deploy:n,projectName:i,isInConcurrentBuildsQueue:s,isInSystemBuildsQueue:l,compact:a,user:h,team:p}):(0,t.jsx)(eo,{team:p,projectName:i}):(0,t.jsx)("p",{className:"m-auto text-center text-sm text-gray-600",children:"Loading…"})}e.s(["DeploymentPreview",0,function(e){let{deployment:m,ignoreAliasWarning:h=!0,placeholder:p,toolbarVia:f,customHref:g,compact:y,...x}=e,{showError:b=!1,link:j=!0,empty:C=!1,noHighlight:w,noBorder:S,noBorderRadius:T,useDeploymentUrl:k=!1,onClick:N}=x,B=null!=m&&"project"in m?m.project?.name:void 0,{domain:I}=(0,d.useBestProductionDomain)(B),M=I||x.projectDomain||null,L=(0,q.useServerFlag)("request-builder",!1),[D,A]=function(e){let t=(0,n.useMemo)(()=>e?new ey(`show-deployment-warning:${e.uid||e.id}`,!0):null,[e]),[r,s]=(0,n.useState)(()=>{let e=t?.get();return"boolean"!=typeof e||e});return[r,e=>{t?.set(e),s(e)}]}(m),{onClick:O,...U}=(0,u.useWrappedToolbarAuthLinkHandler)({via:f??"project-screenshot",deployment:j?m:void 0}),{team:F}=(0,c.useTeam)(),_=function(e){if(!e||!("microfrontends"in e)||!e.microfrontends)return!1;let t=e.microfrontends;return!t.isDefaultApp&&!t.defaultRoute}(m),$=`/${F?.slug}/${B}/settings/microfrontends#default-route`,H=(()=>{let e=(0,P.useParams)(),{data:t}=(0,G.useProject)(e?.project);return!!t&&"framework"in t&&!!t.framework&&!!ej.includes(t?.framework)})(),z=(0,n.useMemo)(()=>{if(!m)return C?{status:"NO_PRODUCTION"}:null;let e=k?m.url:ex(m,M),t=m.readyStateReason||m.errorMessage;return m.readyStateReason?.startsWith("The deployment failed to build.")&&m.errorMessage&&(t=m.errorMessage),{id:m.uid||m.id,url:e,target:m.target,status:m.readyState,errorCode:m.errorCode,errorMessage:t,errorLink:m.errorLink,aliasWarning:m.aliasWarning,oomReport:m.oomReport}},[k,m,C,M]),W=!h&&D&&z?.status==="READY"&&z?.aliasWarning?.code==="deprecated_now_sh",Q=z&&"READY"!==z.status,K=z?.status==="ERROR"||m?.aliasError,Y=(0,n.useCallback)(()=>(0,t.jsx)(eN,{deploy:{...z,status:"FAILED"},isInConcurrentBuildsQueue:m?.isInConcurrentBuildsQueue,isInSystemBuildsQueue:m?.isInSystemBuildsQueue,projectName:B,showError:b}),[z,b,B,m?.isInConcurrentBuildsQueue,m?.isInSystemBuildsQueue]),J=(0,n.useMemo)(()=>m?.aliasError?(0,t.jsx)(R,{message:m.aliasError.message,status:"ERROR",title:"Domain Error"}):W?(0,t.jsx)(E,{link:z.aliasWarning.link,message:z.aliasWarning.message,onDismiss:()=>A(!1),title:"Warning"}):Q?(0,t.jsx)(eN,{compact:y,deploy:z,isInConcurrentBuildsQueue:m?.isInConcurrentBuildsQueue,isInSystemBuildsQueue:m?.isInSystemBuildsQueue,projectName:B,showError:b}):_?(0,t.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:[(0,t.jsx)("p",{className:"text-heading-16",children:"Default Route Missing"}),(0,t.jsxs)("p",{className:"text-copy-14 text-[var(--geist-secondary)]",children:[(0,t.jsx)(s.Link,{href:$,underline:!0,children:"Set the default route"})," ","for this microfrontend to screenshot the correct path. The default route is used anywhere that the microfrontend domain is referenced for this project."," ",(0,t.jsx)(s.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#set-a-default-route",tab:!0,type:"highlight",children:"Learn More"})]})]}):H&&L?(0,t.jsx)(v,{deployment:m,teamId:F?.id}):j&&m?.url?(0,t.jsx)(s.Link,{"aria-label":"Visit Deployment",href:g||(0,o.withDefaultRoute)((0,i.domainToUrl)(k?m.url:ex(m,M)),m.defaultRoute),...U,onClick:e=>{N?.(e),O?.(e),a.analytics.track(l.AnalyticsEvent.DEPLOYMENT_OVERVIEW_CLICKED_SCREENSHOT,{projectId:m.projectId||M?.projectId,deploymentId:m.id,deploymentTarget:m.target})},style:{width:"100%"},tab:!0,children:(0,t.jsx)(V,{deployment:z,onScreenshotFailed:Y,placeholder:p,withReachable:!0,...x})}):(0,t.jsx)(V,{deployment:z,onScreenshotFailed:()=>(0,t.jsx)(eN,{deploy:{...z,status:"FAILED"},isInConcurrentBuildsQueue:m?.isInConcurrentBuildsQueue,isInSystemBuildsQueue:m?.isInSystemBuildsQueue,projectName:B,showError:b}),placeholder:p,withReachable:!0,...x}),[z,m,j,M,x,A,Q,W,b,k,Y,p,B,N]);return(0,t.jsx)("div",{className:(0,r.clsx)("geist-ratio","size-full p-0","border border-solid border-[var(--ds-gray-400)]","rounded-[var(--geist-radius)]","flex flex-none justify-center","overflow-hidden","aspect-[640/400]",{"w-screen max-w-full":Q,"bg-[var(--ds-background-200)]":z?.status==="CANCELED"||z?.status==="QUEUED"||z?.status==="FROZEN"||z?.status==="FAILED",group:!w,"border-[var(--geist-error-light)]":K,"border-[var(--ds-amber-400)]":W,"min-w-[108px]":z?.status==="NO_PRODUCTION","border-0":S,"rounded-none":T}),style:{"--ratio":"62.5%"},children:J})}],1303150)}]);

//# debugId=d1f4c1ba-b626-c7ff-5e88-466a4c0f1cad
//# sourceMappingURL=510a146fa6a8ca19.js.map