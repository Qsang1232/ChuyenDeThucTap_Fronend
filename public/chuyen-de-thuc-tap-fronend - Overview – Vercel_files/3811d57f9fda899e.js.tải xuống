;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="90e519bf-9d8a-401e-2eda-67920ce95bac")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7911158,e=>{"use strict";e.s(["formatPercentage",0,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return isNaN(e)?"-%":new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:t}).format(e)}])},7749365,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM8.75 4.75V4H7.25V4.75V7.875C7.25 8.18976 7.39819 8.48615 7.65 8.675L9.55 10.1L10.15 10.55L11.05 9.35L10.45 8.9L8.75 7.625V4.75Z" fill="currentColor"/>');e.s(["Clock",0,t])},539392,e=>{"use strict";var t=e.i(9487122);e.s(["normalizeDates",0,function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];let s=t.constructFrom.bind(null,e||n.find(e=>"object"==typeof e));return n.map(s)}])},2632713,e=>{"use strict";var t=e.i(516467);e.s(["getTimezoneOffsetInMilliseconds",0,function(e){let i=(0,t.toDate)(e),n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return n.setUTCFullYear(i.getFullYear()),e-n}])},870429,e=>{"use strict";var t=e.i(2632713),i=e.i(539392),n=e.i(1511518),r=e.i(3738416);e.s(["differenceInCalendarDays",0,function(e,s,a){let[o,l]=(0,i.normalizeDates)(a?.in,e,s),c=(0,r.startOfDay)(o),d=(0,r.startOfDay)(l);return Math.round((c-(0,t.getTimezoneOffsetInMilliseconds)(c)-(d-(0,t.getTimezoneOffsetInMilliseconds)(d)))/n.millisecondsInDay)}])},4905664,e=>{"use strict";var t=e.i(539392),i=e.i(870429);function n(e,t){let i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return i<0?-1:i>0?1:i}e.s(["differenceInDays",0,function(e,r,s){let[a,o]=(0,t.normalizeDates)(s?.in,e,r),l=n(a,o),c=Math.abs((0,i.differenceInCalendarDays)(a,o));a.setDate(a.getDate()-l*c);let d=Number(n(a,o)===-l),u=l*(c-d);return 0===u?0:u}])},7921976,e=>{"use strict";var t=e.i(8620523);e.s(["isModifierPressed",0,e=>(0,t.isAppleDevice)()?e.metaKey:e.ctrlKey])},613694,e=>{"use strict";var t=e.i(4905664),i=e.i(3738416);e.s(["prorateAmount",0,function(e,n,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;if(!n||!r)return e;let a=(0,t.differenceInDays)(r.end,r.start);return Math.round(e*Math.min(1,(0,t.differenceInDays)(r.end,function(e,t){let n=(0,i.startOfDay)(t),[r,s]=n.toLocaleDateString("en-US",{timeZone:e,timeZoneName:"longOffset",day:"2-digit",month:"2-digit",year:"numeric"}).split(", "),[a,o,l]=[(n.getMonth()+1).toString().padStart(2,"0"),n.getDate().toString().padStart(2,"0"),n.getFullYear()],c=s.replace("GMT","");return new Date(`${l}-${a}-${o}T00:00:00.00${c}`)}("America/Los_Angeles",s))/a))}])},3343142,e=>{"use strict";var t=e.i(8042625),i=e.i(277234),n=e.i(4244280),r=e.i(8248823);let s=async e=>{let s,{data:a}=e,o=(s=new Map,a.fields.forEach(e=>{switch(e.type){case"text":if(!e.value)return;s.set(e.id,e.value);break;case"select":{let t=[];e.options.forEach(e=>{if(e.selected){if(e.reveals)return void t.push(`${e.id}: ${e.reveals.value??""}`);t.push(e.id)}}),s.set(e.id,t.join("; "));break}default:(0,r.exhaustivenessCheck)(e)}}),{name:a.surveyName,person:{email:a.user?.email,id:a.user?.uid},...a.team?.id&&{team:{id:a.team.id}},form:Object.fromEntries(s)});try{return await (0,i.fetchAPI)(`${n.API_SURVEYS}${(0,t.encode)({teamId:o.team?.id})}`,{method:"POST",body:JSON.stringify(o)})}catch(e){console.error(e)}};e.s(["createSurveyEntry",0,s])},6998974,e=>{"use strict";let t={"speedInsights.sampling":new Set([1]),"billing.proratedAddOns":new Set([2])};e.s(["billingFeatureSupported",0,function(e,i){let n;if(!e)return!1;if("plan"in e)n=e;else{if(!e.billing)return!1;n=e.billing}return t[i].has(n.billingVersion)}])},7982125,e=>{e.v({fixedHeight:"index-module__aVxx7q__fixedHeight"})},8548383,3515598,9773598,7719396,e=>{"use strict";var t=e.i(31889),i=e.i(7557283);function n(e,t){let i=r[e];return"string"==typeof i?i:t?i[t]??i.modal:i.fieldset}let r={passwordProtection:"Advanced Deployment Protection",concurrentBuilds:{fieldset:"Additional Concurrent Builds",modal:"Concurrent Builds"},previewDeploymentSuffix:"Preview Deployment Suffix",analytics:"Speed Insights",monitoring:"Monitoring",observabilityBase:{postConfirmConfiguration:"Configure Observability Plus",fieldset:"Observability Plus",modal:"Observability Plus"},webAnalytics:"Web Analytics Plus",saml:"SAML SSO",hipaaAddon:"HIPAA BAA",onDemandConcurrentBuilds:"On-Demand Concurrent Builds",microfrontendsProject:"Microfrontends Projects",bulkRedirect:"Bulk Redirects",securityPlus:"Security Plus"},s={passwordProtection:"Allows you to provide fine-grained control over who can access your deployments. Includes Password Protection, Deployment Protection Exceptions, and Private Production Deployments for all projects.",concurrentBuilds:"Determines how many builds you can run at the same time. By increasing the number ($50 per Slot, per month), you are increasing the level of concurrency (maximum 12).",previewDeploymentSuffix:(0,t.jsxs)(t.Fragment,{children:["Choose your own custom domain for Preview Deployments, in place of the default ",(0,t.jsx)("code",{children:".vercel.app"})," suffix."]}),analytics:"Detailed view of your website's performance metrics, facilitating informed decisions for its optimization.",monitoring:"Monitoring is a query editor that allows you to visualize errors, debug bandwidth issues, and monitor usage and web traffic for the past 30 days.",observabilityBase:"Gain comprehensive visibility into your application's health and performance.",webAnalytics:"Get more insights on your website's visitors with a longer reporting window, more custom event properties, and advanced UI features.",saml:"Enable SAML Single Sign-On (SSO) for your team to provide secure, centralized authentication through your identity provider.",hipaaAddon:"Enter into a Business Associate Agreement (BAA) with Vercel to enable storing, processing, or transmitting Protected Health Information (PHI) in compliance with HIPAA.",onDemandConcurrentBuilds:"On-Demand concurrent builds provides dynamic scaling of builds, allowing projects to temporarily increase their build capacity when needed.",microfrontendsProject:"Build and compose independent applications as a single experience for users.",bulkRedirect:"Increase the max number of redirects that can be added to your projects.",securityPlus:"Enable Security Plus to protect your applications from common security threats."},a={passwordProtection:i.Resource.PasswordProtection,concurrentBuilds:i.Resource.ConcurrentBuilds,previewDeploymentSuffix:i.Resource.PreviewDeploymentSuffix,analytics:i.Resource.SpeedInsights,monitoring:i.Resource.MonitoringSettings,observabilityBase:i.Resource.ObservabilityConfiguration,webAnalytics:i.Resource.WebAnalytics,saml:i.Resource.BillingInformation,hipaaAddon:i.Resource.BillingInformation,onDemandConcurrentBuilds:i.Resource.ConcurrentBuilds,microfrontendsProject:i.Resource.TeamMicrofrontends,bulkRedirect:i.Resource.BillingPlan,securityPlus:i.Resource.SecurityPlusConfiguration};e.s(["ADD_ON_DESCRIPTIONS",0,s,"ADD_ON_DISPLAY_NAMES",0,r,"ADD_ON_IDS",0,{passwordProtection:"advanced-deployment-protection",concurrentBuilds:"concurrent-builds",previewDeploymentSuffix:"preview-deployment-suffix",analytics:"speed-insights",monitoring:"monitoring",observabilityBase:"observability",webAnalytics:"web-analytics",saml:"saml-sso",hipaaAddon:"hipaa-baa",onDemandConcurrentBuilds:"on-demand-concurrent-builds",microfrontendsProject:"microfrontends-project",bulkRedirect:"bulk-redirect",securityPlus:"security-plus"},"ADD_ON_LEARN_MORE_LINKS",0,{passwordProtection:"/docs/security/deployment-protection#advanced-deployment-protection",concurrentBuilds:"/docs/deployments/concurrent-builds",previewDeploymentSuffix:"/docs/deployments/generated-urls#preview-deployment-suffix",analytics:"/docs/speed-insights",monitoring:"/docs/observability/monitoring",observabilityBase:"/docs/observability",webAnalytics:"/docs/analytics",saml:"/docs/saml",hipaaAddon:"/docs/security/shared-responsibility",onDemandConcurrentBuilds:"/docs/builds/managing-builds#on-demand-concurrent-builds",microfrontendsProject:"/docs/microfrontends",bulkRedirect:"/docs/redirects#bulk-redirects",securityPlus:"/docs/security/security-plus"},"ADD_ON_PERMISSIONS",0,a,"getAddOnDisplayName",0,n],8548383);var o=e.i(6891161),l=e.i(7982125);e.s(["DisableModalBody",0,function(e){let{name:i,disable:r,closeModal:s,loading:a,customCopy:c,overrideContent:d,invoiceItem:u,newQuantity:m,includedQuantity:f}=e,y=m===(f??0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Modal.Body,{className:"analytics"===i?l.default.fixedHeight:void 0,children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pb-4",children:(0,t.jsxs)(o.Modal.Title,{children:[y?"Turn off":"Decrease"," ",n(i)]})}),d??(0,t.jsx)(o.Modal.Subtitle,{children:(0,t.jsxs)("span",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial pt-2 my-4",style:{margin:0},children:[y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["Your team is currently utilizing"," ",(0,t.jsx)("b",{children:n(i)}),"."]}),(0,t.jsx)("p",{className:"text-copy-14",children:c??"Disabling it will prevent your team members from accessing it in the dashboard and turn off any related functionality immediately."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["By clicking ",(0,t.jsx)("b",{children:"Confirm"}),", your team will update from having"," ",(0,t.jsxs)("b",{children:[u.quantity," ",n(i,"configure")]})," ","to having"," ",(0,t.jsxs)("b",{children:[m," ",n(i,"configure")]}),"."]}),(0,t.jsx)("p",{className:"text-copy-14",children:"This is effective immediately upon confirmation."})]}),(0,t.jsx)("p",{className:"text-copy-14",children:"Are you sure you want to proceed?"})]})})]}),(0,t.jsxs)(o.Modal.Actions,{children:[(0,t.jsx)(o.Modal.Action,{fullWidth:!!d,onClick:()=>s("disable"),type:"secondary",children:"Cancel"}),d?null:(0,t.jsx)(o.Modal.Action,{buttonType:"button",loading:a,onClick:r,children:"Confirm"})]})]})}],3515598);var c=e.i(6695816),d=e.i(6143247),u=e.i(9358876),m=e.i(2466450),f=e.i(613694);let y="Confirm and Pay";e.s(["ConfirmationInvoice",0,function(e){let{lineItems:i,currency:n,nonProratedCustomCopy:r,customCopy:s,invoiceItem:a,name:o,addOnValue:l,prorate:p,billingPeriod:g,unit:h,includedQuantity:x,confirmLabel:b=y}=e,v=(0,c.useMemo)(()=>{if("analytics"===o)return l.map(e=>({name:e.name,price:a.price}));if(x){let e=Math.max(l-a.quantity,0);if(e>0)return[...i,{name:`${e} additional ${(0,u.pluralize)(h??"item",e)}`,price:a.price*e}]}return i},[l,x,a,i,o,h]),{subscriptionQuantityDelta:j,immediateQuantityDelta:C}=(0,c.useMemo)(()=>{if("analytics"===o){let e=l.filter(e=>{let t=e.speedInsights??e.analytics,i=t?.disabledAt;return!i||!g||i<=g.start});return{subscriptionQuantityDelta:l.length,immediateQuantityDelta:e.length}}let e=1;return"number"==typeof l&&(e=l),{subscriptionQuantityDelta:e-a.quantity,immediateQuantityDelta:e-(a.highestQuantity??a.quantity)}},[l,g,a.highestQuantity,a.quantity,o]),A=j*a.price,D=(0,f.prorateAmount)(C*a.price,p,g),S=(0,c.useMemo)(()=>{if(!p)return(0,t.jsxs)(t.Fragment,{children:["By clicking ",(0,t.jsx)("b",{children:b}),", the amount of"," ",(0,t.jsx)("b",{children:(0,m.formatCurrency)(A,n)})," will be added to your invoice",r??".",s]});let e=(0,t.jsxs)(t.Fragment,{children:["By clicking ",(0,t.jsx)("b",{children:b}),", the amount of"," ",(0,t.jsx)("b",{children:(0,m.formatCurrency)(A,n)})," will be added to your subscription"]});return 0===D?(0,t.jsxs)(t.Fragment,{children:[e,". ",s]}):D>0?(0,t.jsxs)(t.Fragment,{children:[e," and your credit card will be charged"," ",(0,t.jsxs)("b",{children:[(0,m.formatCurrency)(D,n)," immediately"]})," for the remaining days in your billing cycle.",s]}):(0,t.jsxs)(t.Fragment,{children:[e," and there will be no immediate charge because you have already enabled this within your current billing cycle.",s]})},[n,r,s,D,p,A,b]);return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"py-2",children:S}),v.map(e=>{let{name:i,price:r,removal:s=!1,priceDescriptor:o="/ month",shortDescription:l,discountPrice:c,discountDescriptor:u}=e,f=void 0!==c;return(0,t.jsxs)("div",{className:"flex flex-col py-4 border-b border-b-gray-400 text-sm text-gray-800",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("span",{className:(0,d.cn)("font-medium mr-auto",s&&"line-through"),children:i}),f?(0,t.jsxs)("div",{className:"inline-flex gap-1 text-blue-700 font-medium",children:[(0,t.jsx)("span",{children:(0,m.formatCurrency)(c,n)}),u]}):null,(0,t.jsxs)("div",{className:"inline-flex gap-1",children:[(0,t.jsx)("span",{className:(0,d.cn)((s||f)&&"line-through"),children:(0,m.formatCurrency)("from_invoice_item"===r?a.price:r,n)}),o]})]},i),l]},i)}),(0,t.jsxs)("div",{className:"flex py-4 gap-1 text-sm font-medium",children:[(0,t.jsx)("span",{className:"mr-auto",children:"Total"}),(0,t.jsxs)("span",{children:[(0,m.formatCurrency)(A,n)," / month"]})]}),(0,t.jsx)("span",{className:"text-xs text-right text-gray-900",children:"* Plus applicable tax and fees"})]})},"defaultConfirmLabel",0,y],9773598);var p=e.i(6352514),g=e.i(4759942);let h={toggle_on:p.AnalyticsEvent.ADD_ONS_TOGGLE_ENABLE_CLICKED,toggle_off:p.AnalyticsEvent.ADD_ONS_TOGGLE_DISABLE_CLICKED,open_update_modal:p.AnalyticsEvent.ADD_ONS_OPEN_UPDATE_MODAL,learn_more:p.AnalyticsEvent.ADD_ONS_LEARN_MORE_CLICKED,exit_modal:p.AnalyticsEvent.ADD_ONS_MODAL_EXITED,change_step:p.AnalyticsEvent.ADD_ONS_MODAL_STEP_CHANGED,enable:p.AnalyticsEvent.ADD_ONS_ENABLED,update:p.AnalyticsEvent.ADD_ONS_UPDATED,disable:p.AnalyticsEvent.ADD_ONS_DISABLED,more_details:p.AnalyticsEvent.ADD_ONS_MORE_DETAILS_EXPANDED,project_list_cta:p.AnalyticsEvent.ADD_ONS_PROJECT_LIST_CTA_CLICKED};e.s(["trackAddOnEvent",0,e=>{let{eventName:t,addOn:i,source:n,step:s,value:a}=e,o=h[t],l=r[i];g.analytics.track(o,{addOn:"string"==typeof l?l:l.modal,source:n,step:s,value:a})}],7719396)},2151290,e=>{e.v({container:"index-module__L77N5G__container",icon:"index-module__L77N5G__icon"})},9736132,e=>{"use strict";var t=e.i(31889),i=e.i(5255926),n=e.i(4585051),r=e.i(1138941),s=e.i(2151290),a=e.i(9722978);function o(e){let{size:n=24}=e;return(0,t.jsx)(i.Skeleton,{height:n,rounded:!0,style:{flexShrink:0},width:24})}e.s(["FrameworkAvatar",0,function(e){let{project:i,size:l=24,isDisabled:c=!1}=e,d=(0,r.useFramework)(i);return d?(0,t.jsx)(n.Avatar,{className:(0,a.clsx)(s.default.icon,c&&"grayscale(100%) opacity-40"),size:l,src:d.logo,title:`${d.name}`}):(0,t.jsx)(o,{})},"FrameworkAvatarSkeleton",0,o])},364898,9477971,e=>{"use strict";var t=e.i(31889),i=e.i(6695816),n=e.i(6891161),r=e.i(455575),s=e.i(7917902),a=e.i(1412448),o=e.i(2466450);e.i(1585898);var l=e.i(2066827),c=e.i(3343142),d=e.i(6998974),u=e.i(8548383),m=e.i(3515598),f=e.i(9773598),y=e.i(2064047),p=e.i(57106),g=e.i(4450694),h=e.i(7719396),x=e.i(9736132),b=e.i(2151290),v=e.i(9722978);function j(e){let{addOn:i,description:n,ctaCopy:r,ctaHrefBase:s,team:a}=e,{data:o,isLoading:l}=(0,g.useSpeedInsightsEnabledProjects)(),c=o?.projects||[],d=a?.slug;return(0,t.jsxs)("div",{className:(0,v.default)("flex flex-col items-stretch justify-start gap-6 flex-initial",b.default.stack),children:[(0,t.jsx)("p",{className:"text-copy-14",children:n}),l||!d?(0,t.jsx)(C,{ctaCopy:r}):(0,t.jsx)(t.Fragment,{children:c.length>0?(0,t.jsx)(y.Entity.List,{className:b.default.container,children:c.map(e=>(0,t.jsxs)(y.Entity,{padding:2,children:[(0,t.jsx)(y.Entity.Content,{fill:!0,title:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial pl-1",children:[(0,t.jsx)(x.FrameworkAvatar,{project:e}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:e.name})]})}),(0,t.jsx)(y.Entity.Content,{title:(0,t.jsx)(p.ButtonLink,{href:`/${d}/${e.name}${s||""}`,onClick:()=>(0,h.trackAddOnEvent)({eventName:"project_list_cta",source:"billing-settings-add-ons",value:`/${d}/${e.name}${s||""}`,addOn:i}),type:"secondary",children:r})})]},e.id))}):null})]})}function C(e){let{ctaCopy:i}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)(y.Entity.List,{children:[(0,t.jsxs)(y.Entity,{padding:2,children:[(0,t.jsx)(y.Entity.Content,{fill:!0,title:(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial pl-1",children:(0,t.jsx)(x.FrameworkAvatarSkeleton,{})})}),(0,t.jsx)(y.Entity.Content,{title:(0,t.jsx)(p.ButtonLink,{disabled:!0,href:"/",type:"secondary",children:i})})]}),(0,t.jsxs)(y.Entity,{padding:2,children:[(0,t.jsx)(y.Entity.Content,{fill:!0,title:(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial pl-1",children:(0,t.jsx)(x.FrameworkAvatarSkeleton,{})})}),(0,t.jsx)(y.Entity.Content,{title:(0,t.jsx)(p.ButtonLink,{disabled:!0,href:"/",type:"secondary",children:i})})]}),(0,t.jsxs)(y.Entity,{padding:2,children:[(0,t.jsx)(y.Entity.Content,{fill:!0,title:(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial pl-1",children:(0,t.jsx)(x.FrameworkAvatarSkeleton,{})})}),(0,t.jsx)(y.Entity.Content,{title:(0,t.jsx)(p.ButtonLink,{disabled:!0,href:"/",type:"secondary",children:i})})]})]}),(0,t.jsx)(p.ButtonLink,{disabled:!0,href:"/",type:"secondary",width:"100%"})]})}function A(e){let{instructions:i,children:n}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[i?(0,t.jsx)("p",{className:"text-copy-14",children:i}):null,n]})}e.s(["ProjectList",0,j],9477971);var D=e.i(7982125);function S(e){let{prorate:r,addOnValue:s,analyticsSource:a,currency:o,disable:d,enable:y,isEnabled:p,mutate:g,name:x,invoiceItem:b,setAddOnValue:v,modalType:C,setModalType:S,enableSteps:w,disableSteps:N,team:E,toasts:O,update:_,unit:P,includedQuantity:k,onStart:M,onSuccess:I,onClose:L}=e,B=(0,i.useMemo)(()=>"number"==typeof s?s:Array.isArray(s)?s.length:0,[s]),[T,R]=(0,i.useState)(!1),[F,$]=(0,i.useState)(function(e,t,i){if("enableOrUpdate"===t){if("postConfirmConfiguration"in e&&i)return"postConfirmConfiguration";if("configure"in e)return"configure"}else if("disable"===t)return"disable";return"confirm"}(w,C,p)),[H,U]=(0,i.useState)(null),q=(0,i.useCallback)(e=>{$(e),(0,h.trackAddOnEvent)({eventName:"change_step",addOn:x,source:a,step:e,value:s})},[s,a,x]),Q=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(s&&!p||"disable"===e)&&v(void 0),(0,h.trackAddOnEvent)({eventName:"exit_modal",addOn:x,source:a,step:e,value:s}),S(null),L?.(t)},[s,a,p,x,v,S,L]),V=(0,i.useCallback)(async()=>{if(E&&d){M?.();try{R(!0),await d({team:E,addOnValue:s}),await g(),I?.(),O.success(`Disabled ${(0,u.getAddOnDisplayName)(x,F)}.`),(0,h.trackAddOnEvent)({eventName:"disable",addOn:x,source:a})}catch(e){Q(F),e instanceof Error?O.error(e.message):O.error(`We ran into an unexpected issue disabling ${(0,u.getAddOnDisplayName)(x,F)}. Please try again later.`)}finally{R(!1)}}},[E,Q,d,s,g,O,x,a,F,I,M]),z=(0,i.useCallback)(async()=>{if(E){M?.();try{return p&&_?(U(null),await _({team:E,addOnValue:s})):await y({team:E,addOnValue:s}),await g(),I?.(),O.success(`${p?"Updated":"Enabled"} ${(0,u.getAddOnDisplayName)(x,F)}.`),(0,h.trackAddOnEvent)({eventName:p&&_?"update":"enable",addOn:x,source:a,value:s}),!0}catch(e){p&&"previewDeploymentSuffix"===x?U(e instanceof Error?e.message:"Unexpected error updating Preview Deployment Suffix"):(Q(F),e instanceof Error?O.error(e.message):O.error(`We ran into an unexpected issue enabling ${(0,u.getAddOnDisplayName)(x,F)}. Please try again later.`))}}},[E,p,_,s,y,g,O,x,a,Q,F,I,M]),G=(0,i.useCallback)(()=>{switch(F){case"configure":Q("configure",!0);break;case"confirm":"configure"in w?q("configure"):Q("confirm",!0);break;case"postConfirmProjectList":Q("postConfirmProjectList",!0);break;case"postConfirmConfiguration":Q("postConfirmConfiguration",!0);break;default:S(null)}},[F,Q,w,S,q]),Y=(0,i.useMemo)(()=>{switch(F){case"postConfirmConfiguration":case"configure":return"Cancel";case"confirm":if("configure"in w||w.externalConfiguration)return"Back";return"Cancel"}},[F,w]),K=(0,i.useCallback)(async()=>{switch(F){case"configure":r&&"number"==typeof s&&s<b.quantity?q("disable"):q("confirm");break;case"confirm":R(!0),await z(),R(!1),"postConfirmProjectList"in w?q("postConfirmProjectList"):"postConfirmConfiguration"in w?q("postConfirmConfiguration"):Q("confirm");break;case"postConfirmProjectList":Q("postConfirmProjectList");break;case"postConfirmConfiguration":{if(!_){Q("postConfirmConfiguration");break}R(!0);let e=await z();R(!1),e&&Q("postConfirmConfiguration");break}case"disable":await V(),"exitSurvey"in N?q("exitSurvey"):Q("disable");break;case"exitSurvey":Q("exitSurvey");break;default:S(null)}},[F,r,s,b.quantity,z,w,Q,S,q,_,V,N]),W=(0,i.useMemo)(()=>{switch(F){case"configure":return"Next";case"confirm":return w[F]?.confirmLabel??f.defaultConfirmLabel;case"postConfirmProjectList":return"Close";case"postConfirmConfiguration":if(!_)return"Close";return"Save"}},[F,_,w]),Z=(0,i.useMemo)(()=>{switch(F){case"postConfirmConfiguration":case"configure":{let e=w[F]?.content;if(!e){q("confirm");break}let i=w[F]?.instructions||"";return(0,t.jsx)(A,{instructions:i,children:"function"==typeof e?(0,t.jsx)(e,{addOnValue:s,configureError:H,setAddOnValue:v}):e})}case"confirm":{let e=w[F];return(0,t.jsx)(f.ConfirmationInvoice,{addOnValue:s,billingPeriod:E?.billing?.period??null,currency:o,customCopy:e.customCopy,includedQuantity:k,invoiceItem:b,lineItems:e.lineItems,name:x,nonProratedCustomCopy:e.nonProratedCustomCopy,prorate:r,unit:P,confirmLabel:e.confirmLabel})}case"postConfirmProjectList":return(0,t.jsx)(j,{addOn:x,ctaCopy:w[F]?.ctaCopy,ctaHrefBase:w[F]?.ctaHrefBase,description:w[F]?.description,team:E})}},[F,x,w,E,s,H,v,q,o,k,b,r,P]),J=(0,i.useMemo)(()=>"configure"===F&&(!!("number"==typeof s&&s===b.quantity||Array.isArray(s)&&0===s.length)||!s),[s,b.quantity,F]),X="postConfirmProjectList"===F||"postConfirmConfiguration"===F&&!_;return"exitSurvey"===F?(0,t.jsx)(l.SurveyModal,{active:!0,enableSkip:!0,onDismiss:()=>{Q(F)},onSubmit:async e=>{await K(),e.hasResponses&&await (0,c.createSurveyEntry)({data:e})},setActive:()=>{},showThankYouToast:!1,submitOnSkip:!0,surveyInfo:N[F]}):(0,t.jsx)(n.Modal.Modal,{active:!0,allowOverflow:!0,onClickOutside:()=>Q(F),style:{maxHeight:"540px"},width:"540px",children:"disable"===F?(0,t.jsx)(m.DisableModalBody,{closeModal:Q,customCopy:N[F].customDisableCopy,disable:K,includedQuantity:k,invoiceItem:b,loading:T,name:x,newQuantity:B,overrideContent:N[F].customDisableModal}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Modal.Body,{className:"analytics"===x?D.default.fixedHeight:void 0,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pb-4",children:(0,t.jsxs)(n.Modal.Title,{children:[(0,u.getAddOnDisplayName)(x,F),"postConfirmProjectList"===F?" Added":""]})}),Z]})}),(0,t.jsxs)(n.Modal.Actions,{children:[X?null:(0,t.jsx)(n.Modal.Action,{onClick:G,type:"secondary",children:Y}),(0,t.jsx)(n.Modal.Action,{disabled:J,fullWidth:X,loading:T,onClick:K,children:W})]})]})})}e.s(["useTogglePaidAddOn",0,function(e){let{name:n,price:l,enable:c,disable:u,isEnabled:m,enableSteps:f,disableSteps:y,analyticsEventSource:p,update:g,currentAddOnValue:h,includedQuantity:x,unit:b,onStart:v,onSuccess:j,onClose:C}=e,A=(0,r.useToasts)(),{team:D,user:w,isLoading:N,mutate:E}=(0,s.useAccount)(),O=(0,d.billingFeatureSupported)(D,"billing.proratedAddOns"),_=(0,i.useMemo)(()=>{let e=D?.billing?.invoiceItems?.[n],t=e&&"highestQuantity"in e?e.highestQuantity:null;return"webAnalytics"!==n&&e?e:{price:l,quantity:e?.quantity??x??0,highestQuantity:t??x??0}},[x,n,l,D?.billing?.invoiceItems]),[P,k]=(0,i.useState)(null),{mutate:M}=(0,a.useUpcomingUsage)({enabled:!!P}),I=(0,i.useCallback)(()=>Promise.race([E(),M()]),[E,M]),L=m?.(D)??(_.quantity>(x??0)||!!D?.enabledInvoiceItems?.[n]?.enabled),B=D?.billing?.currency,T=(0,i.useMemo)(()=>(0,o.formatCurrency)(_.price,B),[_,B]),[R,F]=(0,i.useState)(h),$=(0,i.useCallback)(e=>{e&&F(e),k("enableOrUpdate")},[F,k]),H=(0,i.useCallback)(()=>{"analytics"!==n&&F(x??0),k("disable")},[F,k,x,n]),U=(0,i.useMemo)(()=>null!==P?(0,t.jsx)(S,{addOnValue:R,analyticsSource:p,currency:B,disable:u,disableSteps:y,enable:c,enableSteps:f,includedQuantity:x,invoiceItem:_,isEnabled:L,modalType:P,mutate:I,name:n,onClose:C,onStart:v,onSuccess:j,prorate:O,setAddOnValue:F,setModalType:k,team:D,toasts:A,unit:b,update:g}):null,[P,R,p,B,u,y,c,f,x,_,L,I,n,C,v,j,O,D,A,b,g]);return!N&&w&&D?{isEnabled:L,AddOnModal:U,openEnableOrUpdateModal:$,openDisableModal:H,formattedPrice:T}:{isEnabled:!1,formattedPrice:T}}],364898)}]);

//# debugId=90e519bf-9d8a-401e-2eda-67920ce95bac
//# sourceMappingURL=23d87eaf69410642.js.map